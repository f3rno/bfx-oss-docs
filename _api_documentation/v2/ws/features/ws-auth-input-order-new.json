{
  "title": "New Order",
  "id": "ws-auth-input-order-new",
  "description": "Creates a new order, can be used to create margin, exchange, and derivative orders.",
  "elements": [
    {
      "type": "MARKDOWN",
      "content": "To submit an order, construct a payload using the \"on\" (order new) abbreviation and include the desired order details. Please look to the sidebar for a model and an example.\n\nUpon submitting the order, you will receive a message of the appropriated type on the \"account info\" channel. Example responses are included in the sidebar. Please look to the [Orders](ref:ws-auth-orders) and [Notifications](ref:ws-auth-notifications) pages for further information, such as the response fields.\n\nOrder inputs require you to run the authentication code along with additional code for the input. The authentication code can be found  on our [Authenticated Channels](doc:ws-auth) and the additional code for inputs can be found on the [Websocket Inputs](ref:ws-input) page."
    },
    {
      "type": "CODE",
      "content": {
        "codes": [
          {
            "code": "// Model\n[\n  0,\n  \"on\",\n  null,\n  {\n    \"gid\": GID,\n    \"cid\": CID,\n    \"type\": TYPE,\n    \"symbol\": SYMBOL,\n    \"amount\": AMOUNT,\n    \"price\": PRICE,\n    \"meta\": {aff_code: \"AFF_CODE_HERE\"} // optional param to pass an affiliate code\n    ...\n  }\n]\n\n// Example\n[\n  0,\n  \"on\",\n  null,\n  {\n    \"gid\": 1,\n    \"cid\": 12345,\n    \"type\": \"LIMIT\",\n    \"symbol\": \"tBTCUSD\",\n    \"amount\": \"1.0\",\n    \"price\": \"500\"\n  }\n]",
            "language": "json",
            "name": "Payload"
          },
          {
            "code": "// When the order is submitted you will receive an 'n' (notification) event as confirmation. If the order request is successful, you will also receive  an 'on' (order new) event. Both events are sent through CHANNEL_ID = 0.\n\n[\nCHANNEL_ID\nEVENT\n [\n MTS, //omitted for 'on' event\n TYPE, //omitted for 'on' event\n MESSAGE_ID, //omitted for 'on' event\n null, //omitted for 'on' event\n  [\n  ID,\n  GID,\n  CID,\n  SYMBOL,\n  MTS_CREATE, \n  MTS_UPDATE, \n  AMOUNT, \n  AMOUNT_ORIG, \n  TYPE,\n  TYPE_PREV,\n  MTS_TIF,\n  _PLACEHOLDER,\n  FLAGS,\n  ORDER_STATUS,\n  _PLACEHOLDER,\n  _PLACEHOLDER,\n  PRICE,\n  PRICE_AVG,\n  PRICE_TRAILING,\n  PRICE_AUX_LIMIT,\n  _PLACEHOLDER,\n  _PLACEHOLDER,\n  _PLACEHOLDER,\n  HIDDEN, \n  PLACED_ID,\n  _PLACEHOLDER,\n  _PLACEHOLDER,\n  _PLACEHOLDER,\n  ROUTING,\n  _PLACEHOLDER,\n  _PLACEHOLDER,\n  META\n  ]\n CODE, //omitted for 'on' event\n STATUS, //omitted for 'on' event\n TEXT //omitted for 'on' event\n ]\n]\n\n[0,\"n\",[1575287438.515,\"on-req\",null,null,[1185815098,null,1575287436979,\"tETHUSD\",1575287438515,1575287438515,-2.5,-2.5,\"LIMIT\",null,null,null,0,\"ACTIVE\",null,null,230,0,0,0,null,null,null,0,null,null,null,null,\"API>BFX\",null,null,null],null,\"SUCCESS\",\"Submitting limit sell order for -2.5 ETH.\"]]\n\n[0,\"on\",[1185815098,null,1575287436979,\"tETHUSD\",1575287438515,1575287438519,-2.5,-2.5,\"LIMIT\",null,null,null,0,\"ACTIVE\",null,null,230,0,0,0,null,null,null,0,0,null,null,null,\"API>BFX\",null,null,null]]",
            "language": "json",
            "name": "Response"
          }
        ],
        "sidebar": true
      }
    },
    {
      "type": "MARKDOWN",
      "content": "**Request Fields**\n\nName | Type | Description\n-- | -- | --\ngid  |  int32  | (optional) Group id for the order\ncid  |  int45  |  Should be unique in the day (UTC) (not enforced)\ntype  |  string  |  The type of the order: LIMIT, MARKET, STOP, STOP LIMIT, TRAILING STOP, EXCHANGE MARKET, EXCHANGE LIMIT, EXCHANGE STOP, EXCHANGE STOP LIMIT, EXCHANGE TRAILING STOP, FOK, EXCHANGE FOK, IOC, EXCHANGE IOC.\nsymbol  |  string  |  symbol (tBTCUSD, tETHUSD, ...)\namount  |  decimal string  |  Positive for buy, Negative for sell\nprice  |  decimal string  |  Price (Not required for market orders)\nlev | int | Set the leverage for a derivative order, supported by derivative symbol orders only. The value should be between 1 and 100 inclusive. The field is optional, if omitted the default leverage value of 10 will be used.\nprice_trailing  |  decimal string  | The trailing price\nprice_aux_limit  |  decimal string  | Auxiliary Limit price (for STOP LIMIT)\nprice_oco_stop | decimal string | OCO stop price\nflags | int16 | See https://docs.bitfinex.com/v2/docs/flag-values.\ntif | datetime string | Time-In-Force: datetime for automatic order cancellation (ie. 2020-01-01 10:45:23) )\nmeta | object | The meta object allows you to pass along an affiliate code inside the object - example: meta: {aff_code: \"AFF_CODE_HERE\"}"
    },
    {
      "type": "CALLOUT",
      "content": {
        "type": "info",
        "title": "meta: {aff_code: ...}",
        "body": "API orders can now pass an affiliate code through which you can earn rebates. To learn more about these rebates and our affiliate program, please look at the relevant [announcement](https://blog.bitfinex.com/announcements/the-revolution-continues/) and [knowledge base article](https://support.bitfinex.com/hc/en-us/articles/360036965234-The-Bitfinex-Affiliate-Program)."
      }
    },
    {
      "type": "MARKDOWN",
      "content": "**Order Types**\n\nAdditional information about the types of orders can be found here:\nhttps://support.bitfinex.com/hc/en-us/articles/115003506105-Limit-Order"
    },
    {
      "type": "CALLOUT",
      "content": {
        "type": "info",
        "title": "Multiple Flags",
        "body": "You may sum flag values to pass multiple flags. For example, passing 4160 (64 + 4096) means hidden and post only.\nThe default value is 0 and indicates that no flags will be used."
      }
    }
  ]
}