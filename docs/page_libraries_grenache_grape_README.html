<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width,initial-scale=1"><meta charset="utf-8"><link rel="stylesheet" type="text/css" href="css/normalize.css"><link rel="stylesheet" type="text/css" href="css/perfect-scrollbar.css"><link rel="stylesheet" type="text/css" href="css/highlightjs/night-owl.css"><link rel="stylesheet" type="text/css" href="index.css"><title>README | grenache-grape</title></head><body><div id="bfx-oss-docs-side-bar"><div id="bfx-oss-docs-side-bar__header"><img src="img/bfx-logo-bg-white.png" alt="Bitfinex" height="63"></div><ul><li><a href="index.html"><p>Home</p></a></li><li><a href="page_md_render_test.html"><p>Markdown Render Test</p></a></li><li><a href="page_libraries_bitfinex_api_py_README.html"><img src="svg/icons/python.svg"><p>bitfinex-api-py</p></a></li><li><a href="page_libraries_bfx_hf_strategy_py_README.html"><img src="svg/icons/python.svg"><p>bfx-hf-strategy-py</p></a></li><li><a href="page_libraries_bfx_hf_indicators_py_README.html"><img src="svg/icons/python.svg"><p>bfx-hf-indicators-py</p></a></li><li><a href="page_libraries_bitfinex_api_go_README.html"><img src="svg/icons/go.svg"><p>bitfinex-api-go</p></a></li><li><a href="page_libraries_bfxfixgw_README.html"><img src="svg/icons/go.svg"><p>bfxfixgw</p></a></li><li><a href="page_libraries_bitfinex_api_rb_README.html"><img src="svg/icons/ruby.svg"><p>bitfinex-api-rb</p></a></li><li><a href="page_libraries_bitfinex_api_node_README.html"><img src="svg/icons/nodejs_small.svg"><p>bitfinex-api-node</p></a></li><li><a href="page_libraries_bfx_api_mock_srv_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-mock-srv</p></a></li><li><a href="page_libraries_bfx_api_node_core_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-core</p></a></li><li><a href="page_libraries_bfx_api_node_models_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-models</p></a></li><li><a href="page_libraries_bfx_api_node_plugin_example_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-example</p></a></li><li><a href="page_libraries_bfx_api_node_plugin_managed_candles_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-managed-candles</p></a></li><li><a href="page_libraries_bfx_api_node_plugin_managed_ob_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-managed-ob</p></a></li><li><a href="page_libraries_bfx_api_node_plugin_ob_checksum_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-ob-checksum</p></a></li><li><a href="page_libraries_bfx_api_node_plugin_seq_audit_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-seq-audit</p></a></li><li><a href="page_libraries_bfx_api_node_plugin_wd_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-wd</p></a></li><li><a href="page_libraries_bfx_api_node_rest_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-rest</p></a></li><li><a href="page_libraries_bfx_api_node_util_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-util</p></a></li><li><a href="page_libraries_bfx_api_node_ws1_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-ws1</p></a></li><li><a href="page_libraries_bfx_hf_backtest_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-backtest</p></a></li><li><a href="page_libraries_bfx_hf_chart_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-chart</p></a></li><li><a href="page_libraries_bfx_hf_data_server_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-data-server</p></a></li><li><a href="page_libraries_bfx_hf_ext_plugin_bitfinex_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-ext-plugin-bitfinex</p></a></li><li><a href="page_libraries_bfx_hf_ext_plugin_dummy_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-ext-plugin-dummy</p></a></li><li><a href="page_libraries_bfx_hf_indicators_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-indicators</p></a></li><li><a href="page_libraries_bfx_hf_models_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-models</p></a></li><li><a href="page_libraries_bfx_hf_models_adapter_lowdb_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-models-adapter-lowdb</p></a></li><li><a href="page_libraries_bfx_hf_models_adapter_sql_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-models-adapter-sql</p></a></li><li><a href="page_libraries_bfx_hf_models_adapter_template_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-models-adapter-template</p></a></li><li><a href="page_libraries_bfx_hf_algo_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-algo</p></a></li><li><a href="page_libraries_bfx_hf_server_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-server</p></a></li><li><a href="page_libraries_bfx_hf_strategy_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-strategy</p></a></li><li><a href="page_libraries_bfx_hf_strategy_exec_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-strategy-exec</p></a></li><li><a href="page_libraries_bfx_hf_ui_config_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-ui-config</p></a></li><li><a href="page_libraries_bfx_hf_util_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-util</p></a></li><li><a href="page_libraries_bfx_ws2_api_audit_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-ws2-api-audit</p></a></li><li><a href="page_libraries_cbq_js_README.html"><img src="svg/icons/nodejs_small.svg"><p>cbq-js</p></a></li><li><a href="page_libraries_caron_README.html"><img src="svg/icons/nodejs_small.svg"><p>caron</p></a></li><li><a href="page_libraries_eos_name_verify_README.html"><img src="svg/icons/nodejs_small.svg"><p>eos-name-verify</p></a></li><li><a href="page_libraries_grenache_browser_http_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-browser-http</p></a></li><li class="active"><a href="page_libraries_grenache_grape_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-grape</p></a><ul><li class="active"><a href="page_libraries_grenache_grape_README.html"><p>- README</p></a></li><li><a href="page_libraries_grenache_grape_reference.html"><p>- API Reference</p></a></li></ul></li><li><a href="page_libraries_grenache_nodejs_base_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-nodejs-base</p></a></li><li><a href="page_libraries_grenache_nodejs_http_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-nodejs-http</p></a></li><li><a href="page_libraries_grenache_nodejs_link_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-nodejs-link</p></a></li><li><a href="page_libraries_grenache_nodejs_utp_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-nodejs-utp</p></a></li><li><a href="page_libraries_grenache_nodejs_ws_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-nodejs-ws</p></a></li><li><a href="page_libraries_grenache_nodejs_ws_tls_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-nodejs-ws-tls</p></a></li><li><a href="page_libraries_lib_js_util_currencies_README.html"><img src="svg/icons/nodejs_small.svg"><p>lib-js-util-currencies</p></a></li><li><a href="page_libraries_lib_js_util_math_README.html"><img src="svg/icons/nodejs_small.svg"><p>lib-js-util-math</p></a></li><li><a href="page_libraries_lib_js_util_number_README.html"><img src="svg/icons/nodejs_small.svg"><p>lib-js-util-number</p></a></li><li><a href="page_libraries_lib_js_util_symbol_README.html"><img src="svg/icons/nodejs_small.svg"><p>lib-js-util-symbol</p></a></li><li><a href="page_libraries_smidgen_README.html"><img src="svg/icons/nodejs_small.svg"><p>smidgen</p></a></li><li><a href="page_libraries_sunbeam_README.html"><img src="svg/icons/nodejs_small.svg"><p>sunbeam</p></a></li><li><a href="page_libraries_wasteland_README.html"><img src="svg/icons/nodejs_small.svg"><p>wasteland</p></a></li></ul></div><div id="bfx-oss-docs-content"><div id="bfx-oss-docs-header-bar"><h2>README</h2><h2>grenache-grape</h2></div><div id="bfx-oss-docs-content-wrapper" class="bfx-oss-docs-content-type-api-docs"><div class="bfx-oss-docs-md-content bfx-oss-docs-code-wrapper"><div id="bfx-oss-docs-api-docs-index"><div id="bfx-oss-docs-api-docs-index__inner"><nav class="bfx-oss-docs-md-toc"><ol><li><a href="#grenache-grape-implementation">Grenache Grape implementation</a><ol><li><a href="#install">Install</a></li><li><a href="#run-in-binary-mode">Run in Binary Mode</a></li><li><a href="#integrate-in-your-code">Integrate in your Code</a></li><li><a href="#api">API</a><ol><li><a href="#class%3A-grape">Class: Grape</a><ol><li><a href="#new-grape(options)">new Grape(options)</a></li><li><a href="#event%3A-%E2%80%98ready%E2%80%99">Event: ‘ready’</a></li><li><a href="#event%3A-%E2%80%98listening%E2%80%99">Event: ‘listening’</a></li><li><a href="#event%3A-%E2%80%98peer%E2%80%99">Event: ‘peer’</a></li><li><a href="#event%3A-%E2%80%98node%E2%80%99">Event: ‘node’</a></li><li><a href="#event%3A-%E2%80%98warning%E2%80%99">Event: ‘warning’</a></li><li><a href="#event%3A-%E2%80%98announce%E2%80%99">Event: ‘announce’</a></li></ol></li></ol></li><li><a href="#implementations">Implementations</a><ol><li><a href="#node.js-clients">Node.JS Clients</a></li><li><a href="#ruby-clients">Ruby Clients</a></li><li><a href="#cli-clients">CLI Clients</a></li></ol></li></ol></li></ol></nav></div></div><h1 id="grenache-grape-implementation"><a class="header-anchor" href="#grenache-grape-implementation">§</a> <a href="https://github.com/bitfinexcom/grenache">Grenache</a> Grape implementation</h1><img src="logo.png" width="15%"><p>Grenache is a micro-framework for connecting microservices. Its simple and optimized for performance.</p><p>Internally, Grenache uses Distributed Hash Tables (DHT, known from Bittorrent) for Peer to Peer connections. You can find more details how Grenche internally works at the <a href="https://github.com/bitfinexcom/grenache">Main Project Homepage</a>.</p><p>Grapes are the backbone of Grenache. They manage the DHT, the base of our virtual network.</p><h2 id="install"><a class="header-anchor" href="#install">§</a> Install</h2><pre><code class="hljs">// <span class="hljs-keyword">Install</span> <span class="hljs-keyword">global</span> (run <span class="hljs-built_in">binary</span>)
npm <span class="hljs-keyword">install</span> -g grenache-grape
</code></pre><pre><code class="hljs">// <span class="hljs-keyword">Install</span> locally <span class="hljs-keyword">to</span> <span class="hljs-keyword">project</span> (programmatic approach)
npm <span class="hljs-keyword">install</span> <span class="hljs-comment">--save grenache-grape</span>
</code></pre><h2 id="run-in-binary-mode"><a class="header-anchor" href="#run-in-binary-mode">§</a> Run in Binary Mode</h2><pre><code class="hljs">grape --<span class="hljs-keyword">help</span>

Usage: grape --<span class="hljs-keyword">dp</span> <span class="hljs-symbol">&lt;dht-port&gt;</span> --aph <span class="hljs-symbol">&lt;http-api-port&gt;</span> --<span class="hljs-keyword">bn</span> <span class="hljs-symbol">&lt;nodes&gt;</span> [--<span class="hljs-keyword">b</span>
bind-<span class="hljs-keyword">to</span>-address]

Option<span class="hljs-variable">s:</span>
  -<span class="hljs-keyword">b</span>, --bind                 Listening host                             [<span class="hljs-built_in">string</span>]
  --<span class="hljs-keyword">dp</span>, --dht_port           DHT listening port              [<span class="hljs-keyword">number</span>] [required]
  --dc, --dht_concurrency    DHT concurrency                            [<span class="hljs-keyword">number</span>]
  --dht_maxTables            DHT <span class="hljs-built_in">max</span> tables                             [<span class="hljs-keyword">number</span>]
  --dht_maxValues            DHT <span class="hljs-built_in">max</span> <span class="hljs-built_in">values</span>                             [<span class="hljs-keyword">number</span>]
  --<span class="hljs-keyword">bn</span>, --bootstrap          Bootstrap nodes                 [<span class="hljs-built_in">string</span>] [required]
  --aph, --api_port          HTTP api port                   [<span class="hljs-keyword">number</span>] [required]
  --dht_peer_maxAge, --dpa   Max age <span class="hljs-keyword">for</span> peers in DHT                   [<span class="hljs-keyword">number</span>]
  --cache_maxAge             Maximum cache age                          [<span class="hljs-keyword">number</span>]
  --dnl, --dht_nodeLiveness  Interval in ms <span class="hljs-keyword">to</span> check <span class="hljs-keyword">for</span> dead nodes     [<span class="hljs-keyword">number</span>]
  --check_maxPayloadSize     Limit <span class="hljs-keyword">for</span> <span class="hljs-built_in">max</span> payload size                 [<span class="hljs-keyword">number</span>]
  --<span class="hljs-keyword">help</span>                     Show <span class="hljs-keyword">help</span>                                 [boolean]
  --<span class="hljs-keyword">version</span>                  Show <span class="hljs-keyword">version</span> <span class="hljs-keyword">number</span>                       [boolean]
</code></pre><pre><code class="hljs">// <span class="hljs-string">Run </span>3 <span class="hljs-string">Grapes
</span><span class="hljs-string">grape </span>-b <span class="hljs-string">127.</span>0.0.1 <span class="hljs-built_in">--dp</span> <span class="hljs-string">20001 </span><span class="hljs-built_in">--dc</span> <span class="hljs-string">32 </span><span class="hljs-built_in">--aph</span> <span class="hljs-string">30001 </span><span class="hljs-built_in">--bn</span> <span class="hljs-string">'127.0.0.1:20002,127.0.0.1:20003'</span>
<span class="hljs-string">grape </span><span class="hljs-built_in">--dp</span> <span class="hljs-string">20002 </span><span class="hljs-built_in">--aph</span> <span class="hljs-string">40001 </span><span class="hljs-built_in">--dc</span> <span class="hljs-string">32 </span><span class="hljs-built_in">--bn</span> <span class="hljs-string">'127.0.0.1:20001,127.0.0.1:20003'</span>
<span class="hljs-string">grape </span><span class="hljs-built_in">--dp</span> <span class="hljs-string">20003 </span><span class="hljs-built_in">--aph</span> <span class="hljs-string">50001 </span><span class="hljs-built_in">--dc</span> <span class="hljs-string">32 </span><span class="hljs-built_in">--bn</span> <span class="hljs-string">'127.0.0.1:20001,127.0.0.1:20002'</span>
</code></pre><h2 id="integrate-in-your-code"><a class="header-anchor" href="#integrate-in-your-code">§</a> Integrate in your Code</h2><pre><code class="hljs"><span class="hljs-keyword">const</span> Grape = <span class="hljs-built_in">require</span>(<span class="hljs-string">'grenache-grape'</span>).Grape

<span class="hljs-keyword">const</span> g = <span class="hljs-keyword">new</span> Grape({
  <span class="hljs-comment">// host: '127.0.0.1', // if undefined the Grape binds all interfaces</span>
  <span class="hljs-attr">dht_port</span>: <span class="hljs-number">20001</span>,
  <span class="hljs-attr">dht_bootstrap</span>: [
    <span class="hljs-string">'127.0.0.1:20002'</span>
  ],
  <span class="hljs-attr">api_port</span>: <span class="hljs-number">30001</span>
})

g.start()
</code></pre><h2 id="api"><a class="header-anchor" href="#api">§</a> API</h2><h3 id="class%3A-grape"><a class="header-anchor" href="#class%3A-grape">§</a> Class: Grape</h3><h4 id="new-grape(options)"><a class="header-anchor" href="#new-grape(options)">§</a> new Grape(options)</h4><ul><li><code>options</code> &lt;Object&gt; Options for the link<ul><li><code>host</code> &lt;String&gt; IP to bind to. If null, Grape binds to all interfaces</li><li><code>dht_maxTables</code> &lt;Number&gt; Maximum number of DHT tables</li><li><code>dht_maxValues</code> &lt;Number&gt; Maximum number of DHT values</li><li><code>dht_port</code> &lt;Number&gt; Port for DHT</li><li><code>dht_concurrency</code> &lt;Number&gt; Concurrency for DHT</li><li><code>dht_bootstrap</code>: &lt;Array&gt; Bootstrap servers</li><li><code>dht_peer_maxAge</code> &lt;Number&gt; maxAge for DHT peers</li><li><code>api_port</code> &lt;Number&gt; Grenache API HTTP Port</li></ul></li></ul><h4 id="event%3A-%E2%80%98ready%E2%80%99"><a class="header-anchor" href="#event%3A-%E2%80%98ready%E2%80%99">§</a> Event: ‘ready’</h4><p>Emitted when the DHT is fully bootstrapped.</p><h4 id="event%3A-%E2%80%98listening%E2%80%99"><a class="header-anchor" href="#event%3A-%E2%80%98listening%E2%80%99">§</a> Event: ‘listening’</h4><p>Emitted when the DHT is listening.</p><h4 id="event%3A-%E2%80%98peer%E2%80%99"><a class="header-anchor" href="#event%3A-%E2%80%98peer%E2%80%99">§</a> Event: ‘peer’</h4><p>Emitted when a potential peer is found.</p><h4 id="event%3A-%E2%80%98node%E2%80%99"><a class="header-anchor" href="#event%3A-%E2%80%98node%E2%80%99">§</a> Event: ‘node’</h4><p>Emitted when the DHT finds a new node.</p><h4 id="event%3A-%E2%80%98warning%E2%80%99"><a class="header-anchor" href="#event%3A-%E2%80%98warning%E2%80%99">§</a> Event: ‘warning’</h4><p>Emitted when a peer announces itself in order to be stored in the DHT.</p><h4 id="event%3A-%E2%80%98announce%E2%80%99"><a class="header-anchor" href="#event%3A-%E2%80%98announce%E2%80%99">§</a> Event: ‘announce’</h4><p>Emitted when a peer announces itself in order to be stored in the DHT.</p><h2 id="implementations"><a class="header-anchor" href="#implementations">§</a> Implementations</h2><h3 id="node.js-clients"><a class="header-anchor" href="#node.js-clients">§</a> Node.JS Clients</h3><ul><li><a href="https://github.com/bitfinexcom/grenache-nodejs-ws:">https://github.com/bitfinexcom/grenache-nodejs-ws:</a> WebSocket based Grape microservices</li><li><a href="https://github.com/bitfinexcom/grenache-nodejs-http:">https://github.com/bitfinexcom/grenache-nodejs-http:</a> HTTP based Grape microservices</li><li><a href="https://github.com/bitfinexcom/grenache-nodejs-zmq:">https://github.com/bitfinexcom/grenache-nodejs-zmq:</a> ZeroMQ based Grape microservices</li></ul><h3 id="ruby-clients"><a class="header-anchor" href="#ruby-clients">§</a> Ruby Clients</h3><ul><li><a href="https://github.com/bitfinexcom/grenache-ruby-ws:">https://github.com/bitfinexcom/grenache-ruby-ws:</a> WebSocket based Grape microservices</li><li><a href="https://github.com/bitfinexcom/grenache-ruby-http:">https://github.com/bitfinexcom/grenache-ruby-http:</a> HTTP based Grape microservices</li></ul><h3 id="cli-clients"><a class="header-anchor" href="#cli-clients">§</a> CLI Clients</h3><ul><li><a href="https://github.com/bitfinexcom/grenache-cli:">https://github.com/bitfinexcom/grenache-cli:</a> Command Line Interface for Grape microservices</li></ul></div></div><!--
      <div id="bfx-oss-docs-footer-bar">
        <div id="bfx-oss-docs-footer-bar__container">
          <p>Copyright © 2013-2020 iFinex Inc. All rights reserved.</p>
        </div>
      </div>
      --></div><script type="text/javascript" src="js/vendor/debug.min.js"></script><script type="text/javascript" src="js/vendor/lodash.min.js"></script><script type="text/javascript" src="js/vendor/zepto.min.js"></script><script type="text/javascript" src="js/vendor/perfect-scrollbar.min.js"></script><script type="text/javascript" src="js/main.js"></script></body></html>