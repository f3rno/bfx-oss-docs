<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width,initial-scale=1"><meta charset="utf-8"><link rel="stylesheet" type="text/css" href="css/normalize.css"><link rel="stylesheet" type="text/css" href="css/perfect-scrollbar.css"><link rel="stylesheet" type="text/css" href="css/highlightjs/night-owl.css"><link rel="stylesheet" type="text/css" href="index.css"><title>API Reference | bfx-api-node-core</title></head><body><div id="bfx-oss-docs-side-bar"><div id="bfx-oss-docs-side-bar__header"><img src="img/bfx-logo-bg-white.png" alt="Bitfinex" height="63"></div><ul><li><a href="index.html"><p>Home</p></a></li><li><a href="page_md_render_test.html"><p>Markdown Render Test</p></a></li><li><a href="/page_libraries_bitfinex_api_py_README.html"><img src="svg/icons/python.svg"><p>bitfinex-api-py</p></a></li><li><a href="/page_libraries_bitfinex_api_go_README.html"><img src="svg/icons/go.svg"><p>bitfinex-api-go</p></a></li><li><a href="/page_libraries_bfxfixgw_README.html"><img src="svg/icons/go.svg"><p>bfxfixgw</p></a></li><li><a href="/page_libraries_bitfinex_api_rb_README.html"><img src="svg/icons/ruby.svg"><p>bitfinex-api-rb</p></a></li><li><a href="/page_libraries_bitfinex_api_node_README.html"><img src="svg/icons/nodejs_small.svg"><p>bitfinex-api-node</p></a></li><li><a href="/page_libraries_bfx_api_mock_srv_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-mock-srv</p></a></li><li class="active"><a href="/page_libraries_bfx_api_node_core_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-core</p></a><ul><li><a href="page_libraries_bfx_api_node_core_README.html"><p>- README</p></a></li><li class="active"><a href="page_libraries_bfx_api_node_core_reference.html"><p>- API Reference</p></a></li></ul></li><li><a href="/page_libraries_bfx_api_node_models_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-models</p></a></li><li><a href="/page_libraries_bfx_api_node_plugin_example_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-example</p></a></li><li><a href="/page_libraries_bfx_api_node_plugin_managed_candles_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-managed-candles</p></a></li><li><a href="/page_libraries_bfx_api_node_plugin_managed_ob_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-managed-ob</p></a></li><li><a href="/page_libraries_bfx_api_node_plugin_ob_checksum_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-ob-checksum</p></a></li><li><a href="/page_libraries_bfx_api_node_plugin_seq_audit_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-seq-audit</p></a></li><li><a href="/page_libraries_bfx_api_node_plugin_wd_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-wd</p></a></li><li><a href="/page_libraries_bfx_api_node_rest_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-rest</p></a></li><li><a href="/page_libraries_bfx_api_node_util_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-util</p></a></li><li><a href="/page_libraries_bfx_api_node_ws1_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-ws1</p></a></li><li><a href="/page_libraries_bfx_hf_backtest_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-backtest</p></a></li><li><a href="/page_libraries_bfx_hf_chart_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-chart</p></a></li><li><a href="/page_libraries_bfx_hf_data_server_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-data-server</p></a></li><li><a href="/page_libraries_bfx_hf_ext_plugin_bitfinex_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-ext-plugin-bitfinex</p></a></li><li><a href="/page_libraries_bfx_hf_ext_plugin_dummy_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-ext-plugin-dummy</p></a></li><li><a href="/page_libraries_bfx_hf_indicators_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-indicators</p></a></li><li><a href="/page_libraries_bfx_hf_models_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-models</p></a></li><li><a href="/page_libraries_bfx_hf_models_adapter_lowdb_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-models-adapter-lowdb</p></a></li><li><a href="/page_libraries_bfx_hf_models_adapter_sql_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-models-adapter-sql</p></a></li><li><a href="/page_libraries_bfx_hf_models_adapter_template_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-models-adapter-template</p></a></li><li><a href="/page_libraries_bfx_hf_algo_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-algo</p></a></li><li><a href="/page_libraries_bfx_hf_server_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-server</p></a></li><li><a href="/page_libraries_bfx_hf_strategy_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-strategy</p></a></li><li><a href="/page_libraries_bfx_hf_strategy_exec_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-strategy-exec</p></a></li><li><a href="/page_libraries_bfx_hf_ui_config_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-ui-config</p></a></li><li><a href="/page_libraries_bfx_hf_util_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-util</p></a></li><li><a href="/page_libraries_bfx_ws2_api_audit_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-ws2-api-audit</p></a></li><li><a href="/page_libraries_cbq_js_README.html"><img src="svg/icons/nodejs_small.svg"><p>cbq-js</p></a></li><li><a href="/page_libraries_caron_README.html"><img src="svg/icons/nodejs_small.svg"><p>caron</p></a></li><li><a href="/page_libraries_eos_name_verify_README.html"><img src="svg/icons/nodejs_small.svg"><p>eos-name-verify</p></a></li><li><a href="/page_libraries_grenache_browser_http_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-browser-http</p></a></li><li><a href="/page_libraries_grenache_grape_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-grape</p></a></li><li><a href="/page_libraries_grenache_nodejs_base_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-nodejs-base</p></a></li><li><a href="/page_libraries_grenache_nodejs_http_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-nodejs-http</p></a></li><li><a href="/page_libraries_grenache_nodejs_link_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-nodejs-link</p></a></li><li><a href="/page_libraries_grenache_nodejs_utp_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-nodejs-utp</p></a></li><li><a href="/page_libraries_grenache_nodejs_ws_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-nodejs-ws</p></a></li><li><a href="/page_libraries_grenache_nodejs_ws_tls_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-nodejs-ws-tls</p></a></li><li><a href="/page_libraries_lib_js_util_currencies_README.html"><img src="svg/icons/nodejs_small.svg"><p>lib-js-util-currencies</p></a></li><li><a href="/page_libraries_lib_js_util_math_README.html"><img src="svg/icons/nodejs_small.svg"><p>lib-js-util-math</p></a></li><li><a href="/page_libraries_lib_js_util_number_README.html"><img src="svg/icons/nodejs_small.svg"><p>lib-js-util-number</p></a></li><li><a href="/page_libraries_lib_js_util_symbol_README.html"><img src="svg/icons/nodejs_small.svg"><p>lib-js-util-symbol</p></a></li><li><a href="/page_libraries_smidgen_README.html"><img src="svg/icons/nodejs_small.svg"><p>smidgen</p></a></li><li><a href="/page_libraries_sunbeam_README.html"><img src="svg/icons/nodejs_small.svg"><p>sunbeam</p></a></li><li><a href="/page_libraries_wasteland_README.html"><img src="svg/icons/nodejs_small.svg"><p>wasteland</p></a></li></ul></div><div id="bfx-oss-docs-content"><div id="bfx-oss-docs-header-bar"><h2>API Reference</h2><h2>bfx-api-node-core</h2></div><div id="bfx-oss-docs-content-wrapper" class="bfx-oss-docs-content-type-api-docs"><div class="bfx-oss-docs-md-content bfx-oss-docs-code-wrapper"><div id="bfx-oss-docs-api-docs-index"><div id="bfx-oss-docs-api-docs-index__inner"><ul><li><a href="#module_bfx-api-node-core">bfx-api-node-core</a><ul><li><em>static</em><ul><li><a href="#module_bfx-api-node-core.WS_DATA_CHANNEL_TYPES">.WS_DATA_CHANNEL_TYPES</a></li><li><a href="#module_bfx-api-node-core.definePlugin">.definePlugin(id, defaultArgs, cb)</a> ⇒ <a href="#module_bfx-api-node-core.PluginGenerator"><code>PluginGenerator</code></a></li><li><a href="#module_bfx-api-node-core.getPluginState">.getPluginState(id, wsState)</a> ⇒ <a href="#module_bfx-api-node-core.Plugin"><code>Plugin</code></a></li><li><a href="#module_bfx-api-node-core.auth">.auth(state, opts)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-api-node-core.getWSDataChannelCount">.getWSDataChannelCount(state)</a> ⇒ <code>number</code></li><li><a href="#module_bfx-api-node-core.getPendingSubscriptionCount">.getPendingSubscriptionCount(state)</a> ⇒ <code>number</code></li><li><a href="#module_bfx-api-node-core.getPendingUnsubscriptionCount">.getPendingUnsubscriptionCount(state)</a> ⇒ <code>number</code></li><li><a href="#module_bfx-api-node-core.disableFlag">.disableFlag(state, flag, silent)</a> ⇒ <a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></li><li><a href="#module_bfx-api-node-core.enableFlag">.enableFlag(state, flag, silent)</a> ⇒ <a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></li><li><a href="#module_bfx-api-node-core.isFlagEnabled">.isFlagEnabled(state, flag)</a> ⇒ <code>boolean</code></li><li><a href="#module_bfx-api-node-core.setFlags">.setFlags(state, flags, silent)</a> ⇒ <a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></li><li><a href="#module_bfx-api-node-core.open">.open([url], [agent])</a> ⇒ <code>object</code></li><li><a href="#module_bfx-api-node-core.cancelOrderWithDelay">.cancelOrderWithDelay(state, delay, o)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-api-node-core.cancelOrder">.cancelOrder(state, order)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-api-node-core.submitOrderWithDelay">.submitOrderWithDelay(state, delay, o)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-api-node-core.submitOrder">.submitOrder(state, order)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-api-node-core.updateOrder">.updateOrder(state, changes)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-api-node-core.reopen">.reopen(state)</a> ⇒ <a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></li><li><a href="#module_bfx-api-node-core.send">.send(state, msg)</a></li><li><a href="#module_bfx-api-node-core.subscribe">.subscribe(state, channel, payload)</a> ⇒ <a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></li><li><a href="#module_bfx-api-node-core.unsubscribe">.unsubscribe(state, chanId)</a> ⇒ <a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></li><li><a href="#module_bfx-api-node-core.AuthArgs">.AuthArgs</a> : <code>object</code></li><li><a href="#module_bfx-api-node-core.FullAuthArgs">.FullAuthArgs</a> : <a href="#module_bfx-api-node-core.AuthArgs"><code>AuthArgs</code></a></li><li><a href="#module_bfx-api-node-core.PluginEventHandler">.PluginEventHandler</a> ⇒ <code>Array</code> | <code>null</code></li><li><a href="#module_bfx-api-node-core.PluginGenerator">.PluginGenerator</a> ⇒ <a href="#module_bfx-api-node-core.Plugin"><code>Plugin</code></a></li><li><a href="#module_bfx-api-node-core.PluginHelpers">.PluginHelpers</a> : <code>object</code></li><li><a href="#module_bfx-api-node-core.Plugin">.Plugin</a> : <code>object</code></li><li><a href="#module_bfx-api-node-core.SocketState">.SocketState</a> : <code>object</code></li></ul></li><li><em>inner</em><ul><li><a href="#module_bfx-api-node-core.Manager">~Manager</a> ⇐ <code>EventEmitter</code><ul><li><a href="#new_module_bfx-api-node-core.Manager_new">new Manager([args])</a></li><li><a href="#module_bfx-api-node-core.Manager+updateAuthArgs">.updateAuthArgs(args)</a></li><li><a href="#module_bfx-api-node-core.Manager+hasPlugin">.hasPlugin(plugin)</a> ⇒ <code>boolean</code></li><li><a href="#module_bfx-api-node-core.Manager+addPlugin">.addPlugin(plugin)</a></li><li><a href="#module_bfx-api-node-core.Manager+auth">.auth([args])</a></li><li><a href="#module_bfx-api-node-core.Manager+getWS">.getWS(id)</a> ⇒ <a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></li><li><a href="#module_bfx-api-node-core.Manager+getWSIndex">.getWSIndex(id)</a> ⇒ <code>number</code></li><li><a href="#module_bfx-api-node-core.Manager+getWSByIndex">.getWSByIndex(index)</a> ⇒ <a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></li><li><a href="#module_bfx-api-node-core.Manager+updateWS">.updateWS(id, state)</a></li><li><a href="#module_bfx-api-node-core.Manager+closeAllSockets">.closeAllSockets()</a></li><li><a href="#module_bfx-api-node-core.Manager+reconnectAllSockets">.reconnectAllSockets()</a></li><li><a href="#module_bfx-api-node-core.Manager+closeWS">.closeWS(id)</a></li><li><a href="#module_bfx-api-node-core.Manager+openWS">.openWS()</a> ⇒ <a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></li><li><a href="#module_bfx-api-node-core.Manager+onWS">.onWS(eventName, filterValue, cb)</a></li><li><a href="#module_bfx-api-node-core.Manager+onceWS">.onceWS(eventName, filterValue, cb)</a></li><li><a href="#module_bfx-api-node-core.Manager+notifyPlugins">.notifyPlugins(type, section, name, args)</a></li><li><a href="#module_bfx-api-node-core.Manager+notifyPlugin">.notifyPlugin(plugin, section, name, args)</a></li><li><a href="#module_bfx-api-node-core.Manager+withFreeDataSocket">.withFreeDataSocket(cb)</a></li><li><a href="#module_bfx-api-node-core.Manager+withDataSocket">.withDataSocket(filterCB, cb)</a></li><li><a href="#module_bfx-api-node-core.Manager+withAuthSocket">.withAuthSocket(cb)</a></li><li><a href="#module_bfx-api-node-core.Manager+withSocket">.withSocket(cb)</a></li><li><a href="#module_bfx-api-node-core.Manager+sampleWS">.sampleWS()</a> ⇒ <a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></li><li><a href="#module_bfx-api-node-core.Manager+sampleWSI">.sampleWSI()</a> ⇒ <code>number</code></li><li><a href="#module_bfx-api-node-core.Manager+applyWS">.applyWS(i, cb)</a></li></ul></li></ul></li></ul></li></ul></div></div><p><a id="module_bfx-api-node-core"></a></p><h2 id="bfx-api-node-core"><a class="header-anchor" href="#bfx-api-node-core">§</a> bfx-api-node-core</h2><p>Modular Bitfinex Node.JS API library as an alternative to <a href="module:bitfinex-api-node">bitfinex-api-node</a>, supporting a plugin system. Connection instances are POJOs as opposed to the WSv2 class instances returned by <a href="module:bitfinex-api-node">bitfinex-api-node</a> and are manipulated in a functional style. A connection pool manager is also provided for multiplexing.</p><h3 id="features"><a class="header-anchor" href="#features">§</a> Features</h3><ul><li>POJO connection instances</li><li>Multiplexing connection pool manager</li><li>Plugin system for extending the default events</li></ul><h3 id="available-plugins"><a class="header-anchor" href="#available-plugins">§</a> Available Plugins</h3><ul><li><a href="module:bfx-api-node-plugin-example">bfx-api-node-plugin-example</a> - skeleton plugin that serves as a reference for the required structure.</li><li><a href="module:bfx-api-node-plugin-managed-candles">bfx-api-node-plugin-managed-candles</a> - maintains an updated candle dataset and provides events to access it on each update.</li><li><a href="module:bfx-api-node-plugin-managed-ob">bfx-api-node-plugin-managed-ob</a> - maintains an updated full order book copy for each subscribed book channel, and provides events to access it on each update.</li><li><a href="module:bfx-api-node-plugin-ob-checksum">bfx-api-node-plugin-ob-checksum</a> - maintains local order books for each subscribed book channel and performs automatic checksum verification, emitting a custom event on checksum mismatch.</li><li><a href="module:bfx-api-node-plugin-seq-audit">bfx-api-node-plugin-seq-audit</a> - enables sequence numbers and performs automatic verification, emitting a custom event on sequence number mismatch.</li><li><a href="module:bfx-api-node-plugin-wd">bfx-api-node-plugin-wd</a> - implements a connection watchdog, automatically reconnecting if no new packets are received within the configured grace period.</li></ul><h3 id="installation"><a class="header-anchor" href="#installation">§</a> Installation</h3><pre><code class="hljs language-bash">npm i --save bfx-api-node-core
</code></pre><h3 id="quickstart"><a class="header-anchor" href="#quickstart">§</a> Quickstart</h3><pre><code class="hljs language-js"><span class="hljs-keyword">const</span> { Manager, initState } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'bfx-api-node-core'</span>)

<span class="hljs-comment">// Create a Manager instance with an internal connection pool, and add a</span>
<span class="hljs-comment">// connection to the pool</span>
<span class="hljs-keyword">const</span> m = <span class="hljs-keyword">new</span> Manager({ <span class="hljs-attr">transform</span>: <span class="hljs-literal">true</span> })
<span class="hljs-keyword">const</span> managedConnection = m.openWS()

<span class="hljs-comment">// Alternatively, create &amp; open a single connection yourself</span>
<span class="hljs-keyword">const</span> connection = initState({ <span class="hljs-attr">transform</span>: <span class="hljs-literal">true</span> })

<span class="hljs-comment">// do something with connections, see below for examples</span>
</code></pre><p><strong>License</strong>: MIT<br><a id="module_bfx-api-node-core.WS_DATA_CHANNEL_TYPES"></a></p><h3 id="bfx-api-node-core.ws_data_channel_types"><a class="header-anchor" href="#bfx-api-node-core.ws_data_channel_types">§</a> bfx-api-node-core.WS_DATA_CHANNEL_TYPES</h3><p>Valid websocket data channel types</p><p><strong>Kind</strong>: static constant of <a href="#module_bfx-api-node-core"><code>bfx-api-node-core</code></a><br><strong>Read only</strong>: true<br><a id="module_bfx-api-node-core.definePlugin"></a></p><h3 id="bfx-api-node-core.defineplugin(id%2C-defaultargs%2C-cb)-%E2%87%92-plugingenerator"><a class="header-anchor" href="#bfx-api-node-core.defineplugin(id%2C-defaultargs%2C-cb)-%E2%87%92-plugingenerator">§</a> bfx-api-node-core.definePlugin(id, defaultArgs, cb) ⇒ <a href="#module_bfx-api-node-core.PluginGenerator"><code>PluginGenerator</code></a></h3><p>Provides helpers for the plugin definition, and attaches the ID</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-api-node-core"><code>bfx-api-node-core</code></a><br><strong>Returns</strong>: <a href="#module_bfx-api-node-core.PluginGenerator"><code>PluginGenerator</code></a> - def - enriched plugin def function</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>id</td><td><code>string</code></td><td>plugin ID</td></tr><tr><td>defaultArgs</td><td><code>object</code></td><td>default plugin arguments</td></tr><tr><td>cb</td><td><code>function</code></td><td>plugin def function</td></tr></tbody></table><p><a id="module_bfx-api-node-core.getPluginState"></a></p><h3 id="bfx-api-node-core.getpluginstate(id%2C-wsstate)-%E2%87%92-plugin"><a class="header-anchor" href="#bfx-api-node-core.getpluginstate(id%2C-wsstate)-%E2%87%92-plugin">§</a> bfx-api-node-core.getPluginState(id, wsState) ⇒ <a href="#module_bfx-api-node-core.Plugin"><code>Plugin</code></a></h3><p>Get plugin state by ID from a socket</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-api-node-core"><code>bfx-api-node-core</code></a><br><strong>Returns</strong>: <a href="#module_bfx-api-node-core.Plugin"><code>Plugin</code></a> - plugin - may be undefined</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>id</td><td><code>string</code></td><td>unique plugin ID</td></tr><tr><td>wsState</td><td><a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></td><td>socket</td></tr></tbody></table><p><a id="module_bfx-api-node-core.auth"></a></p><h3 id="bfx-api-node-core.auth(state%2C-opts)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-api-node-core.auth(state%2C-opts)-%E2%87%92-promise">§</a> bfx-api-node-core.auth(state, opts) ⇒ <code>Promise</code></h3><p>Attempts to authenticate with the connection’s configured API credentials, and the provided flags. Returns a promise that resolves/rejects on success/failure.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-api-node-core"><code>bfx-api-node-core</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves on successful auth</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>state</td><td><a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></td><td>socket</td></tr><tr><td>opts</td><td><a href="#module_bfx-api-node-core.AuthArgs"><code>AuthArgs</code></a></td><td>auth args</td></tr></tbody></table><p><a id="module_bfx-api-node-core.getWSDataChannelCount"></a></p><h3 id="bfx-api-node-core.getwsdatachannelcount(state)-%E2%87%92-number"><a class="header-anchor" href="#bfx-api-node-core.getwsdatachannelcount(state)-%E2%87%92-number">§</a> bfx-api-node-core.getWSDataChannelCount(state) ⇒ <code>number</code></h3><p>Returns the number of data channel subscriptions. Pending subscriptions are counted as the subscribe packet has been emitted.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-api-node-core"><code>bfx-api-node-core</code></a><br><strong>Returns</strong>: <code>number</code> - dataChannelCount</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>state</td><td><a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></td><td>socket</td></tr></tbody></table><p><a id="module_bfx-api-node-core.getPendingSubscriptionCount"></a></p><h3 id="bfx-api-node-core.getpendingsubscriptioncount(state)-%E2%87%92-number"><a class="header-anchor" href="#bfx-api-node-core.getpendingsubscriptioncount(state)-%E2%87%92-number">§</a> bfx-api-node-core.getPendingSubscriptionCount(state) ⇒ <code>number</code></h3><p>Query the number of pending channel subscriptions (subscribed but confirmation packet not yet received)</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-api-node-core"><code>bfx-api-node-core</code></a><br><strong>Returns</strong>: <code>number</code> - pendingSubCount</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>state</td><td><a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></td><td>socket</td></tr></tbody></table><p><a id="module_bfx-api-node-core.getPendingUnsubscriptionCount"></a></p><h3 id="bfx-api-node-core.getpendingunsubscriptioncount(state)-%E2%87%92-number"><a class="header-anchor" href="#bfx-api-node-core.getpendingunsubscriptioncount(state)-%E2%87%92-number">§</a> bfx-api-node-core.getPendingUnsubscriptionCount(state) ⇒ <code>number</code></h3><p>Query the number of pending channel unsubscriptions (unsubscribed but confirmation packet not yet received)</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-api-node-core"><code>bfx-api-node-core</code></a><br><strong>Returns</strong>: <code>number</code> - pendingUnsubCount</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>state</td><td><a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></td><td>socket</td></tr></tbody></table><p><a id="module_bfx-api-node-core.disableFlag"></a></p><h3 id="bfx-api-node-core.disableflag(state%2C-flag%2C-silent)-%E2%87%92-socketstate"><a class="header-anchor" href="#bfx-api-node-core.disableflag(state%2C-flag%2C-silent)-%E2%87%92-socketstate">§</a> bfx-api-node-core.disableFlag(state, flag, silent) ⇒ <a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></h3><p>Disables a flag; updates the connection flag set</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-api-node-core"><code>bfx-api-node-core</code></a><br><strong>Returns</strong>: <a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a> - nextState</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>state</td><td><a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></td><td>socket</td></tr><tr><td>flag</td><td><code>number</code></td><td>individual flag to disable</td></tr><tr><td>silent</td><td><code>boolean</code></td><td>if true, no event is emitted</td></tr></tbody></table><p><a id="module_bfx-api-node-core.enableFlag"></a></p><h3 id="bfx-api-node-core.enableflag(state%2C-flag%2C-silent)-%E2%87%92-socketstate"><a class="header-anchor" href="#bfx-api-node-core.enableflag(state%2C-flag%2C-silent)-%E2%87%92-socketstate">§</a> bfx-api-node-core.enableFlag(state, flag, silent) ⇒ <a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></h3><p>Enables a flag; updates the connection flag set</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-api-node-core"><code>bfx-api-node-core</code></a><br><strong>Returns</strong>: <a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a> - nextState</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>state</td><td><a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></td><td>socket</td></tr><tr><td>flag</td><td><code>number</code></td><td>individual flag to enable</td></tr><tr><td>silent</td><td><code>boolean</code></td><td>if true, no event is emitted</td></tr></tbody></table><p><a id="module_bfx-api-node-core.isFlagEnabled"></a></p><h3 id="bfx-api-node-core.isflagenabled(state%2C-flag)-%E2%87%92-boolean"><a class="header-anchor" href="#bfx-api-node-core.isflagenabled(state%2C-flag)-%E2%87%92-boolean">§</a> bfx-api-node-core.isFlagEnabled(state, flag) ⇒ <code>boolean</code></h3><p>Query if a flag is enabled on the provided socket.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-api-node-core"><code>bfx-api-node-core</code></a><br><strong>Returns</strong>: <code>boolean</code> - enabled</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>state</td><td><a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></td><td>socket</td></tr><tr><td>flag</td><td><code>number</code></td><td>flag</td></tr></tbody></table><p><a id="module_bfx-api-node-core.setFlags"></a></p><h3 id="bfx-api-node-core.setflags(state%2C-flags%2C-silent)-%E2%87%92-socketstate"><a class="header-anchor" href="#bfx-api-node-core.setflags(state%2C-flags%2C-silent)-%E2%87%92-socketstate">§</a> bfx-api-node-core.setFlags(state, flags, silent) ⇒ <a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></h3><p>Updates the connections flags</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-api-node-core"><code>bfx-api-node-core</code></a><br><strong>Returns</strong>: <a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a> - nextState</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>state</td><td><a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></td><td>socket</td></tr><tr><td>flags</td><td><code>number</code></td><td>full flag set</td></tr><tr><td>silent</td><td><code>boolean</code></td><td>if true, no event is emitted</td></tr></tbody></table><p><a id="module_bfx-api-node-core.open"></a></p><h3 id="bfx-api-node-core.open(%5Burl%5D%2C-%5Bagent%5D)-%E2%87%92-object"><a class="header-anchor" href="#bfx-api-node-core.open(%5Burl%5D%2C-%5Bagent%5D)-%E2%87%92-object">§</a> bfx-api-node-core.open([url], [agent]) ⇒ <code>object</code></h3><p>Opens a websocket connection to the provided Bitfinex API URL and prepares an event emitter to capture and report API stream events.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-api-node-core"><code>bfx-api-node-core</code></a><br><strong>Returns</strong>: <code>object</code> - connectionState - see <a href="module:bfx-api-node-core.initState">module:bfx-api-node-core.initState</a></p><table><thead><tr><th>Param</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>[url]</td><td><code>string</code></td><td><code>&quot;'wss://api.bitfinex.com/ws/2'&quot;</code></td><td>endpoint</td></tr><tr><td>[agent]</td><td><code>object</code></td><td></td><td>connection agent</td></tr></tbody></table><p><a id="module_bfx-api-node-core.cancelOrderWithDelay"></a></p><h3 id="bfx-api-node-core.cancelorderwithdelay(state%2C-delay%2C-o)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-api-node-core.cancelorderwithdelay(state%2C-delay%2C-o)-%E2%87%92-promise">§</a> bfx-api-node-core.cancelOrderWithDelay(state, delay, o) ⇒ <code>Promise</code></h3><p>Cancels an order from either an order object, array, or raw ID, after the specified delay.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-api-node-core"><code>bfx-api-node-core</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves/rejects upon confirmation</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>state</td><td><a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></td><td>socket</td></tr><tr><td>delay</td><td><code>number</code></td><td>in ms</td></tr><tr><td>o</td><td><code>module:bfx-api-node-models.Order</code> | <code>module:bfx-api-node-models.Order~Data</code></td><td>order</td></tr></tbody></table><p><a id="module_bfx-api-node-core.cancelOrder"></a></p><h3 id="bfx-api-node-core.cancelorder(state%2C-order)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-api-node-core.cancelorder(state%2C-order)-%E2%87%92-promise">§</a> bfx-api-node-core.cancelOrder(state, order) ⇒ <code>Promise</code></h3><p>Cancels an order from either an order object, array, or raw ID.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-api-node-core"><code>bfx-api-node-core</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves/rejects upon confirmation</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>state</td><td><a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></td><td>socket</td></tr><tr><td>order</td><td><code>module:bfx-api-node-models.Order</code> | <code>module:bfx-api-node-models.Order~Data</code></td><td>order</td></tr></tbody></table><p><a id="module_bfx-api-node-core.submitOrderWithDelay"></a></p><h3 id="bfx-api-node-core.submitorderwithdelay(state%2C-delay%2C-o)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-api-node-core.submitorderwithdelay(state%2C-delay%2C-o)-%E2%87%92-promise">§</a> bfx-api-node-core.submitOrderWithDelay(state, delay, o) ⇒ <code>Promise</code></h3><p>Submits an order with either an order model or raw order object, after the specified delay.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-api-node-core"><code>bfx-api-node-core</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves/rejects upon confirmation</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>state</td><td><a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></td><td>socket</td></tr><tr><td>delay</td><td><code>number</code></td><td>in ms</td></tr><tr><td>o</td><td><code>module:bfx-api-node-models.Order</code> | <code>module:bfx-api-node-models.Order~Data</code></td><td>order</td></tr></tbody></table><p><a id="module_bfx-api-node-core.submitOrder"></a></p><h3 id="bfx-api-node-core.submitorder(state%2C-order)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-api-node-core.submitorder(state%2C-order)-%E2%87%92-promise">§</a> bfx-api-node-core.submitOrder(state, order) ⇒ <code>Promise</code></h3><p>Submits an order with either an order model or raw order object.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-api-node-core"><code>bfx-api-node-core</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves/rejects upon confirmation</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>state</td><td><a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></td><td>socket</td></tr><tr><td>order</td><td><code>module:bfx-api-node-models.Order</code> | <code>module:bfx-api-node-models.Order~Data</code></td><td>order</td></tr></tbody></table><p><a id="module_bfx-api-node-core.updateOrder"></a></p><h3 id="bfx-api-node-core.updateorder(state%2C-changes)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-api-node-core.updateorder(state%2C-changes)-%E2%87%92-promise">§</a> bfx-api-node-core.updateOrder(state, changes) ⇒ <code>Promise</code></h3><p>Updates an order in-place.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-api-node-core"><code>bfx-api-node-core</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves/rejects upon confirmation</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>state</td><td><a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></td><td>socket</td></tr><tr><td>changes</td><td><code>object</code></td><td>order update packet</td></tr><tr><td><a href="http://changes.id">changes.id</a></td><td><code>object</code></td><td>id of order to apply update to</td></tr></tbody></table><p><a id="module_bfx-api-node-core.reopen"></a></p><h3 id="bfx-api-node-core.reopen(state)-%E2%87%92-socketstate"><a class="header-anchor" href="#bfx-api-node-core.reopen(state)-%E2%87%92-socketstate">§</a> bfx-api-node-core.reopen(state) ⇒ <a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></h3><p>Reopen a socket connection.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-api-node-core"><code>bfx-api-node-core</code></a><br><strong>Returns</strong>: <a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a> - nextState</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>state</td><td><a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></td><td>socket</td></tr></tbody></table><p><a id="module_bfx-api-node-core.send"></a></p><h3 id="bfx-api-node-core.send(state%2C-msg)"><a class="header-anchor" href="#bfx-api-node-core.send(state%2C-msg)">§</a> bfx-api-node-core.send(state, msg)</h3><p>Sends the provided data to the active WebSocket connection, or buffers it if the connection is not yet open.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-api-node-core"><code>bfx-api-node-core</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>state</td><td><a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></td><td>socket</td></tr><tr><td>msg</td><td><code>Array</code> | <code>object</code></td><td>converted to a JSON string before being sent</td></tr></tbody></table><p><a id="module_bfx-api-node-core.subscribe"></a></p><h3 id="bfx-api-node-core.subscribe(state%2C-channel%2C-payload)-%E2%87%92-socketstate"><a class="header-anchor" href="#bfx-api-node-core.subscribe(state%2C-channel%2C-payload)-%E2%87%92-socketstate">§</a> bfx-api-node-core.subscribe(state, channel, payload) ⇒ <a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></h3><p>Subscribes to the specified channel, buffers if the connection is not open.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-api-node-core"><code>bfx-api-node-core</code></a><br><strong>Returns</strong>: <a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a> - state - original ref</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>state</td><td><a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></td><td>socket</td></tr><tr><td>channel</td><td><code>string</code></td><td>channel type, i.e. ‘trades’</td></tr><tr><td>payload</td><td><code>object</code></td><td>channel filter, i.e. { symbol: ‘…’ }</td></tr></tbody></table><p><a id="module_bfx-api-node-core.unsubscribe"></a></p><h3 id="bfx-api-node-core.unsubscribe(state%2C-chanid)-%E2%87%92-socketstate"><a class="header-anchor" href="#bfx-api-node-core.unsubscribe(state%2C-chanid)-%E2%87%92-socketstate">§</a> bfx-api-node-core.unsubscribe(state, chanId) ⇒ <a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></h3><p>Unsubscribes from the specified channel, buffers if the connection is not open.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-api-node-core"><code>bfx-api-node-core</code></a><br><strong>Returns</strong>: <a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a> - state - original ref</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>state</td><td><a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></td><td>socket</td></tr><tr><td>chanId</td><td><code>string</code> | <code>number</code></td><td>ID of channel to unsubscribe from</td></tr></tbody></table><p><a id="module_bfx-api-node-core.AuthArgs"></a></p><h3 id="bfx-api-node-core.authargs-%3A-object"><a class="header-anchor" href="#bfx-api-node-core.authargs-%3A-object">§</a> bfx-api-node-core.AuthArgs : <code>object</code></h3><p>Socket authentication arguments, provided to <a href="module:bitfinex-api-node.WSv2">WSv2</a> clients by the <a href="#module_bfx-api-node-core.Manager">Manager</a></p><p><strong>Kind</strong>: static typedef of <a href="#module_bfx-api-node-core"><code>bfx-api-node-core</code></a><br><strong>Properties</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>[dms]</td><td><code>number</code></td><td><code>0</code></td><td>dead man switch, active 4</td></tr><tr><td>[calc]</td><td><code>number</code></td><td><code>0</code></td><td>calc</td></tr></tbody></table><p><a id="module_bfx-api-node-core.FullAuthArgs"></a></p><h3 id="bfx-api-node-core.fullauthargs-%3A-authargs"><a class="header-anchor" href="#bfx-api-node-core.fullauthargs-%3A-authargs">§</a> bfx-api-node-core.FullAuthArgs : <a href="#module_bfx-api-node-core.AuthArgs"><code>AuthArgs</code></a></h3><p>Like <a href="#module_bfx-api-node-core.AuthArgs">AuthArgs</a> but with API credentials.</p><p><strong>Kind</strong>: static typedef of <a href="#module_bfx-api-node-core"><code>bfx-api-node-core</code></a><br><strong>Properties</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>apiKey</td><td><code>string</code></td><td>api key</td></tr><tr><td>apiSecret</td><td><code>string</code></td><td>api secret</td></tr></tbody></table><p><a id="module_bfx-api-node-core.PluginEventHandler"></a></p><h3 id="bfx-api-node-core.plugineventhandler-%E2%87%92-array-%7C-null"><a class="header-anchor" href="#bfx-api-node-core.plugineventhandler-%E2%87%92-array-%7C-null">§</a> bfx-api-node-core.PluginEventHandler ⇒ <code>Array</code> | <code>null</code></h3><p>A plugin event handler function.</p><p><strong>Kind</strong>: static typedef of <a href="#module_bfx-api-node-core"><code>bfx-api-node-core</code></a><br><strong>Returns</strong>: <code>Array</code> | <code>null</code> - stateUpdate - of the form <code>[socketState, pluginState]</code></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>args</td><td><code>object</code></td><td>arguments</td></tr><tr><td>args.state</td><td><a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></td><td>target socket</td></tr></tbody></table><p><a id="module_bfx-api-node-core.PluginGenerator"></a></p><h3 id="bfx-api-node-core.plugingenerator-%E2%87%92-plugin"><a class="header-anchor" href="#bfx-api-node-core.plugingenerator-%E2%87%92-plugin">§</a> bfx-api-node-core.PluginGenerator ⇒ <a href="#module_bfx-api-node-core.Plugin"><code>Plugin</code></a></h3><p>Function that returns a <a href="#module_bfx-api-node-core.Plugin">Plugin</a> object given a set of arguments.</p><p><strong>Kind</strong>: static typedef of <a href="#module_bfx-api-node-core"><code>bfx-api-node-core</code></a><br><strong>Returns</strong>: <a href="#module_bfx-api-node-core.Plugin"><code>Plugin</code></a> - plugin</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>pluginArgs</td><td><code>object</code></td><td>plugin arguments</td></tr></tbody></table><p><a id="module_bfx-api-node-core.PluginHelpers"></a></p><h3 id="bfx-api-node-core.pluginhelpers-%3A-object"><a class="header-anchor" href="#bfx-api-node-core.pluginhelpers-%3A-object">§</a> bfx-api-node-core.PluginHelpers : <code>object</code></h3><p>An object passed to all plugin method handlers</p><p><strong>Kind</strong>: static typedef of <a href="#module_bfx-api-node-core"><code>bfx-api-node-core</code></a><br><strong>Properties</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>emit</td><td><code>function</code></td><td>emit a plugin event automatically including the plugin ID</td></tr><tr><td>getState</td><td><code>function</code></td><td>returns the current plugin state</td></tr></tbody></table><p><a id="module_bfx-api-node-core.Plugin"></a></p><h3 id="bfx-api-node-core.plugin-%3A-object"><a class="header-anchor" href="#bfx-api-node-core.plugin-%3A-object">§</a> bfx-api-node-core.Plugin : <code>object</code></h3><p>Plugin for a <a href="#module_bfx-api-node-core.Manager">Manager</a> instance.</p><p><strong>Kind</strong>: static typedef of <a href="#module_bfx-api-node-core"><code>bfx-api-node-core</code></a><br><strong>Properties</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>id</td><td><code>string</code></td><td></td><td>unique plugin ID</td></tr><tr><td>type</td><td><code>string</code></td><td></td><td>must be ‘ws2’</td></tr><tr><td>[initialState]</td><td><code>object</code></td><td><code>{}</code></td><td>initial plugin state</td></tr><tr><td>[manager]</td><td><code>object</code></td><td></td><td>high-level manager event handler object</td></tr><tr><td>[manager.“ws:created”]</td><td><code>function</code></td><td></td><td>called when a new socket is opened</td></tr><tr><td>[manager.“ws:destroyed”]</td><td><code>function</code></td><td></td><td>called when an existing socket is destroyed.</td></tr><tr><td>[ws]</td><td><code>object</code></td><td></td><td>socket-level event handler object</td></tr><tr><td>[ws.open]</td><td><code>function</code></td><td></td><td>called on socket open</td></tr><tr><td>[ws.message]</td><td><code>function</code></td><td></td><td>called when any message is received</td></tr><tr><td>[ws.error]</td><td><code>function</code></td><td></td><td>called on socket error</td></tr><tr><td>[ws.close]</td><td><code>function</code></td><td></td><td>called on socket close</td></tr><tr><td>[events]</td><td><code>object</code></td><td></td><td>high-level socket event handler object</td></tr><tr><td>[events.auth]</td><td><code>function</code></td><td></td><td>called on socket auth (success or failure)</td></tr><tr><td>[events.“auth:success”]</td><td><code>function</code></td><td></td><td>called on auth success</td></tr><tr><td>[events.“auth:error”]</td><td><code>function</code></td><td></td><td>called on auth failure</td></tr><tr><td>[events.subscribed]</td><td><code>function</code></td><td></td><td>called on channel subscription (confirmed)</td></tr><tr><td>[events.unsubscribed]</td><td><code>function</code></td><td></td><td>called on channel unsubscribe (confirmed)</td></tr><tr><td>[<a href="http://events.info">events.info</a>]</td><td><code>function</code></td><td></td><td>called when an info message is received</td></tr><tr><td>[events.config]</td><td><code>function</code></td><td></td><td>called on any config event</td></tr><tr><td>[events.error]</td><td><code>function</code></td><td></td><td>called on any error</td></tr><tr><td>[data]</td><td><code>object</code></td><td></td><td>data-related event handler object</td></tr><tr><td>[data.ticker]</td><td><code>function</code></td><td></td><td>called when ticker data is received</td></tr><tr><td>[data.trades]</td><td><code>function</code></td><td></td><td>called when trade data is received</td></tr><tr><td>[data.candles]</td><td><code>function</code></td><td></td><td>called when candle data is received</td></tr><tr><td>[data.book]</td><td><code>function</code></td><td></td><td>called when order book data is received</td></tr><tr><td>[auth]</td><td><code>object</code></td><td></td><td>auth-channel data event handler object</td></tr><tr><td>[auth.te]</td><td><code>function</code></td><td></td><td>called when a ‘te’ packet is received</td></tr><tr><td>[auth.tu]</td><td><code>function</code></td><td></td><td>called when a ‘tu’ packet is received</td></tr><tr><td>[auth.os]</td><td><code>function</code></td><td></td><td>called when an ‘os’ packet is received</td></tr><tr><td>[auth.ou]</td><td><code>function</code></td><td></td><td>called when an ‘ou’ packet is received</td></tr><tr><td>[auth.on]</td><td><code>function</code></td><td></td><td>called when an ‘on’ packet is received</td></tr><tr><td>[auth.oc]</td><td><code>function</code></td><td></td><td>called when an ‘oc’ packet is received</td></tr><tr><td>[<a href="http://auth.ps">auth.ps</a>]</td><td><code>function</code></td><td></td><td>called when an ‘ps’ packet is received</td></tr><tr><td>[auth.pu]</td><td><code>function</code></td><td></td><td>called when an ‘pu’ packet is received</td></tr><tr><td>[<a href="http://auth.pn">auth.pn</a>]</td><td><code>function</code></td><td></td><td>called when an ‘pn’ packet is received</td></tr><tr><td>[auth.pc]</td><td><code>function</code></td><td></td><td>called when an ‘pc’ packet is received</td></tr><tr><td>[auth.fos]</td><td><code>function</code></td><td></td><td>called when an ‘fos’ packet is received</td></tr><tr><td>[auth.fon]</td><td><code>function</code></td><td></td><td>called when an ‘fon’ packet is received</td></tr><tr><td>[auth.fou]</td><td><code>function</code></td><td></td><td>called when an ‘fou’ packet is received</td></tr><tr><td>[auth.foc]</td><td><code>function</code></td><td></td><td>called when an ‘foc’ packet is received</td></tr><tr><td>[auth.fcs]</td><td><code>function</code></td><td></td><td>called when an ‘fcs’ packet is received</td></tr><tr><td>[auth.fcn]</td><td><code>function</code></td><td></td><td>called when an ‘fcn’ packet is received</td></tr><tr><td>[auth.fcu]</td><td><code>function</code></td><td></td><td>called when an ‘fcu’ packet is received</td></tr><tr><td>[auth.fcc]</td><td><code>function</code></td><td></td><td>called when an ‘fcc’ packet is received</td></tr><tr><td>[auth.fls]</td><td><code>function</code></td><td></td><td>called when an ‘fls’ packet is received</td></tr><tr><td>[auth.fln]</td><td><code>function</code></td><td></td><td>called when an ‘fln’ packet is received</td></tr><tr><td>[auth.flu]</td><td><code>function</code></td><td></td><td>called when an ‘flu’ packet is received</td></tr><tr><td>[auth.flc]</td><td><code>function</code></td><td></td><td>called when an ‘flc’ packet is received</td></tr><tr><td>[<a href="http://auth.ws">auth.ws</a>]</td><td><code>function</code></td><td></td><td>called when an ‘ws’ packet is received</td></tr><tr><td>[auth.wu]</td><td><code>function</code></td><td></td><td>called when an ‘wu’ packet is received</td></tr><tr><td>[auth.bu]</td><td><code>function</code></td><td></td><td>called when an ‘bu’ packet is received</td></tr><tr><td>[auth.miu]</td><td><code>function</code></td><td></td><td>called when an ‘miu’ packet is received</td></tr><tr><td>[auth.fiu]</td><td><code>function</code></td><td></td><td>called when an ‘fiu’ packet is received</td></tr><tr><td>[auth.fte]</td><td><code>function</code></td><td></td><td>called when an ‘fte’ packet is received</td></tr><tr><td>[auth.ftu]</td><td><code>function</code></td><td></td><td>called when an ‘ftu’ packet is received</td></tr></tbody></table><p><a id="module_bfx-api-node-core.SocketState"></a></p><h3 id="bfx-api-node-core.socketstate-%3A-object"><a class="header-anchor" href="#bfx-api-node-core.socketstate-%3A-object">§</a> bfx-api-node-core.SocketState : <code>object</code></h3><p>A single Bitfinex WebSocket v2 API connection, and all associated state/data</p><p><strong>Kind</strong>: static typedef of <a href="#module_bfx-api-node-core"><code>bfx-api-node-core</code></a><br><strong>Properties</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>channels</td><td><code>object</code></td><td></td><td>key’ed by ID, values are subscription confirmations (includes channel filter data)</td></tr><tr><td>pendingSubscriptions</td><td><code>Array.&lt;Array&gt;</code></td><td></td><td>array with elements of the form <code>[channelType, payload]</code> i.e. <code>['trades', { symbol: 'tBTCUSD&quot; ]]</code>, referring to channels that have been subscribed too but no confirmation packet has yet been received.</td></tr><tr><td>pendingUnsubscriptions</td><td><code>Array.&lt;Array&gt;</code></td><td></td><td>array of the same format as <code>pendingSubscriptions</code>, but refers to channels which have been unsubscribed from but no confirmation packet has yet been received.</td></tr><tr><td>plugins</td><td><code>object</code></td><td></td><td><a href="#module_bfx-api-node-core.Plugin">Plugin</a> objects key’ed by ID</td></tr><tr><td>id</td><td><code>number</code></td><td></td><td>unique socket identifier</td></tr><tr><td>isOpen</td><td><code>boolean</code></td><td></td><td>indicates if the connection is open</td></tr><tr><td>sendBuffer</td><td><code>Array.&lt;Array&gt;</code></td><td></td><td>array of packets to be sent once the connection is established; used to buffer packets sent prior to connect.</td></tr><tr><td>[apiKey]</td><td><code>string</code></td><td></td><td>api key</td></tr><tr><td>[apiSecret]</td><td><code>string</code></td><td></td><td>api secret</td></tr><tr><td>[transform]</td><td><code>boolean</code></td><td><code>false</code></td><td>enables automatic transformation of incoming data to models from <a href="module:bfx-api-node-models">bfx-api-node-models</a></td></tr><tr><td>[agent]</td><td><code>function</code></td><td></td><td>connection agent</td></tr><tr><td>ev</td><td><code>EventEmitter</code></td><td></td><td>socket event emitter</td></tr><tr><td>emit</td><td><code>function</code></td><td></td><td>wrapper around <code>ev.emit</code> inside a <code>setTimeout(..., 0)</code> call</td></tr><tr><td>ws</td><td><code>WebSocket</code></td><td></td><td>actual websocket client object</td></tr></tbody></table><p><a id="module_bfx-api-node-core.Manager"></a></p><h3 id="bfx-api-node-core~manager-%E2%87%90-eventemitter"><a class="header-anchor" href="#bfx-api-node-core~manager-%E2%87%90-eventemitter">§</a> bfx-api-node-core~Manager ⇐ <code>EventEmitter</code></h3><p>WSv2 connection pool manager. Limits active channel subscriptions per socket, opening new sockets/closing existing one as needed.</p><p><strong>Kind</strong>: inner class of <a href="#module_bfx-api-node-core"><code>bfx-api-node-core</code></a><br><strong>Extends</strong>: <code>EventEmitter</code></p><ul><li><a href="#module_bfx-api-node-core.Manager">~Manager</a> ⇐ <code>EventEmitter</code><ul><li><a href="#new_module_bfx-api-node-core.Manager_new">new Manager([args])</a></li><li><a href="#module_bfx-api-node-core.Manager+updateAuthArgs">.updateAuthArgs(args)</a></li><li><a href="#module_bfx-api-node-core.Manager+hasPlugin">.hasPlugin(plugin)</a> ⇒ <code>boolean</code></li><li><a href="#module_bfx-api-node-core.Manager+addPlugin">.addPlugin(plugin)</a></li><li><a href="#module_bfx-api-node-core.Manager+auth">.auth([args])</a></li><li><a href="#module_bfx-api-node-core.Manager+getWS">.getWS(id)</a> ⇒ <a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></li><li><a href="#module_bfx-api-node-core.Manager+getWSIndex">.getWSIndex(id)</a> ⇒ <code>number</code></li><li><a href="#module_bfx-api-node-core.Manager+getWSByIndex">.getWSByIndex(index)</a> ⇒ <a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></li><li><a href="#module_bfx-api-node-core.Manager+updateWS">.updateWS(id, state)</a></li><li><a href="#module_bfx-api-node-core.Manager+closeAllSockets">.closeAllSockets()</a></li><li><a href="#module_bfx-api-node-core.Manager+reconnectAllSockets">.reconnectAllSockets()</a></li><li><a href="#module_bfx-api-node-core.Manager+closeWS">.closeWS(id)</a></li><li><a href="#module_bfx-api-node-core.Manager+openWS">.openWS()</a> ⇒ <a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></li><li><a href="#module_bfx-api-node-core.Manager+onWS">.onWS(eventName, filterValue, cb)</a></li><li><a href="#module_bfx-api-node-core.Manager+onceWS">.onceWS(eventName, filterValue, cb)</a></li><li><a href="#module_bfx-api-node-core.Manager+notifyPlugins">.notifyPlugins(type, section, name, args)</a></li><li><a href="#module_bfx-api-node-core.Manager+notifyPlugin">.notifyPlugin(plugin, section, name, args)</a></li><li><a href="#module_bfx-api-node-core.Manager+withFreeDataSocket">.withFreeDataSocket(cb)</a></li><li><a href="#module_bfx-api-node-core.Manager+withDataSocket">.withDataSocket(filterCB, cb)</a></li><li><a href="#module_bfx-api-node-core.Manager+withAuthSocket">.withAuthSocket(cb)</a></li><li><a href="#module_bfx-api-node-core.Manager+withSocket">.withSocket(cb)</a></li><li><a href="#module_bfx-api-node-core.Manager+sampleWS">.sampleWS()</a> ⇒ <a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></li><li><a href="#module_bfx-api-node-core.Manager+sampleWSI">.sampleWSI()</a> ⇒ <code>number</code></li><li><a href="#module_bfx-api-node-core.Manager+applyWS">.applyWS(i, cb)</a></li></ul></li></ul><p><a id="new_module_bfx-api-node-core.Manager_new"></a></p><h4 id="new-manager(%5Bargs%5D)"><a class="header-anchor" href="#new-manager(%5Bargs%5D)">§</a> new Manager([args])</h4><table><thead><tr><th>Param</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>[args]</td><td><code>object</code></td><td><code>{}</code></td><td>arguments</td></tr><tr><td>[args.wsURL]</td><td><code>string</code></td><td><code>&quot;'wss://api.bitfinex.com/ws/2'&quot;</code></td><td>defaults to production Bitfinex WSv2 API url</td></tr><tr><td>[args.restURL]</td><td><code>string</code></td><td><code>&quot;'<a href="https://api.bitfinex.com">https://api.bitfinex.com</a>'&quot;</code></td><td>defaults to production Bitfinex RESTv2 API url</td></tr><tr><td>[args.agent]</td><td><code>object</code></td><td></td><td>connection agent</td></tr><tr><td>[args.apiKey]</td><td><code>string</code></td><td></td><td>used to authenticate sockets</td></tr><tr><td>[args.apiSecret]</td><td><code>string</code></td><td></td><td>used to authenticate sockets</td></tr><tr><td>[args.autoResubscribe]</td><td><code>boolean</code></td><td><code>true</code></td><td>enables automatic subscribing to previously subscribed channels on reconnect</td></tr><tr><td>[args.channelsPerSocket]</td><td><code>number</code></td><td><code>30</code></td><td>max data channel subscriptions per WSv2 client</td></tr><tr><td>[args.dms]</td><td><code>number</code></td><td><code>0</code></td><td>dead-man-switch flag sent on auth, active 4</td></tr><tr><td>[args.calc]</td><td><code>number</code></td><td><code>0</code></td><td>calc</td></tr><tr><td>[args.transform]</td><td><code>boolean</code></td><td></td><td>if true, raw API data arrays will be automatically converted to bfx-api-node-models instances</td></tr><tr><td>[args.plugins]</td><td><code>object</code></td><td></td><td>optional set of plugins to use</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js"><span class="hljs-keyword">const</span> debug = <span class="hljs-built_in">require</span>(<span class="hljs-string">'debug'</span>)(<span class="hljs-string">'example'</span>)
<span class="hljs-keyword">const</span> { subscribe, Manager } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'bfx-api-node-core'</span>)
<span class="hljs-keyword">const</span> SYMBOL = <span class="hljs-string">'tBTCUSD'</span>

debug(<span class="hljs-string">'opening connection...'</span>)

<span class="hljs-keyword">const</span> m = <span class="hljs-keyword">new</span> Manager({ <span class="hljs-attr">transform</span>: <span class="hljs-literal">true</span> })
<span class="hljs-keyword">const</span> wsState = m.openWS()

m.on(<span class="hljs-string">'ws2:open'</span>, () =&gt; debug(<span class="hljs-string">'connection opened'</span>))
m.on(<span class="hljs-string">'ws2:close'</span>, () =&gt; debug(<span class="hljs-string">'connection closed'</span>))
m.on(<span class="hljs-string">'ws2:trades'</span>, (trades, meta) =&gt; {
  <span class="hljs-keyword">const</span> { chanFilter } = meta
  <span class="hljs-keyword">const</span> { symbol, pair } = chanFilter
  <span class="hljs-keyword">const</span> [trade] = trades
  <span class="hljs-keyword">const</span> nTrades = trades.length

  debug(<span class="hljs-string">'recv %d trades on for symbol %s [pair %s]'</span>, nTrades, symbol, pair)
  debug(
    <span class="hljs-string">'latest trade: id %s, price %d, amount %d, mts: %s'</span>,
    trade.id, trade.price, trade.amount, <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(trade.mts).toLocaleString()
  )
})

debug(<span class="hljs-string">'subscribing to trades channel %s'</span>, SYMBOL)

subscribe(wsState, <span class="hljs-string">'trades'</span>, { <span class="hljs-attr">symbol</span>: SYMBOL })
</code></pre><p><a id="module_bfx-api-node-core.Manager+updateAuthArgs"></a></p><h4 id="manager.updateauthargs(args)"><a class="header-anchor" href="#manager.updateauthargs(args)">§</a> manager.updateAuthArgs(args)</h4><p>Update authentication arguments used for all connections on auth. Provided args are merged with existing ones.</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-api-node-core.Manager"><code>Manager</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>args</td><td><a href="#module_bfx-api-node-core.AuthArgs"><code>AuthArgs</code></a></td><td>args</td></tr></tbody></table><p><a id="module_bfx-api-node-core.Manager+hasPlugin"></a></p><h4 id="manager.hasplugin(plugin)-%E2%87%92-boolean"><a class="header-anchor" href="#manager.hasplugin(plugin)-%E2%87%92-boolean">§</a> manager.hasPlugin(plugin) ⇒ <code>boolean</code></h4><p>Check for plugin existence by ID</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-api-node-core.Manager"><code>Manager</code></a><br><strong>Returns</strong>: <code>boolean</code> - hasPlugin</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>plugin</td><td><a href="#module_bfx-api-node-core.Plugin"><code>Plugin</code></a></td><td>plugin</td></tr></tbody></table><p><a id="module_bfx-api-node-core.Manager+addPlugin"></a></p><h4 id="manager.addplugin(plugin)"><a class="header-anchor" href="#manager.addplugin(plugin)">§</a> manager.addPlugin(plugin)</h4><p>No-op if the plugin is already registered</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-api-node-core.Manager"><code>Manager</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>plugin</td><td><a href="#module_bfx-api-node-core.Plugin"><code>Plugin</code></a></td><td>plugin</td></tr></tbody></table><p><a id="module_bfx-api-node-core.Manager+auth"></a></p><h4 id="manager.auth(%5Bargs%5D)"><a class="header-anchor" href="#manager.auth(%5Bargs%5D)">§</a> manager.auth([args])</h4><p>Authenticates all open API connections, and updates auth arguments used for future connections with those provided.</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-api-node-core.Manager"><code>Manager</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>[args]</td><td><a href="#module_bfx-api-node-core.FullAuthArgs"><code>FullAuthArgs</code></a></td><td>defaults to values provided to constructor</td></tr></tbody></table><p><a id="module_bfx-api-node-core.Manager+getWS"></a></p><h4 id="manager.getws(id)-%E2%87%92-socketstate"><a class="header-anchor" href="#manager.getws(id)-%E2%87%92-socketstate">§</a> manager.getWS(id) ⇒ <a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></h4><p>Returns a connection state object by ID</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-api-node-core.Manager"><code>Manager</code></a><br><strong>Returns</strong>: <a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a> - state - connection state</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>id</td><td><code>number</code></td><td>connection ID</td></tr></tbody></table><p><a id="module_bfx-api-node-core.Manager+getWSIndex"></a></p><h4 id="manager.getwsindex(id)-%E2%87%92-number"><a class="header-anchor" href="#manager.getwsindex(id)-%E2%87%92-number">§</a> manager.getWSIndex(id) ⇒ <code>number</code></h4><p>Returns the index of a connection within the internal pool by ID</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-api-node-core.Manager"><code>Manager</code></a><br><strong>Returns</strong>: <code>number</code> - index - within internal pool</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>id</td><td><code>number</code></td><td>connection ID</td></tr></tbody></table><p><a id="module_bfx-api-node-core.Manager+getWSByIndex"></a></p><h4 id="manager.getwsbyindex(index)-%E2%87%92-socketstate"><a class="header-anchor" href="#manager.getwsbyindex(index)-%E2%87%92-socketstate">§</a> manager.getWSByIndex(index) ⇒ <a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></h4><p>Returns a connection state object by pool index</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-api-node-core.Manager"><code>Manager</code></a><br><strong>Returns</strong>: <a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a> - state - connection state</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>index</td><td><code>number</code></td><td>within internal pool</td></tr></tbody></table><p><a id="module_bfx-api-node-core.Manager+updateWS"></a></p><h4 id="manager.updatews(id%2C-state)"><a class="header-anchor" href="#manager.updatews(id%2C-state)">§</a> manager.updateWS(id, state)</h4><p>Updates an internal connection by ID, emitting the socket:updated event if the connection exists.</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-api-node-core.Manager"><code>Manager</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>id</td><td><code>number</code></td><td>id</td></tr><tr><td>state</td><td><a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></td><td>new connection state</td></tr></tbody></table><p><a id="module_bfx-api-node-core.Manager+closeAllSockets"></a></p><h4 id="manager.closeallsockets()"><a class="header-anchor" href="#manager.closeallsockets()">§</a> manager.closeAllSockets()</h4><p>Closes all connections in the pool</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-api-node-core.Manager"><code>Manager</code></a><br><a id="module_bfx-api-node-core.Manager+reconnectAllSockets"></a></p><h4 id="manager.reconnectallsockets()"><a class="header-anchor" href="#manager.reconnectallsockets()">§</a> manager.reconnectAllSockets()</h4><p>Closes and re-opens all connections in the pool</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-api-node-core.Manager"><code>Manager</code></a><br><a id="module_bfx-api-node-core.Manager+closeWS"></a></p><h4 id="manager.closews(id)"><a class="header-anchor" href="#manager.closews(id)">§</a> manager.closeWS(id)</h4><p>Closes a connection by ID, no-op if the connection is not found.</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-api-node-core.Manager"><code>Manager</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>id</td><td><code>number</code></td><td>id</td></tr></tbody></table><p><a id="module_bfx-api-node-core.Manager+openWS"></a></p><h4 id="manager.openws()-%E2%87%92-socketstate"><a class="header-anchor" href="#manager.openws()-%E2%87%92-socketstate">§</a> manager.openWS() ⇒ <a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></h4><p>Creates &amp; opens a new WSv2 connection, adds it to the pool, and returns it</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-api-node-core.Manager"><code>Manager</code></a><br><strong>Returns</strong>: <a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a> - connection<br><a id="module_bfx-api-node-core.Manager+onWS"></a></p><h4 id="manager.onws(eventname%2C-filtervalue%2C-cb)"><a class="header-anchor" href="#manager.onws(eventname%2C-filtervalue%2C-cb)">§</a> manager.onWS(eventName, filterValue, cb)</h4><p>Creates an event handler that updates the relevant internal socket state object.</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-api-node-core.Manager"><code>Manager</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>eventName</td><td><code>string</code></td><td>event name</td></tr><tr><td>filterValue</td><td><code>object</code></td><td>value(s) to check for</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bfx-api-node-core.Manager+onceWS"></a></p><h4 id="manager.oncews(eventname%2C-filtervalue%2C-cb)"><a class="header-anchor" href="#manager.oncews(eventname%2C-filtervalue%2C-cb)">§</a> manager.onceWS(eventName, filterValue, cb)</h4><p>Creates an event handler that updates the relevant internal socket state object, and only fires once</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-api-node-core.Manager"><code>Manager</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>eventName</td><td><code>string</code></td><td>event name</td></tr><tr><td>filterValue</td><td><code>object</code></td><td>value(s) to check for</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bfx-api-node-core.Manager+notifyPlugins"></a></p><h4 id="manager.notifyplugins(type%2C-section%2C-name%2C-args)"><a class="header-anchor" href="#manager.notifyplugins(type%2C-section%2C-name%2C-args)">§</a> manager.notifyPlugins(type, section, name, args)</h4><p>Calls every matching plugin with the provided arguments, and updates the relevant ws/rest state objects internally.</p><p>State objects are only updated if plugin handlers return valid objects</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-api-node-core.Manager"><code>Manager</code></a><br><strong>See</strong>: module:bfx-api-node-core.Manager#notifyPlugin</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>type</td><td><code>string</code></td><td>ws2 or rest2</td></tr><tr><td>section</td><td><code>string</code></td><td>event section</td></tr><tr><td>name</td><td><code>string</code></td><td>event name</td></tr><tr><td>args</td><td><code>object</code></td><td>plugin handler arguments</td></tr></tbody></table><p><a id="module_bfx-api-node-core.Manager+notifyPlugin"></a></p><h4 id="manager.notifyplugin(plugin%2C-section%2C-name%2C-args)"><a class="header-anchor" href="#manager.notifyplugin(plugin%2C-section%2C-name%2C-args)">§</a> manager.notifyPlugin(plugin, section, name, args)</h4><p>Calls the identified plugin with the provided arguments, and updates the relevant ws/rest state objects internally.</p><p>State objects are only updated if plugin handlers return valid objects</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-api-node-core.Manager"><code>Manager</code></a><br><strong>See</strong>: module:bfx-api-node-core.Manager#notifyPlugins</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>plugin</td><td><code>object</code></td><td>plugin identifier</td></tr><tr><td><a href="http://plugin.id">plugin.id</a></td><td><code>string</code></td><td>plugin ID</td></tr><tr><td>plugin.type</td><td><code>string</code></td><td>plugin type</td></tr><tr><td>section</td><td><code>string</code></td><td>event section</td></tr><tr><td>name</td><td><code>string</code></td><td>event name</td></tr><tr><td>args</td><td><code>object</code></td><td>plugin handler arguments</td></tr></tbody></table><p><a id="module_bfx-api-node-core.Manager+withFreeDataSocket"></a></p><h4 id="manager.withfreedatasocket(cb)"><a class="header-anchor" href="#manager.withfreedatasocket(cb)">§</a> manager.withFreeDataSocket(cb)</h4><p>Calls the provided function with a connection instance that can subscribe to at least 1 more data channel. If no such connection is found, a new one is opened.</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-api-node-core.Manager"><code>Manager</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bfx-api-node-core.Manager+withDataSocket"></a></p><h4 id="manager.withdatasocket(filtercb%2C-cb)"><a class="header-anchor" href="#manager.withdatasocket(filtercb%2C-cb)">§</a> manager.withDataSocket(filterCB, cb)</h4><p>Calls the provided function with a connection instance that is subscribed to a channel matching the provided filter callback, which is called with each subscribed channel descriptor.</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-api-node-core.Manager"><code>Manager</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>filterCB</td><td><code>function</code></td><td>filter callback, called with each channel on each socket to find the desired data channel.</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback, called with identified socket. Not called if <code>filterCB</code> fails to identify a valid socket.</td></tr></tbody></table><p><a id="module_bfx-api-node-core.Manager+withAuthSocket"></a></p><h4 id="manager.withauthsocket(cb)"><a class="header-anchor" href="#manager.withauthsocket(cb)">§</a> manager.withAuthSocket(cb)</h4><p>Calls the provided function with an authenticated socket instance; updates the socket state with the returned result.</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-api-node-core.Manager"><code>Manager</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bfx-api-node-core.Manager+withSocket"></a></p><h4 id="manager.withsocket(cb)"><a class="header-anchor" href="#manager.withsocket(cb)">§</a> manager.withSocket(cb)</h4><p>Calls the provided function with a random open connection instance. If none exists, this is a no-op.</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-api-node-core.Manager"><code>Manager</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bfx-api-node-core.Manager+sampleWS"></a></p><h4 id="manager.samplews()-%E2%87%92-socketstate"><a class="header-anchor" href="#manager.samplews()-%E2%87%92-socketstate">§</a> manager.sampleWS() ⇒ <a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a></h4><p>Returns a random connection from the pool</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-api-node-core.Manager"><code>Manager</code></a><br><strong>Returns</strong>: <a href="#module_bfx-api-node-core.SocketState"><code>SocketState</code></a> - state<br><a id="module_bfx-api-node-core.Manager+sampleWSI"></a></p><h4 id="manager.samplewsi()-%E2%87%92-number"><a class="header-anchor" href="#manager.samplewsi()-%E2%87%92-number">§</a> manager.sampleWSI() ⇒ <code>number</code></h4><p>Returns a random connection index from the pool</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-api-node-core.Manager"><code>Manager</code></a><br><strong>Returns</strong>: <code>number</code> - index<br><a id="module_bfx-api-node-core.Manager+applyWS"></a></p><h4 id="manager.applyws(i%2C-cb)"><a class="header-anchor" href="#manager.applyws(i%2C-cb)">§</a> manager.applyWS(i, cb)</h4><p>Calls the provided callback with the connection at the specified pool index, and saves the return value as the new connection instance.</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-api-node-core.Manager"><code>Manager</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>i</td><td><code>number</code></td><td>socket index</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table></div></div><!--
      <div id="bfx-oss-docs-footer-bar">
        <div id="bfx-oss-docs-footer-bar__container">
          <p>Copyright © 2013-2020 iFinex Inc. All rights reserved.</p>
        </div>
      </div>
      --></div><script type="text/javascript" src="js/vendor/debug.min.js"></script><script type="text/javascript" src="js/vendor/lodash.min.js"></script><script type="text/javascript" src="js/vendor/zepto.min.js"></script><script type="text/javascript" src="js/vendor/perfect-scrollbar.min.js"></script><script type="text/javascript" src="js/main.js"></script></body></html>