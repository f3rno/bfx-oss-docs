<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width,initial-scale=1"><meta charset="utf-8"><link rel="stylesheet" type="text/css" href="css/normalize.css"><link rel="stylesheet" type="text/css" href="css/perfect-scrollbar.css"><link rel="stylesheet" type="text/css" href="css/highlightjs/night-owl.css"><link rel="stylesheet" type="text/css" href="index.css"><title>API Reference | bfx-api-mock-srv</title></head><body><div id="bfx-oss-docs-side-bar"><div id="bfx-oss-docs-side-bar__header"><img src="img/bfx-logo-bg-white.png" alt="Bitfinex" height="63"></div><ul><li><a href="index.html"><p>Home</p></a></li><li><a href="page_md_render_test.html"><p>Markdown Render Test</p></a></li><li><a href="page_libraries_bitfinex_api_py_README.html"><img src="svg/icons/python.svg"><p>bitfinex-api-py</p></a></li><li><a href="page_libraries_bitfinex_api_go_README.html"><img src="svg/icons/go.svg"><p>bitfinex-api-go</p></a></li><li><a href="page_libraries_bfxfixgw_README.html"><img src="svg/icons/go.svg"><p>bfxfixgw</p></a></li><li><a href="page_libraries_bitfinex_api_rb_README.html"><img src="svg/icons/ruby.svg"><p>bitfinex-api-rb</p></a></li><li><a href="page_libraries_bitfinex_api_node_README.html"><img src="svg/icons/nodejs_small.svg"><p>bitfinex-api-node</p></a></li><li class="active"><a href="page_libraries_bfx_api_mock_srv_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-mock-srv</p></a><ul><li><a href="page_libraries_bfx_api_mock_srv_README.html"><p>- README</p></a></li><li class="active"><a href="page_libraries_bfx_api_mock_srv_reference.html"><p>- API Reference</p></a></li></ul></li><li><a href="page_libraries_bfx_api_node_core_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-core</p></a></li><li><a href="page_libraries_bfx_api_node_models_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-models</p></a></li><li><a href="page_libraries_bfx_api_node_plugin_example_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-example</p></a></li><li><a href="page_libraries_bfx_api_node_plugin_managed_candles_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-managed-candles</p></a></li><li><a href="page_libraries_bfx_api_node_plugin_managed_ob_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-managed-ob</p></a></li><li><a href="page_libraries_bfx_api_node_plugin_ob_checksum_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-ob-checksum</p></a></li><li><a href="page_libraries_bfx_api_node_plugin_seq_audit_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-seq-audit</p></a></li><li><a href="page_libraries_bfx_api_node_plugin_wd_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-wd</p></a></li><li><a href="page_libraries_bfx_api_node_rest_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-rest</p></a></li><li><a href="page_libraries_bfx_api_node_util_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-util</p></a></li><li><a href="page_libraries_bfx_api_node_ws1_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-ws1</p></a></li><li><a href="page_libraries_bfx_hf_backtest_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-backtest</p></a></li><li><a href="page_libraries_bfx_hf_chart_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-chart</p></a></li><li><a href="page_libraries_bfx_hf_data_server_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-data-server</p></a></li><li><a href="page_libraries_bfx_hf_ext_plugin_bitfinex_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-ext-plugin-bitfinex</p></a></li><li><a href="page_libraries_bfx_hf_ext_plugin_dummy_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-ext-plugin-dummy</p></a></li><li><a href="page_libraries_bfx_hf_indicators_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-indicators</p></a></li><li><a href="page_libraries_bfx_hf_models_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-models</p></a></li><li><a href="page_libraries_bfx_hf_models_adapter_lowdb_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-models-adapter-lowdb</p></a></li><li><a href="page_libraries_bfx_hf_models_adapter_sql_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-models-adapter-sql</p></a></li><li><a href="page_libraries_bfx_hf_models_adapter_template_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-models-adapter-template</p></a></li><li><a href="page_libraries_bfx_hf_algo_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-algo</p></a></li><li><a href="page_libraries_bfx_hf_server_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-server</p></a></li><li><a href="page_libraries_bfx_hf_strategy_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-strategy</p></a></li><li><a href="page_libraries_bfx_hf_strategy_exec_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-strategy-exec</p></a></li><li><a href="page_libraries_bfx_hf_ui_config_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-ui-config</p></a></li><li><a href="page_libraries_bfx_hf_util_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-util</p></a></li><li><a href="page_libraries_bfx_ws2_api_audit_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-ws2-api-audit</p></a></li><li><a href="page_libraries_cbq_js_README.html"><img src="svg/icons/nodejs_small.svg"><p>cbq-js</p></a></li><li><a href="page_libraries_caron_README.html"><img src="svg/icons/nodejs_small.svg"><p>caron</p></a></li><li><a href="page_libraries_eos_name_verify_README.html"><img src="svg/icons/nodejs_small.svg"><p>eos-name-verify</p></a></li><li><a href="page_libraries_grenache_browser_http_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-browser-http</p></a></li><li><a href="page_libraries_grenache_grape_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-grape</p></a></li><li><a href="page_libraries_grenache_nodejs_base_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-nodejs-base</p></a></li><li><a href="page_libraries_grenache_nodejs_http_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-nodejs-http</p></a></li><li><a href="page_libraries_grenache_nodejs_link_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-nodejs-link</p></a></li><li><a href="page_libraries_grenache_nodejs_utp_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-nodejs-utp</p></a></li><li><a href="page_libraries_grenache_nodejs_ws_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-nodejs-ws</p></a></li><li><a href="page_libraries_grenache_nodejs_ws_tls_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-nodejs-ws-tls</p></a></li><li><a href="page_libraries_lib_js_util_currencies_README.html"><img src="svg/icons/nodejs_small.svg"><p>lib-js-util-currencies</p></a></li><li><a href="page_libraries_lib_js_util_math_README.html"><img src="svg/icons/nodejs_small.svg"><p>lib-js-util-math</p></a></li><li><a href="page_libraries_lib_js_util_number_README.html"><img src="svg/icons/nodejs_small.svg"><p>lib-js-util-number</p></a></li><li><a href="page_libraries_lib_js_util_symbol_README.html"><img src="svg/icons/nodejs_small.svg"><p>lib-js-util-symbol</p></a></li><li><a href="page_libraries_smidgen_README.html"><img src="svg/icons/nodejs_small.svg"><p>smidgen</p></a></li><li><a href="page_libraries_sunbeam_README.html"><img src="svg/icons/nodejs_small.svg"><p>sunbeam</p></a></li><li><a href="page_libraries_wasteland_README.html"><img src="svg/icons/nodejs_small.svg"><p>wasteland</p></a></li></ul></div><div id="bfx-oss-docs-content"><div id="bfx-oss-docs-header-bar"><h2>API Reference</h2><h2>bfx-api-mock-srv</h2></div><div id="bfx-oss-docs-content-wrapper" class="bfx-oss-docs-content-type-api-docs"><div class="bfx-oss-docs-md-content bfx-oss-docs-code-wrapper"><div id="bfx-oss-docs-api-docs-index"><div id="bfx-oss-docs-api-docs-index__inner"><ul><li><a href="#Server">Server</a><ul><li><a href="#new_Server_new">new Server(args, dataPath)</a></li><li><a href="#Server+listen">.listen()</a></li><li><a href="#Server+close">.close()</a> ⇒ <code>Promise</code></li><li><a href="#Server+getResponse">.getResponse(key)</a> ⇒ <code>string</code></li><li><a href="#Server+setResponse">.setResponse(key, data)</a></li></ul></li><li><a href="#REST2Server">REST2Server</a><ul><li><a href="#new_REST2Server_new">new REST2Server(args)</a></li><li><a href="#REST2Server+listen">.listen()</a></li><li><a href="#REST2Server+close">.close()</a> ⇒ <code>Promise</code></li></ul></li><li><a href="#WS2Server">WS2Server</a><ul><li><a href="#new_WS2Server_new">new WS2Server(args)</a></li><li><a href="#WS2Server+isOpen">.isOpen()</a> ⇒ <code>boolean</code></li><li><a href="#WS2Server+listen">.listen()</a></li><li><a href="#WS2Server+close">.close()</a> ⇒ <code>Promise</code></li><li><a href="#WS2Server+once">.once(eventName, cb)</a></li><li><a href="#WS2Server+send">.send(packet)</a></li></ul></li></ul></div></div><p><a id="Server"></a></p><h2 id="server"><a class="header-anchor" href="#server">§</a> Server</h2><p>Mock server base class, listens for commands to get/set responses</p><p><strong>Kind</strong>: global class<br><a id="new_Server_new"></a></p><h3 id="new-server(args%2C-datapath)"><a class="header-anchor" href="#new-server(args%2C-datapath)">§</a> new Server(args, dataPath)</h3><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>args</td><td><code>Object</code></td><td></td></tr><tr><td>args.cmdPort</td><td><code>number</code></td><td>port to listen on for HTTP command API</td></tr><tr><td>dataPath</td><td><code>string</code></td><td>path to JSON file with responses</td></tr></tbody></table><p><a id="Server+listen"></a></p><h3 id="server.listen()"><a class="header-anchor" href="#server.listen()">§</a> server.listen()</h3><p>Starts the HTTP command server listening on the configured port. This is a no-op if the server is already up.</p><p><strong>Kind</strong>: instance method of <a href="#Server"><code>Server</code></a><br><a id="Server+close"></a></p><h3 id="server.close()-%E2%87%92-promise"><a class="header-anchor" href="#server.close()-%E2%87%92-promise">§</a> server.close() ⇒ <code>Promise</code></h3><p>Closes the command server if it is running, no-op if not.</p><p><strong>Kind</strong>: instance method of <a href="#Server"><code>Server</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves upon completion<br><a id="Server+getResponse"></a></p><h3 id="server.getresponse(key)-%E2%87%92-string"><a class="header-anchor" href="#server.getresponse(key)-%E2%87%92-string">§</a> server.getResponse(key) ⇒ <code>string</code></h3><p>Returns the configured server response for the given key</p><p><strong>Kind</strong>: instance method of <a href="#Server"><code>Server</code></a><br><strong>Returns</strong>: <code>string</code> - response - JSON</p><table><thead><tr><th>Param</th><th>Type</th></tr></thead><tbody><tr><td>key</td><td><code>string</code></td></tr></tbody></table><p><a id="Server+setResponse"></a></p><h3 id="server.setresponse(key%2C-data)"><a class="header-anchor" href="#server.setresponse(key%2C-data)">§</a> server.setResponse(key, data)</h3><p>Sets the provided data as the server response for the given key. Note that the data is converted to JSON.</p><p><strong>Kind</strong>: instance method of <a href="#Server"><code>Server</code></a></p><table><thead><tr><th>Param</th><th>Type</th></tr></thead><tbody><tr><td>key</td><td><code>string</code></td></tr><tr><td>data</td><td><code>*</code></td></tr></tbody></table><p><a id="REST2Server"></a></p><h2 id="rest2server"><a class="header-anchor" href="#rest2server">§</a> REST2Server</h2><p>REST v2 API server mock</p><p>Exposes the same routes as the real API, and maps them to a response table. Multiple potential responses can be defined for endpoints with arguments, with the best match sent to clients on request.</p><p>i.e. If the following responses are configured: orders.tBTCUSD: [42], orders: [41] A GET on /v2/auth/r/orders/tBTCUSD/hist would return [42], but a query for a different symbol (tETHUSD) would return [41].</p><p><strong>Kind</strong>: global class<br><a id="new_REST2Server_new"></a></p><h3 id="new-rest2server(args)"><a class="header-anchor" href="#new-rest2server(args)">§</a> new REST2Server(args)</h3><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>args</td><td><code>Object</code></td><td></td></tr><tr><td>args.apiPort</td><td><code>number</code></td><td></td></tr><tr><td>args.cmdPort</td><td><code>number</code></td><td></td></tr><tr><td>args.listen</td><td><code>boolean</code></td><td>if true, listen() is called automatically</td></tr></tbody></table><p><a id="REST2Server+listen"></a></p><h3 id="rest2server.listen()"><a class="header-anchor" href="#rest2server.listen()">§</a> resT2Server.listen()</h3><p>Starts the API server listening on the configured port. This is a no-op if the server is already up</p><p><strong>Kind</strong>: instance method of <a href="#REST2Server"><code>REST2Server</code></a><br><a id="REST2Server+close"></a></p><h3 id="rest2server.close()-%E2%87%92-promise"><a class="header-anchor" href="#rest2server.close()-%E2%87%92-promise">§</a> resT2Server.close() ⇒ <code>Promise</code></h3><p>Closes the API server if it is running; This is a no-op if it is not.</p><p><strong>Kind</strong>: instance method of <a href="#REST2Server"><code>REST2Server</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves/rejects on success/error<br><a id="WS2Server"></a></p><h2 id="ws2server"><a class="header-anchor" href="#ws2server">§</a> WS2Server</h2><p>Acts as a mock for v2 of the Bitfinex websocket API. Responses to available commands are loaded from data/ws2.json and can be modified at runtime. The command API allows for arbitrary packets to be injected into the ws stream.</p><p>If <code>syncOnConnect</code> is true, clients receive snapshots when connecting</p><p>Responses are of the form [{ packets: […] }], where mulitple packets are sent in order. A packet can be a string referencing another response by key.</p><p><strong>Kind</strong>: global class<br><strong>See</strong>: ws2.json<br><a id="new_WS2Server_new"></a></p><h3 id="new-ws2server(args)"><a class="header-anchor" href="#new-ws2server(args)">§</a> new WS2Server(args)</h3><p>Spawns a new mock WS2 API server. Supported commands: POST /send - body is parsed as JSON and sent to all clients POST /config - body is parsed as JSON, and valid config keys are saved</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>args</td><td><code>Object</code></td><td></td></tr><tr><td>args.apiPort</td><td><code>number</code></td><td>which port to listen on for ws clients</td></tr><tr><td>args.cmdPort</td><td><code>number</code></td><td>which port to listen on for commands</td></tr><tr><td>args.syncOnConnect</td><td><code>boolean</code></td><td>send snapshots to clients on connect</td></tr><tr><td>args.listen</td><td><code>boolean</code></td><td>if true, listen() is called automatically</td></tr></tbody></table><p><a id="WS2Server+isOpen"></a></p><h3 id="ws2server.isopen()-%E2%87%92-boolean"><a class="header-anchor" href="#ws2server.isopen()-%E2%87%92-boolean">§</a> wS2Server.isOpen() ⇒ <code>boolean</code></h3><p>Returns server active status</p><p><strong>Kind</strong>: instance method of <a href="#WS2Server"><code>WS2Server</code></a><br><strong>Returns</strong>: <code>boolean</code> - open<br><a id="WS2Server+listen"></a></p><h3 id="ws2server.listen()"><a class="header-anchor" href="#ws2server.listen()">§</a> wS2Server.listen()</h3><p>Starts the API server listening on the configured port. This is a no-op if the server is already up</p><p><strong>Kind</strong>: instance method of <a href="#WS2Server"><code>WS2Server</code></a><br><a id="WS2Server+close"></a></p><h3 id="ws2server.close()-%E2%87%92-promise"><a class="header-anchor" href="#ws2server.close()-%E2%87%92-promise">§</a> wS2Server.close() ⇒ <code>Promise</code></h3><p>Closes the API server if it is running; This is a no-op if it is not.</p><p><strong>Kind</strong>: instance method of <a href="#WS2Server"><code>WS2Server</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves/rejects on success/error<br><a id="WS2Server+once"></a></p><h3 id="ws2server.once(eventname%2C-cb)"><a class="header-anchor" href="#ws2server.once(eventname%2C-cb)">§</a> wS2Server.once(eventName, cb)</h3><p>Configures an event handler to be called once when the specified event is emitted by the API server. No-op if the server is not yet up.</p><p><strong>Kind</strong>: instance method of <a href="#WS2Server"><code>WS2Server</code></a></p><table><thead><tr><th>Param</th><th>Type</th></tr></thead><tbody><tr><td>eventName</td><td><code>string</code></td></tr><tr><td>cb</td><td><code>function</code></td></tr></tbody></table><p><a id="WS2Server+send"></a></p><h3 id="ws2server.send(packet)"><a class="header-anchor" href="#ws2server.send(packet)">§</a> wS2Server.send(packet)</h3><p>Sends the provided packet to all connected clients</p><p><strong>Kind</strong>: instance method of <a href="#WS2Server"><code>WS2Server</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>packet</td><td><code>*</code></td><td>stringifed before being sent</td></tr></tbody></table></div></div><!--
      <div id="bfx-oss-docs-footer-bar">
        <div id="bfx-oss-docs-footer-bar__container">
          <p>Copyright © 2013-2020 iFinex Inc. All rights reserved.</p>
        </div>
      </div>
      --></div><script type="text/javascript" src="js/vendor/debug.min.js"></script><script type="text/javascript" src="js/vendor/lodash.min.js"></script><script type="text/javascript" src="js/vendor/zepto.min.js"></script><script type="text/javascript" src="js/vendor/perfect-scrollbar.min.js"></script><script type="text/javascript" src="js/main.js"></script></body></html>