<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width,initial-scale=1"><meta charset="utf-8"><link rel="stylesheet" type="text/css" href="css/normalize.css"><link rel="stylesheet" type="text/css" href="css/perfect-scrollbar.css"><link rel="stylesheet" type="text/css" href="css/highlightjs/night-owl.css"><link rel="stylesheet" type="text/css" href="index.css"><title>API Reference | bfx-hf-algo</title></head><body><div id="bfx-oss-docs-side-bar"><div id="bfx-oss-docs-side-bar__header"><img src="img/bfx-logo-bg-white.png" alt="Bitfinex" height="63"></div><ul><li><a href="index.html"><p>Home</p></a></li><li><a href="page_md_render_test.html"><p>Markdown Render Test</p></a></li><li><a href="page_libraries_bitfinex_api_py_README.html"><img src="svg/icons/python.svg"><p>bitfinex-api-py</p></a></li><li><a href="page_libraries_bitfinex_api_go_README.html"><img src="svg/icons/go.svg"><p>bitfinex-api-go</p></a></li><li><a href="page_libraries_bfxfixgw_README.html"><img src="svg/icons/go.svg"><p>bfxfixgw</p></a></li><li><a href="page_libraries_bitfinex_api_rb_README.html"><img src="svg/icons/ruby.svg"><p>bitfinex-api-rb</p></a></li><li><a href="page_libraries_bitfinex_api_node_README.html"><img src="svg/icons/nodejs_small.svg"><p>bitfinex-api-node</p></a></li><li><a href="page_libraries_bfx_api_mock_srv_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-mock-srv</p></a></li><li><a href="page_libraries_bfx_api_node_core_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-core</p></a></li><li><a href="page_libraries_bfx_api_node_models_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-models</p></a></li><li><a href="page_libraries_bfx_api_node_plugin_example_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-example</p></a></li><li><a href="page_libraries_bfx_api_node_plugin_managed_candles_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-managed-candles</p></a></li><li><a href="page_libraries_bfx_api_node_plugin_managed_ob_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-managed-ob</p></a></li><li><a href="page_libraries_bfx_api_node_plugin_ob_checksum_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-ob-checksum</p></a></li><li><a href="page_libraries_bfx_api_node_plugin_seq_audit_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-seq-audit</p></a></li><li><a href="page_libraries_bfx_api_node_plugin_wd_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-wd</p></a></li><li><a href="page_libraries_bfx_api_node_rest_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-rest</p></a></li><li><a href="page_libraries_bfx_api_node_util_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-util</p></a></li><li><a href="page_libraries_bfx_api_node_ws1_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-ws1</p></a></li><li><a href="page_libraries_bfx_hf_backtest_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-backtest</p></a></li><li><a href="page_libraries_bfx_hf_chart_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-chart</p></a></li><li><a href="page_libraries_bfx_hf_data_server_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-data-server</p></a></li><li><a href="page_libraries_bfx_hf_ext_plugin_bitfinex_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-ext-plugin-bitfinex</p></a></li><li><a href="page_libraries_bfx_hf_ext_plugin_dummy_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-ext-plugin-dummy</p></a></li><li><a href="page_libraries_bfx_hf_indicators_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-indicators</p></a></li><li><a href="page_libraries_bfx_hf_models_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-models</p></a></li><li><a href="page_libraries_bfx_hf_models_adapter_lowdb_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-models-adapter-lowdb</p></a></li><li><a href="page_libraries_bfx_hf_models_adapter_sql_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-models-adapter-sql</p></a></li><li><a href="page_libraries_bfx_hf_models_adapter_template_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-models-adapter-template</p></a></li><li class="active"><a href="page_libraries_bfx_hf_algo_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-algo</p></a><ul><li><a href="page_libraries_bfx_hf_algo_README.html"><p>- README</p></a></li><li class="active"><a href="page_libraries_bfx_hf_algo_reference.html"><p>- API Reference</p></a></li><li><a href="page_libraries_bfx_hf_algo_tutorial_architecture.html"><p>- Architecture</p></a></li></ul></li><li><a href="page_libraries_bfx_hf_server_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-server</p></a></li><li><a href="page_libraries_bfx_hf_strategy_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-strategy</p></a></li><li><a href="page_libraries_bfx_hf_strategy_exec_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-strategy-exec</p></a></li><li><a href="page_libraries_bfx_hf_ui_config_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-ui-config</p></a></li><li><a href="page_libraries_bfx_hf_util_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-util</p></a></li><li><a href="page_libraries_bfx_ws2_api_audit_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-ws2-api-audit</p></a></li><li><a href="page_libraries_cbq_js_README.html"><img src="svg/icons/nodejs_small.svg"><p>cbq-js</p></a></li><li><a href="page_libraries_caron_README.html"><img src="svg/icons/nodejs_small.svg"><p>caron</p></a></li><li><a href="page_libraries_eos_name_verify_README.html"><img src="svg/icons/nodejs_small.svg"><p>eos-name-verify</p></a></li><li><a href="page_libraries_grenache_browser_http_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-browser-http</p></a></li><li><a href="page_libraries_grenache_grape_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-grape</p></a></li><li><a href="page_libraries_grenache_nodejs_base_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-nodejs-base</p></a></li><li><a href="page_libraries_grenache_nodejs_http_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-nodejs-http</p></a></li><li><a href="page_libraries_grenache_nodejs_link_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-nodejs-link</p></a></li><li><a href="page_libraries_grenache_nodejs_utp_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-nodejs-utp</p></a></li><li><a href="page_libraries_grenache_nodejs_ws_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-nodejs-ws</p></a></li><li><a href="page_libraries_grenache_nodejs_ws_tls_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-nodejs-ws-tls</p></a></li><li><a href="page_libraries_lib_js_util_currencies_README.html"><img src="svg/icons/nodejs_small.svg"><p>lib-js-util-currencies</p></a></li><li><a href="page_libraries_lib_js_util_math_README.html"><img src="svg/icons/nodejs_small.svg"><p>lib-js-util-math</p></a></li><li><a href="page_libraries_lib_js_util_number_README.html"><img src="svg/icons/nodejs_small.svg"><p>lib-js-util-number</p></a></li><li><a href="page_libraries_lib_js_util_symbol_README.html"><img src="svg/icons/nodejs_small.svg"><p>lib-js-util-symbol</p></a></li><li><a href="page_libraries_smidgen_README.html"><img src="svg/icons/nodejs_small.svg"><p>smidgen</p></a></li><li><a href="page_libraries_sunbeam_README.html"><img src="svg/icons/nodejs_small.svg"><p>sunbeam</p></a></li><li><a href="page_libraries_wasteland_README.html"><img src="svg/icons/nodejs_small.svg"><p>wasteland</p></a></li></ul></div><div id="bfx-oss-docs-content"><div id="bfx-oss-docs-header-bar"><h2>API Reference</h2><h2>bfx-hf-algo</h2></div><div id="bfx-oss-docs-content-wrapper" class="bfx-oss-docs-content-type-api-docs"><div class="bfx-oss-docs-md-content bfx-oss-docs-code-wrapper"><div id="bfx-oss-docs-api-docs-index"><div id="bfx-oss-docs-api-docs-index__inner"><ul><li><a href="#module_bfx-hf-algo">bfx-hf-algo</a><ul><li><em>static</em><ul><li><a href="#module_bfx-hf-algo.defineAlgoOrder">.defineAlgoOrder(definition)</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo.AOInstance">.AOInstance</a> : <code>object</code></li><li><a href="#module_bfx-hf-algo.AOUIDefinition">.AOUIDefinition</a> : <code>object</code></li></ul></li><li><em>inner</em><ul><li><a href="#module_bfx-hf-algo.AOHost">~AOHost</a> ⇐ <a href="#module_bfx-hf-algo.AsyncEventEmitter"><code>AsyncEventEmitter</code></a><ul><li><a href="#new_module_bfx-hf-algo.AOHost_new">new AOHost([args])</a></li><li><em>instance</em><ul><li><a href="#module_bfx-hf-algo.AOHost+getAdapter">.getAdapter()</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo.AOHost+reconnect">.reconnect()</a></li><li><a href="#module_bfx-hf-algo.AOHost+close">.close()</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo.AOHost+connect">.connect()</a></li><li><a href="#module_bfx-hf-algo.AOHost+getAOs">.getAOs()</a> ⇒ <code>Array</code></li><li><a href="#module_bfx-hf-algo.AOHost+getAO">.getAO(id)</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo.AOHost+getAOInstance">.getAOInstance(gid)</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo.AOHost+getAOInstances">.getAOInstances()</a> ⇒ <code>Array.&lt;object&gt;</code></li><li><a href="#module_bfx-hf-algo.AOHost+reloadAllAOs">.reloadAllAOs()</a></li><li><a href="#module_bfx-hf-algo.AOHost+loadAllAOs">.loadAllAOs()</a></li><li><a href="#module_bfx-hf-algo.AOHost+startAO">.startAO(id, args, [gidCB])</a> ⇒ <code>string</code></li><li><a href="#module_bfx-hf-algo.AOHost+stopAO">.stopAO(gid)</a></li><li><a href="#module_bfx-hf-algo.AOHost+aosRunning">.aosRunning()</a> ⇒ <code>boolean</code></li><li><a href="#module_bfx-hf-algo.AsyncEventEmitter+removeAllListeners">.removeAllListeners(matcher, negativeMatch)</a></li><li><a href="#module_bfx-hf-algo.AsyncEventEmitter+off">.off(cb)</a></li><li><a href="#module_bfx-hf-algo.AsyncEventEmitter+once">.once(matcher, cb)</a></li><li><a href="#module_bfx-hf-algo.AsyncEventEmitter+on">.on(matcher, cb)</a></li><li><a href="#module_bfx-hf-algo.AsyncEventEmitter+onAll">.onAll(cb)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo.AsyncEventEmitter+onAllOnce">.onAllOnce(cb)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo.AsyncEventEmitter+emit">.emit(eventName, …args)</a> ⇒ <code>Promise</code></li></ul></li><li><em>static</em><ul><li><a href="#module_bfx-hf-algo.AOHost.TEARDOWN_GRACE_PERIOD_MS">.TEARDOWN_GRACE_PERIOD_MS</a> : <code>number</code></li></ul></li><li><em>inner</em><ul><li><a href="#module_bfx-hf-algo.AOHost..EventMetaInformation">~EventMetaInformation</a> : <code>object</code></li></ul></li></ul></li><li><a href="#module_bfx-hf-algo.AsyncEventEmitter">~AsyncEventEmitter</a><ul><li><a href="#module_bfx-hf-algo.AsyncEventEmitter+removeAllListeners">.removeAllListeners(matcher, negativeMatch)</a></li><li><a href="#module_bfx-hf-algo.AsyncEventEmitter+off">.off(cb)</a></li><li><a href="#module_bfx-hf-algo.AsyncEventEmitter+once">.once(matcher, cb)</a></li><li><a href="#module_bfx-hf-algo.AsyncEventEmitter+on">.on(matcher, cb)</a></li><li><a href="#module_bfx-hf-algo.AsyncEventEmitter+onAll">.onAll(cb)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo.AsyncEventEmitter+onAllOnce">.onAllOnce(cb)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo.AsyncEventEmitter+emit">.emit(eventName, …args)</a> ⇒ <code>Promise</code></li></ul></li></ul></li></ul></li><li><a href="#module_bfx-hf-algo/AccumulateDistribute">bfx-hf-algo/AccumulateDistribute</a><ul><li><em>static</em><ul><li><a href="#module_bfx-hf-algo/AccumulateDistribute.onDataManagedBook">.onDataManagedBook(instance, book, meta)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/AccumulateDistribute.onDataManagedCandles">.onDataManagedCandles(instance, candles, meta)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/AccumulateDistribute.onDataTrades">.onDataTrades(instance, trades, meta)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/AccumulateDistribute.onLifeStart">.onLifeStart(instance)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/AccumulateDistribute.onLifeStop">.onLifeStop(instance)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/AccumulateDistribute.onOrdersOrderCancel">.onOrdersOrderCancel(instance, order)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/AccumulateDistribute.onOrdersOrderFill">.onOrdersOrderFill(instance, order)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/AccumulateDistribute.onSelfIntervalTick">.onSelfIntervalTick(instance)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/AccumulateDistribute.onSelfSubmitOrder">.onSelfSubmitOrder(instance)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/AccumulateDistribute.declareChannels">.declareChannels(instance, host)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/AccumulateDistribute.declareEvents">.declareEvents(instance, host)</a></li><li><a href="#module_bfx-hf-algo/AccumulateDistribute.genOrderLabel">.genOrderLabel(state)</a> ⇒ <code>string</code></li><li><a href="#module_bfx-hf-algo/AccumulateDistribute.genPreview">.genPreview(args)</a> ⇒ <code>Array.&lt;object&gt;</code></li><li><a href="#module_bfx-hf-algo/AccumulateDistribute.getUIDef">.getUIDef()</a> ⇒ <a href="#module_bfx-hf-algo.AOUIDefinition"><code>AOUIDefinition</code></a></li><li><a href="#module_bfx-hf-algo/AccumulateDistribute.initState">.initState(args)</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo/AccumulateDistribute.processParams">.processParams(data)</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo/AccumulateDistribute.serialize">.serialize(state)</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo/AccumulateDistribute.unserialize">.unserialize(loadedState)</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo/AccumulateDistribute.validateParams">.validateParams(args)</a> ⇒ <code>string</code></li><li><a href="#module_bfx-hf-algo/AccumulateDistribute.generateOrderAmounts">.generateOrderAmounts(args)</a> ⇒ <code>Array.&lt;number&gt;</code></li><li><a href="#module_bfx-hf-algo/AccumulateDistribute.hasIndicatorCap">.hasIndicatorCap(args)</a> ⇒ <code>boolean</code></li><li><a href="#module_bfx-hf-algo/AccumulateDistribute.hasIndicatorOffset">.hasIndicatorOffset(args)</a> ⇒ <code>boolean</code></li><li><a href="#module_bfx-hf-algo/AccumulateDistribute.hasOBRequirement">.hasOBRequirement(args)</a> ⇒ <code>boolean</code></li><li><a href="#module_bfx-hf-algo/AccumulateDistribute.hasTradeRequirement">.hasTradeRequirement(args)</a> ⇒ <code>boolean</code></li><li><a href="#module_bfx-hf-algo/AccumulateDistribute.scheduleTick">.scheduleTick(instance)</a> ⇒ <code>Promise</code></li></ul></li><li><em>inner</em><ul><li><a href="#module_bfx-hf-algo/AccumulateDistribute..generateOrder">~generateOrder</a> ⇒ <code>Order</code></li><li><a href="#module_bfx-hf-algo/AccumulateDistribute..event_selfSubmitOrder">“selfSubmitOrder”</a></li><li><a href="#module_bfx-hf-algo/AccumulateDistribute..event_selfIntervalTick">“selfIntervalTick”</a></li></ul></li></ul></li><li><a href="#module_bfx-hf-algo/DefaultErrorHandlers">bfx-hf-algo/DefaultErrorHandlers</a><ul><li><a href="#module_bfx-hf-algo/DefaultErrorHandlers.onErrorInsufficientBalance">.onErrorInsufficientBalance(instance, order, notification)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/DefaultErrorHandlers.onErrorMinimumSize">.onErrorMinimumSize(instance, order, notification)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/DefaultErrorHandlers.onOrdersOrderError">.onOrdersOrderError(instance)</a> ⇒ <code>Promise</code></li></ul></li><li><a href="#module_bfx-hf-algo/Helpers">bfx-hf-algo/Helpers</a><ul><li><a href="#module_bfx-hf-algo/Helpers.clearAllTimeouts">.clearAllTimeouts()</a></li><li><a href="#module_bfx-hf-algo/Helpers.debug">.debug(str, …args)</a></li><li><a href="#module_bfx-hf-algo/Helpers.emitSelf">.emitSelf(eventName, …eventArgs)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/Helpers.emitSelfAsync">.emitSelfAsync(eventName, …eventArgs)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/Helpers.emit">.emit(eventName, …eventArgs)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/Helpers.emitAsync">.emitAsync(eventName, …eventArgs)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/Helpers.notifyUI">.notifyUI(level, message)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/Helpers.cancelOrderWithDelay">.cancelOrderWithDelay(state, delay, order)</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo/Helpers.cancelAllOrdersWithDelay">.cancelAllOrdersWithDelay(state, delay)</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo/Helpers.submitOrderWithDelay">.submitOrderWithDelay(state, delay, order, attempt)</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo/Helpers.declareEvent">.declareEvent(instance, aoHost, eventName, path)</a></li><li><a href="#module_bfx-hf-algo/Helpers.declareChannel">.declareChannel(instance, aoHost, channel, filter)</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo/Helpers.updateState">.updateState(instance, update)</a> ⇒ <code>object</code></li></ul></li><li><a href="#module_bfx-hf-algo/Iceberg">bfx-hf-algo/Iceberg</a><ul><li><em>static</em><ul><li><a href="#module_bfx-hf-algo/Iceberg.generateOrders">.generateOrders</a> ⇒ <code>Array.&lt;object&gt;</code></li><li><a href="#module_bfx-hf-algo/Iceberg.onLifeStart">.onLifeStart(instance)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/Iceberg.onLifeStop">.onLifeStop(instance)</a></li><li><a href="#module_bfx-hf-algo/Iceberg.onOrdersOrderCancel">.onOrdersOrderCancel(instance, order)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/Iceberg.onOrdersOrderFill">.onOrdersOrderFill(instance, order)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/Iceberg.onSelfSubmitOrders">.onSelfSubmitOrders(instance)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/Iceberg.declareEvents">.declareEvents(instance, host)</a></li><li><a href="#module_bfx-hf-algo/Iceberg.genOrderLabel">.genOrderLabel(state)</a> ⇒ <code>string</code></li><li><a href="#module_bfx-hf-algo/Iceberg.genPreview">.genPreview(args)</a> ⇒ <code>Array.&lt;object&gt;</code></li><li><a href="#module_bfx-hf-algo/Iceberg.getUIDef">.getUIDef()</a> ⇒ <a href="#module_bfx-hf-algo.AOUIDefinition"><code>AOUIDefinition</code></a></li><li><a href="#module_bfx-hf-algo/Iceberg.initState">.initState(args)</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo/Iceberg.processParams">.processParams(data)</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo/Iceberg.serialize">.serialize(state)</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo/Iceberg.unserialize">.unserialize(loadedState)</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo/Iceberg.validateParams">.validateParams(args)</a> ⇒ <code>string</code></li><li><a href="#module_bfx-hf-algo/Iceberg.genOrderLabel">.genOrderLabel(state)</a> ⇒ <code>string</code></li></ul></li><li><em>inner</em><ul><li><a href="#module_bfx-hf-algo/Iceberg..event_selfSubmitOrders">“event:selfSubmitOrders”</a></li></ul></li></ul></li><li><a href="#module_bfx-hf-algo/MACrossover">bfx-hf-algo/MACrossover</a><ul><li><em>static</em><ul><li><a href="#module_bfx-hf-algo/MACrossover.generateOrder">.generateOrder</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo/MACrossover.onDataManagedCandles">.onDataManagedCandles(instance, candles, meta)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/MACrossover.onLifeStop">.onLifeStop(instance)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/MACrossover.onOrdersOrderCancel">.onOrdersOrderCancel(instance, order)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/MACrossover.onSelfSubmitOrder">.onSelfSubmitOrder(instance)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/MACrossover.declareChannels">.declareChannels(instance, host)</a></li><li><a href="#module_bfx-hf-algo/MACrossover.declareEvents">.declareEvents(instance, host)</a></li><li><a href="#module_bfx-hf-algo/MACrossover.genPreview">.genPreview(args)</a> ⇒ <code>Array.&lt;object&gt;</code></li><li><a href="#module_bfx-hf-algo/MACrossover.initState">.initState(args)</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo/MACrossover.processParams">.processParams(data)</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo/MACrossover.serialize">.serialize(state)</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo/MACrossover.unserialize">.unserialize(loadedState)</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo/MACrossover.validateParams">.validateParams(args)</a> ⇒ <code>string</code></li></ul></li><li><em>inner</em><ul><li><a href="#module_bfx-hf-algo/MACrossover..event_selfSubmitOrder">“selfSubmitOrder”</a></li></ul></li></ul></li><li><a href="#module_bfx-hf-algo/OCOCO">bfx-hf-algo/OCOCO</a><ul><li><em>static</em><ul><li><a href="#module_bfx-hf-algo/OCOCO.generateInitialOrder">.generateInitialOrder</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo/OCOCO.generateOCOOrder">.generateOCOOrder</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo/OCOCO.onLifeStart">.onLifeStart(instance)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/OCOCO.onLifeStop">.onLifeStop(instance)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/OCOCO.onOrdersOrderCancel">.onOrdersOrderCancel(instance, order)</a></li><li><a href="#module_bfx-hf-algo/OCOCO.onOrdersOrderFill">.onOrdersOrderFill(instance, order)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/OCOCO.onSelfSubmitInitialOrder">.onSelfSubmitInitialOrder(instance)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/OCOCO.onSelfSubmitOCOOrder">.onSelfSubmitOCOOrder(instance)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/OCOCO.module.exports">.module.exports(instance, host)</a></li><li><a href="#module_bfx-hf-algo/OCOCO.genOrderLabel">.genOrderLabel(state)</a> ⇒ <code>string</code></li><li><a href="#module_bfx-hf-algo/OCOCO.genPreview">.genPreview(args)</a> ⇒ <code>Array.&lt;object&gt;</code></li><li><a href="#module_bfx-hf-algo/OCOCO.getUIDef">.getUIDef()</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo/OCOCO.initState">.initState(args)</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo/OCOCO.processParams">.processParams(data)</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo/OCOCO.serialize">.serialize(state)</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo/OCOCO.unserialize">.unserialize(loadedState)</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo/OCOCO.validateParams">.validateParams(args)</a> ⇒ <code>string</code></li></ul></li><li><em>inner</em><ul><li><a href="#module_bfx-hf-algo/OCOCO..event_selfSubmitInitialOrder">“selfSubmitInitialOrder”</a></li><li><a href="#module_bfx-hf-algo/OCOCO..event_selfSubmitOCOOrder">“selfSubmitOCOOrder”</a></li></ul></li></ul></li><li><a href="#module_bfx-hf-algo/PingPong">bfx-hf-algo/PingPong</a><ul><li><a href="#module_bfx-hf-algo/PingPong.genPingPongTable">.genPingPongTable</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo/PingPong.onLifeStart">.onLifeStart(instance)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/PingPong.onLifeStop">.onLifeStop(instance)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/PingPong.onOrdersOrderCancel">.onOrdersOrderCancel(instance, order)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/PingPong.onOrdersOrderFill">.onOrdersOrderFill(instance, order)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/PingPong.genOrderLabel">.genOrderLabel(state)</a> ⇒ <code>string</code></li><li><a href="#module_bfx-hf-algo/PingPong.genPreview">.genPreview(args)</a> ⇒ <code>Array.&lt;object&gt;</code></li><li><a href="#module_bfx-hf-algo/PingPong.getUIDef">.getUIDef()</a> ⇒ <a href="#module_bfx-hf-algo.AOUIDefinition"><code>AOUIDefinition</code></a></li><li><a href="#module_bfx-hf-algo/PingPong.initState">.initState(args)</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo/PingPong.processParams">.processParams(data)</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo/PingPong.serialize">.serialize(state)</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo/PingPong.unserialize">.unserialize(loadedState)</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo/PingPong.validateParams">.validateParams(args)</a> ⇒ <code>string</code></li></ul></li><li><a href="#module_bfx-hf-algo/TWAP">bfx-hf-algo/TWAP</a><ul><li><em>static</em><ul><li><a href="#module_bfx-hf-algo/TWAP.generateOrder">.generateOrder</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo/TWAP.getOBPrice">.getOBPrice</a> ⇒ <code>number</code></li><li><a href="#module_bfx-hf-algo/TWAP.getTradePrice">.getTradePrice</a> ⇒ <code>number</code></li><li><a href="#module_bfx-hf-algo/TWAP.hasOBTarget">.hasOBTarget</a> ⇒ <code>boolean</code></li><li><a href="#module_bfx-hf-algo/TWAP.hasTradeTarget">.hasTradeTarget</a> ⇒ <code>boolean</code></li><li><a href="#module_bfx-hf-algo/TWAP.isTargetMet">.isTargetMet</a> ⇒ <code>boolean</code></li><li><a href="#module_bfx-hf-algo/TWAP.onDataManagedBook">.onDataManagedBook(instance, book, meta)</a></li><li><a href="#module_bfx-hf-algo/TWAP.onDataTrades">.onDataTrades(instance, trades, meta)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/TWAP.onLifeStart">.onLifeStart(instance)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/TWAP.onLifeStop">.onLifeStop(instance)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/TWAP.onOrdersOrderCancel">.onOrdersOrderCancel(instance, order)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/TWAP.onOrdersOrderFill">.onOrdersOrderFill(instance, order)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/TWAP.onSelfIntervalTick">.onSelfIntervalTick(instance)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo/TWAP.declareChannels">.declareChannels(instance, host)</a></li><li><a href="#module_bfx-hf-algo/TWAP.declareEvents">.declareEvents(instance, host)</a></li><li><a href="#module_bfx-hf-algo/TWAP.genOrderLabel">.genOrderLabel(state)</a> ⇒ <code>string</code></li><li><a href="#module_bfx-hf-algo/TWAP.genPreview">.genPreview(args)</a> ⇒ <code>Array.&lt;object&gt;</code></li><li><a href="#module_bfx-hf-algo/TWAP.getUIDef">.getUIDef()</a> ⇒ <a href="#module_bfx-hf-algo.AOUIDefinition"><code>AOUIDefinition</code></a></li><li><a href="#module_bfx-hf-algo/TWAP.initState">.initState(args)</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo/TWAP.processParams">.processParams(data)</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo/TWAP.serialize">.serialize(state)</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo/TWAP.unserialize">.unserialize(loadedState)</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo/TWAP.validateParams">.validateParams(args)</a> ⇒ <code>string</code></li></ul></li><li><em>inner</em><ul><li><a href="#module_bfx-hf-algo/TWAP..event_selfIntervalTick">“selfIntervalTick”</a></li></ul></li></ul></li></ul></div></div><p><a id="module_bfx-hf-algo"></a></p><h2 id="bfx-hf-algo"><a class="header-anchor" href="#bfx-hf-algo">§</a> bfx-hf-algo</h2><p>This module implements an algorithmic order system using the Bitfinex Node.JS API, and provides several official algo orders which serve as reference implementations.</p><p>The system is exchange-agnostic and relies on external adapter libraries for the actual exchange API connection. For bitfinex, this adapter is provided by the <a href="module:bfx-hf-ext-plugin-bitfinex">bfx-hf-ext-plugin-bitfinex</a> module.</p><h3 id="features"><a class="header-anchor" href="#features">§</a> Features</h3><ul><li>Event-driven algorithm host (<a href="#module_bfx-hf-algo.AOHost">AOHost</a>)</li><li>Plugin-based exchange API connection, enabling the development of adapters for new exchanges</li><li><a href="module:bfx-hf-algo.TWAP">TWAP</a></li><li><a href="module:bfx-hf-algo.PingPong">Ping/Pong</a></li><li><a href="module:bfx-hf-algo.AccumulateDistribute">Accumulate Distribute</a></li><li><a href="module:bfx-hf-algo.MACrossover">MA Crossover</a></li><li><a href="module:bfx-hf-algo.Iceberg">Iceberg</a></li></ul><h3 id="installation"><a class="header-anchor" href="#installation">§</a> Installation</h3><pre><code class="hljs language-bash">npm i --save bfx-hf-algo
npm i --save bfx-hf-ext-plugin-bitfinex
npm i --save bfx-hf-models-adapter-lowdb
</code></pre><h3 id="db-backend"><a class="header-anchor" href="#db-backend">§</a> DB Backend</h3><p>Algo order persistence is handled by the <a href="module:bfx-hf-models">bfx-hf-models</a> module, with supports multiple database backends. Currently two official modules are provided, <a href="module:bfx-hf-models-adapter-lowdb">bfx-hf-models-adapter-lowdb</a> for storage via {@npm lowdb} and <a href="module:bfx-hf-models-adapter-sql">bfx-hf-models-adapter-sql</a> utilizing {@npm knex} configured for <code>PostgreSQL</code>. To implement a custom database adapter, refer to <a href="module:bfx-hf-models-adapter-template">bfx-hf-models-adapter-template</a> for the required structure.</p><h3 id="exchange-interface"><a class="header-anchor" href="#exchange-interface">§</a> Exchange Interface</h3><p><a href="#module_bfx-hf-algo">bfx-hf-algo</a> is designed to work with any exchange through the use of adapter modules, providing a common API for algorithmic order execution. <a href="module:bfx-hf-ext-plugin-bitfinex">bfx-hf-ext-plugin-bitfinex</a> implements this API for <a href="https://bitfinex.com">Bitfinex</a>. Refer to <a href="module:bfx-hf-ext-plugin-dummy">bfx-hf-ext-plugin-dummy</a> for the required structure.</p><p><strong>License</strong>: Apache-2.0<br><a id="module_bfx-hf-algo.defineAlgoOrder"></a></p><h3 id="bfx-hf-algo.definealgoorder(definition)-%E2%87%92-object"><a class="header-anchor" href="#bfx-hf-algo.definealgoorder(definition)-%E2%87%92-object">§</a> bfx-hf-algo.defineAlgoOrder(definition) ⇒ <code>object</code></h3><p>Attaches default handlers if not supplied &amp; returns the algo order definition</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo"><code>bfx-hf-algo</code></a><br><strong>Returns</strong>: <code>object</code> - ao</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>definition</td><td><code>object</code></td><td>algorithmic order definition</td></tr></tbody></table><p><a id="module_bfx-hf-algo.AOInstance"></a></p><h3 id="bfx-hf-algo.aoinstance-%3A-object"><a class="header-anchor" href="#bfx-hf-algo.aoinstance-%3A-object">§</a> bfx-hf-algo.AOInstance : <code>object</code></h3><p>An object containing all state for an algorithmic order instance. Includes the <a href="#module_bfx-hf-algo.AsyncEventEmitter">AsyncEventEmitter</a> instance used to trigger internal order logic.</p><p><strong>Kind</strong>: static typedef of <a href="#module_bfx-hf-algo"><code>bfx-hf-algo</code></a><br><strong>Properties</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>h</td><td><a href="#module_bfx-hf-algo/Helpers"><code>bfx-hf-algo/Helpers</code></a></td><td>helpers bound to the instance</td></tr><tr><td>state</td><td><code>object</code></td><td>instance state used during execution</td></tr><tr><td><a href="http://state.id">state.id</a></td><td><code>number</code></td><td>ID of the instance</td></tr><tr><td>state.gid</td><td><code>number</code></td><td>ID of the order group, attached to all orders</td></tr><tr><td>state.channels</td><td><code>Array</code></td><td>subscribed channels and their filters</td></tr><tr><td>state.orders</td><td><code>object</code></td><td>map of open orders key’d by client ID</td></tr><tr><td>state.cancelledOrders</td><td><code>object</code></td><td>map of cancelled orders key’d by client ID</td></tr><tr><td>state.allOrders</td><td><code>object</code></td><td>map of all orders ever created by the instance key’d by client ID</td></tr><tr><td>state.connection</td><td><code>object</code></td><td>object passed to exchange adapter for all API interactions. Contents vary based on the adapter in use.</td></tr><tr><td>state.ev</td><td><a href="#module_bfx-hf-algo.AsyncEventEmitter"><code>AsyncEventEmitter</code></a></td><td>internal event emitter</td></tr></tbody></table><p><a id="module_bfx-hf-algo.AOUIDefinition"></a></p><h3 id="bfx-hf-algo.aouidefinition-%3A-object"><a class="header-anchor" href="#bfx-hf-algo.aouidefinition-%3A-object">§</a> bfx-hf-algo.AOUIDefinition : <code>object</code></h3><p>Object describing the layout and components of the submission form presented to the user for an individual algorithmic order. For examples, refer to any of the algorithmic orders provided by <a href="#module_bfx-hf-algo">bfx-hf-algo</a></p><p><strong>Kind</strong>: static typedef of <a href="#module_bfx-hf-algo"><code>bfx-hf-algo</code></a><br><strong>Properties</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>label</td><td><code>string</code></td><td>name of the order to be shown to the user</td></tr><tr><td>id</td><td><code>string</code></td><td>internal algorithmic order ID</td></tr><tr><td>[uiIcon]</td><td><code>string</code></td><td>CSS classname of the icon to show</td></tr><tr><td>[customHelp]</td><td><code>string</code></td><td>documentation</td></tr><tr><td>connectionTimeout</td><td><code>number</code></td><td>how long to wait before considering the HF disconnected</td></tr><tr><td>actionTimeout</td><td><code>number</code></td><td>how long to wait for action confirmatio before considering the HF disconnected</td></tr><tr><td>[header]</td><td><code>object</code></td><td>rendered at the top of the form</td></tr><tr><td>[header.component]</td><td><code>string</code></td><td>component to use for the header</td></tr><tr><td>[header.fields]</td><td><code>Array.&lt;string&gt;</code></td><td>array of field names to render in header</td></tr><tr><td>sections</td><td><code>Array.&lt;object&gt;</code></td><td>the layout definition itself</td></tr><tr><td>sections[].title</td><td><code>string</code></td><td>rendered above the section</td></tr><tr><td>sections[].name</td><td><code>string</code></td><td>unique internal ID for the section</td></tr><tr><td>sections[].rows</td><td><code>Array.&lt;Array.&lt;string&gt;&gt;</code></td><td>array of rows of field IDs to render in the section, two per row.</td></tr><tr><td>fields</td><td><code>object</code></td><td>field definitions, key’d by ID</td></tr><tr><td>actions</td><td><code>Array.&lt;string&gt;</code></td><td>array of action names, maximum 2</td></tr></tbody></table><p><a id="module_bfx-hf-algo.AOHost"></a></p><h3 id="bfx-hf-algo~aohost-%E2%87%90-asynceventemitter"><a class="header-anchor" href="#bfx-hf-algo~aohost-%E2%87%90-asynceventemitter">§</a> bfx-hf-algo~AOHost ⇐ <a href="#module_bfx-hf-algo.AsyncEventEmitter"><code>AsyncEventEmitter</code></a></h3><p>The AOHost class provides a wrapper around the algo order system, and manages lifetime events/order execution. Internally it hosts a Manager instance from bfx-api-node-core for communication with the Bitfinex API, and listens for websocket stream events in order to update order state/trigger algo order events.</p><p>Execution is handled by an event system, with events being triggered by Bitfinex API websocket stream payloads, and the algo orders themselves.</p><p>To start/stop algo orders, <code>gid = startAO(id, args)</code> and <code>stopAO(gid)</code> methods are provided, with the generated group ID (<code>gid</code>) being the same as that used for all atomic orders created by the individual algo orders.</p><p><strong>Kind</strong>: inner class of <a href="#module_bfx-hf-algo"><code>bfx-hf-algo</code></a><br><strong>Extends</strong>: <a href="#module_bfx-hf-algo.AsyncEventEmitter"><code>AsyncEventEmitter</code></a></p><ul><li><a href="#module_bfx-hf-algo.AOHost">~AOHost</a> ⇐ <a href="#module_bfx-hf-algo.AsyncEventEmitter"><code>AsyncEventEmitter</code></a><ul><li><a href="#new_module_bfx-hf-algo.AOHost_new">new AOHost([args])</a></li><li><em>instance</em><ul><li><a href="#module_bfx-hf-algo.AOHost+getAdapter">.getAdapter()</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo.AOHost+reconnect">.reconnect()</a></li><li><a href="#module_bfx-hf-algo.AOHost+close">.close()</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo.AOHost+connect">.connect()</a></li><li><a href="#module_bfx-hf-algo.AOHost+getAOs">.getAOs()</a> ⇒ <code>Array</code></li><li><a href="#module_bfx-hf-algo.AOHost+getAO">.getAO(id)</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo.AOHost+getAOInstance">.getAOInstance(gid)</a> ⇒ <code>object</code></li><li><a href="#module_bfx-hf-algo.AOHost+getAOInstances">.getAOInstances()</a> ⇒ <code>Array.&lt;object&gt;</code></li><li><a href="#module_bfx-hf-algo.AOHost+reloadAllAOs">.reloadAllAOs()</a></li><li><a href="#module_bfx-hf-algo.AOHost+loadAllAOs">.loadAllAOs()</a></li><li><a href="#module_bfx-hf-algo.AOHost+startAO">.startAO(id, args, [gidCB])</a> ⇒ <code>string</code></li><li><a href="#module_bfx-hf-algo.AOHost+stopAO">.stopAO(gid)</a></li><li><a href="#module_bfx-hf-algo.AOHost+aosRunning">.aosRunning()</a> ⇒ <code>boolean</code></li><li><a href="#module_bfx-hf-algo.AsyncEventEmitter+removeAllListeners">.removeAllListeners(matcher, negativeMatch)</a></li><li><a href="#module_bfx-hf-algo.AsyncEventEmitter+off">.off(cb)</a></li><li><a href="#module_bfx-hf-algo.AsyncEventEmitter+once">.once(matcher, cb)</a></li><li><a href="#module_bfx-hf-algo.AsyncEventEmitter+on">.on(matcher, cb)</a></li><li><a href="#module_bfx-hf-algo.AsyncEventEmitter+onAll">.onAll(cb)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo.AsyncEventEmitter+onAllOnce">.onAllOnce(cb)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo.AsyncEventEmitter+emit">.emit(eventName, …args)</a> ⇒ <code>Promise</code></li></ul></li><li><em>static</em><ul><li><a href="#module_bfx-hf-algo.AOHost.TEARDOWN_GRACE_PERIOD_MS">.TEARDOWN_GRACE_PERIOD_MS</a> : <code>number</code></li></ul></li><li><em>inner</em><ul><li><a href="#module_bfx-hf-algo.AOHost..EventMetaInformation">~EventMetaInformation</a> : <code>object</code></li></ul></li></ul></li></ul><p><a id="new_module_bfx-hf-algo.AOHost_new"></a></p><h4 id="new-aohost(%5Bargs%5D)"><a class="header-anchor" href="#new-aohost(%5Bargs%5D)">§</a> new AOHost([args])</h4><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>[args]</td><td><code>object</code></td><td>arguments</td></tr><tr><td>[args.db]</td><td><code>object</code></td><td>optional</td></tr><tr><td>[args.wsURL]</td><td><code>string</code></td><td>wss://api.bitfinex.com/ws/2</td></tr><tr><td>[args.restURL]</td><td><code>string</code></td><td><a href="https://api.bitfinex.com">https://api.bitfinex.com</a></td></tr><tr><td>[args.agent]</td><td><code>object</code></td><td>optional proxy agent</td></tr><tr><td>[args.aos]</td><td><code>Array.&lt;object&gt;</code></td><td>algo orders to manage</td></tr><tr><td>[args.dms]</td><td><code>number</code></td><td>dead man switch, active 4 (default)</td></tr></tbody></table><p><a id="module_bfx-hf-algo.AOHost+getAdapter"></a></p><h4 id="aohost.getadapter()-%E2%87%92-object"><a class="header-anchor" href="#aohost.getadapter()-%E2%87%92-object">§</a> aoHost.getAdapter() ⇒ <code>object</code></h4><p>Get configured exchange adapter</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-hf-algo.AOHost"><code>AOHost</code></a><br><strong>Returns</strong>: <code>object</code> - adapter<br><a id="module_bfx-hf-algo.AOHost+reconnect"></a></p><h4 id="aohost.reconnect()"><a class="header-anchor" href="#aohost.reconnect()">§</a> aoHost.reconnect()</h4><p>Disconnect &amp; reconnect the exchange adapter</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-hf-algo.AOHost"><code>AOHost</code></a><br><a id="module_bfx-hf-algo.AOHost+close"></a></p><h4 id="aohost.close()-%E2%87%92-promise"><a class="header-anchor" href="#aohost.close()-%E2%87%92-promise">§</a> aoHost.close() ⇒ <code>Promise</code></h4><p>Close the exchange adapter connection.</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-hf-algo.AOHost"><code>AOHost</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves on connection close<br><a id="module_bfx-hf-algo.AOHost+connect"></a></p><h4 id="aohost.connect()"><a class="header-anchor" href="#aohost.connect()">§</a> aoHost.connect()</h4><p>Opens a new socket connection on the internal adapter</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-hf-algo.AOHost"><code>AOHost</code></a><br><a id="module_bfx-hf-algo.AOHost+getAOs"></a></p><h4 id="aohost.getaos()-%E2%87%92-array"><a class="header-anchor" href="#aohost.getaos()-%E2%87%92-array">§</a> aoHost.getAOs() ⇒ <code>Array</code></h4><p>Fetch configured algorithmic orders</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-hf-algo.AOHost"><code>AOHost</code></a><br><strong>Returns</strong>: <code>Array</code> - aos<br><a id="module_bfx-hf-algo.AOHost+getAO"></a></p><h4 id="aohost.getao(id)-%E2%87%92-object"><a class="header-anchor" href="#aohost.getao(id)-%E2%87%92-object">§</a> aoHost.getAO(id) ⇒ <code>object</code></h4><p>Returns the algo order definition identified by the provided ID</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-hf-algo.AOHost"><code>AOHost</code></a><br><strong>Returns</strong>: <code>object</code> - aoDef</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>id</td><td><code>string</code></td><td>i.e. bfx-iceberg</td></tr></tbody></table><p><a id="module_bfx-hf-algo.AOHost+getAOInstance"></a></p><h4 id="aohost.getaoinstance(gid)-%E2%87%92-object"><a class="header-anchor" href="#aohost.getaoinstance(gid)-%E2%87%92-object">§</a> aoHost.getAOInstance(gid) ⇒ <code>object</code></h4><p>Returns the active AO instance state identified by the provided GID</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-hf-algo.AOHost"><code>AOHost</code></a><br><strong>Returns</strong>: <code>object</code> - state - algo order state</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>gid</td><td><code>string</code></td><td>algo order group ID</td></tr></tbody></table><p><a id="module_bfx-hf-algo.AOHost+getAOInstances"></a></p><h4 id="aohost.getaoinstances()-%E2%87%92-array.%3Cobject%3E"><a class="header-anchor" href="#aohost.getaoinstances()-%E2%87%92-array.%3Cobject%3E">§</a> aoHost.getAOInstances() ⇒ <code>Array.&lt;object&gt;</code></h4><p>Returns an array of all running algo order instances</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-hf-algo.AOHost"><code>AOHost</code></a><br><strong>Returns</strong>: <code>Array.&lt;object&gt;</code> - aoInstances<br><a id="module_bfx-hf-algo.AOHost+reloadAllAOs"></a></p><h4 id="aohost.reloadallaos()"><a class="header-anchor" href="#aohost.reloadallaos()">§</a> aoHost.reloadAllAOs()</h4><p>Implodes all current AO instances, but does NOT stop them. Afterwards, all known AOs are loaded and started again.</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-hf-algo.AOHost"><code>AOHost</code></a><br><a id="module_bfx-hf-algo.AOHost+loadAllAOs"></a></p><h4 id="aohost.loadallaos()"><a class="header-anchor" href="#aohost.loadallaos()">§</a> aoHost.loadAllAOs()</h4><p>Loads and starts all saved previously active algo orders</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-hf-algo.AOHost"><code>AOHost</code></a><br><a id="module_bfx-hf-algo.AOHost+startAO"></a></p><h4 id="aohost.startao(id%2C-args%2C-%5Bgidcb%5D)-%E2%87%92-string"><a class="header-anchor" href="#aohost.startao(id%2C-args%2C-%5Bgidcb%5D)-%E2%87%92-string">§</a> aoHost.startAO(id, args, [gidCB]) ⇒ <code>string</code></h4><p>Creates and starts a new algo order instance, based on the AO def identified by the supplied ID</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-hf-algo.AOHost"><code>AOHost</code></a><br><strong>Returns</strong>: <code>string</code> - gid - instance GID</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>id</td><td><code>string</code></td><td>algo order definition ID, i.e. bfx-iceberg</td></tr><tr><td>args</td><td><code>object</code></td><td>algo order arguments/parameters</td></tr><tr><td>[gidCB]</td><td><code>function</code></td><td>callback to acquire GID prior to ao:start</td></tr></tbody></table><p><a id="module_bfx-hf-algo.AOHost+stopAO"></a></p><h4 id="aohost.stopao(gid)"><a class="header-anchor" href="#aohost.stopao(gid)">§</a> aoHost.stopAO(gid)</h4><p>Stops an algo order instance by GID</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-hf-algo.AOHost"><code>AOHost</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>gid</td><td><code>string</code></td><td>algo order instance GID</td></tr></tbody></table><p><a id="module_bfx-hf-algo.AOHost+aosRunning"></a></p><h4 id="aohost.aosrunning()-%E2%87%92-boolean"><a class="header-anchor" href="#aohost.aosrunning()-%E2%87%92-boolean">§</a> aoHost.aosRunning() ⇒ <code>boolean</code></h4><p><strong>Kind</strong>: instance method of <a href="#module_bfx-hf-algo.AOHost"><code>AOHost</code></a><br><strong>Returns</strong>: <code>boolean</code> - aosRunning - true if any algo order is currently running<br><a id="module_bfx-hf-algo.AsyncEventEmitter+removeAllListeners"></a></p><h4 id="aohost.removealllisteners(matcher%2C-negativematch)"><a class="header-anchor" href="#aohost.removealllisteners(matcher%2C-negativematch)">§</a> aoHost.removeAllListeners(matcher, negativeMatch)</h4><p>Removes all listeners, only those for the specified event name, or those matching/not matching a regular expression</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-hf-algo.AOHost"><code>AOHost</code></a><br><strong>Overrides</strong>: <a href="#module_bfx-hf-algo.AsyncEventEmitter+removeAllListeners"><code>removeAllListeners</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>matcher</td><td><code>string</code> | <code>RegExp</code></td><td>regular expression or string to match with</td></tr><tr><td>negativeMatch</td><td><code>boolean</code></td><td>if true, events not matching are deleted</td></tr></tbody></table><p><a id="module_bfx-hf-algo.AsyncEventEmitter+off"></a></p><h4 id="aohost.off(cb)"><a class="header-anchor" href="#aohost.off(cb)">§</a> aoHost.off(cb)</h4><p>Remove an event handler by event name</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-hf-algo.AOHost"><code>AOHost</code></a><br><strong>Overrides</strong>: <a href="#module_bfx-hf-algo.AsyncEventEmitter+off"><code>off</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bfx-hf-algo.AsyncEventEmitter+once"></a></p><h4 id="aohost.once(matcher%2C-cb)"><a class="header-anchor" href="#aohost.once(matcher%2C-cb)">§</a> aoHost.once(matcher, cb)</h4><p>Bind an event handler that should only fire once</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-hf-algo.AOHost"><code>AOHost</code></a><br><strong>Overrides</strong>: <a href="#module_bfx-hf-algo.AsyncEventEmitter+once"><code>once</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>matcher</td><td><code>string</code> | <code>RegExp</code></td><td>regular expression or string to match with</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bfx-hf-algo.AsyncEventEmitter+on"></a></p><h4 id="aohost.on(matcher%2C-cb)"><a class="header-anchor" href="#aohost.on(matcher%2C-cb)">§</a> aoHost.on(matcher, cb)</h4><p>Bind an event handler</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-hf-algo.AOHost"><code>AOHost</code></a><br><strong>Overrides</strong>: <a href="#module_bfx-hf-algo.AsyncEventEmitter+on"><code>on</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>matcher</td><td><code>string</code> | <code>RegExp</code></td><td>regular expression or string to match with</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bfx-hf-algo.AsyncEventEmitter+onAll"></a></p><h4 id="aohost.onall(cb)-%E2%87%92-promise"><a class="header-anchor" href="#aohost.onall(cb)-%E2%87%92-promise">§</a> aoHost.onAll(cb) ⇒ <code>Promise</code></h4><p>Bind an event handler for all event types</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-hf-algo.AOHost"><code>AOHost</code></a><br><strong>Overrides</strong>: <a href="#module_bfx-hf-algo.AsyncEventEmitter+onAll"><code>onAll</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves when all listeners complete</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bfx-hf-algo.AsyncEventEmitter+onAllOnce"></a></p><h4 id="aohost.onallonce(cb)-%E2%87%92-promise"><a class="header-anchor" href="#aohost.onallonce(cb)-%E2%87%92-promise">§</a> aoHost.onAllOnce(cb) ⇒ <code>Promise</code></h4><p>Bind an event handler for all event types that only fires once</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-hf-algo.AOHost"><code>AOHost</code></a><br><strong>Overrides</strong>: <a href="#module_bfx-hf-algo.AsyncEventEmitter+onAllOnce"><code>onAllOnce</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves when all listeners complete</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bfx-hf-algo.AsyncEventEmitter+emit"></a></p><h4 id="aohost.emit(eventname%2C-%E2%80%A6args)-%E2%87%92-promise"><a class="header-anchor" href="#aohost.emit(eventname%2C-%E2%80%A6args)-%E2%87%92-promise">§</a> aoHost.emit(eventName, …args) ⇒ <code>Promise</code></h4><p>Emit an event; can be await’ed, and will resolve after all handlers have been called</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-hf-algo.AOHost"><code>AOHost</code></a><br><strong>Overrides</strong>: <a href="#module_bfx-hf-algo.AsyncEventEmitter+emit"><code>emit</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves when all listeners complete</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>eventName</td><td><code>string</code></td><td>event name to emit</td></tr><tr><td>…args</td><td><code>any</code></td><td>arguments to pass to listeners</td></tr></tbody></table><p><a id="module_bfx-hf-algo.AOHost.TEARDOWN_GRACE_PERIOD_MS"></a></p><h4 id="aohost.teardown_grace_period_ms-%3A-number"><a class="header-anchor" href="#aohost.teardown_grace_period_ms-%3A-number">§</a> AOHost.TEARDOWN_GRACE_PERIOD_MS : <code>number</code></h4><p>How long orders are allowed to settle for before teardown in ms.</p><p><strong>Kind</strong>: static property of <a href="#module_bfx-hf-algo.AOHost"><code>AOHost</code></a><br><strong>Default</strong>: <code>10000</code><br><a id="module_bfx-hf-algo.AOHost..EventMetaInformation"></a></p><h4 id="aohost~eventmetainformation-%3A-object"><a class="header-anchor" href="#aohost~eventmetainformation-%3A-object">§</a> AOHost~EventMetaInformation : <code>object</code></h4><p><strong>Kind</strong>: inner typedef of <a href="#module_bfx-hf-algo.AOHost"><code>AOHost</code></a><br><strong>Properties</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>chanFilter</td><td><code>object</code></td><td>source channel filter</td></tr><tr><td>chanFilter.symbol</td><td><code>string</code></td><td>source channel symbol</td></tr></tbody></table><p><a id="module_bfx-hf-algo.AsyncEventEmitter"></a></p><h3 id="bfx-hf-algo~asynceventemitter"><a class="header-anchor" href="#bfx-hf-algo~asynceventemitter">§</a> bfx-hf-algo~AsyncEventEmitter</h3><p>Event emitter class that provides an async <code>emit</code> function, useful for when one needs to <code>await</code> the event and all of its listeners.</p><p><strong>Kind</strong>: inner class of <a href="#module_bfx-hf-algo"><code>bfx-hf-algo</code></a></p><ul><li><a href="#module_bfx-hf-algo.AsyncEventEmitter">~AsyncEventEmitter</a><ul><li><a href="#module_bfx-hf-algo.AsyncEventEmitter+removeAllListeners">.removeAllListeners(matcher, negativeMatch)</a></li><li><a href="#module_bfx-hf-algo.AsyncEventEmitter+off">.off(cb)</a></li><li><a href="#module_bfx-hf-algo.AsyncEventEmitter+once">.once(matcher, cb)</a></li><li><a href="#module_bfx-hf-algo.AsyncEventEmitter+on">.on(matcher, cb)</a></li><li><a href="#module_bfx-hf-algo.AsyncEventEmitter+onAll">.onAll(cb)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo.AsyncEventEmitter+onAllOnce">.onAllOnce(cb)</a> ⇒ <code>Promise</code></li><li><a href="#module_bfx-hf-algo.AsyncEventEmitter+emit">.emit(eventName, …args)</a> ⇒ <code>Promise</code></li></ul></li></ul><p><a id="module_bfx-hf-algo.AsyncEventEmitter+removeAllListeners"></a></p><h4 id="asynceventemitter.removealllisteners(matcher%2C-negativematch)"><a class="header-anchor" href="#asynceventemitter.removealllisteners(matcher%2C-negativematch)">§</a> asyncEventEmitter.removeAllListeners(matcher, negativeMatch)</h4><p>Removes all listeners, only those for the specified event name, or those matching/not matching a regular expression</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-hf-algo.AsyncEventEmitter"><code>AsyncEventEmitter</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>matcher</td><td><code>string</code> | <code>RegExp</code></td><td>regular expression or string to match with</td></tr><tr><td>negativeMatch</td><td><code>boolean</code></td><td>if true, events not matching are deleted</td></tr></tbody></table><p><a id="module_bfx-hf-algo.AsyncEventEmitter+off"></a></p><h4 id="asynceventemitter.off(cb)"><a class="header-anchor" href="#asynceventemitter.off(cb)">§</a> asyncEventEmitter.off(cb)</h4><p>Remove an event handler by event name</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-hf-algo.AsyncEventEmitter"><code>AsyncEventEmitter</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bfx-hf-algo.AsyncEventEmitter+once"></a></p><h4 id="asynceventemitter.once(matcher%2C-cb)"><a class="header-anchor" href="#asynceventemitter.once(matcher%2C-cb)">§</a> asyncEventEmitter.once(matcher, cb)</h4><p>Bind an event handler that should only fire once</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-hf-algo.AsyncEventEmitter"><code>AsyncEventEmitter</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>matcher</td><td><code>string</code> | <code>RegExp</code></td><td>regular expression or string to match with</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bfx-hf-algo.AsyncEventEmitter+on"></a></p><h4 id="asynceventemitter.on(matcher%2C-cb)"><a class="header-anchor" href="#asynceventemitter.on(matcher%2C-cb)">§</a> asyncEventEmitter.on(matcher, cb)</h4><p>Bind an event handler</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-hf-algo.AsyncEventEmitter"><code>AsyncEventEmitter</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>matcher</td><td><code>string</code> | <code>RegExp</code></td><td>regular expression or string to match with</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bfx-hf-algo.AsyncEventEmitter+onAll"></a></p><h4 id="asynceventemitter.onall(cb)-%E2%87%92-promise"><a class="header-anchor" href="#asynceventemitter.onall(cb)-%E2%87%92-promise">§</a> asyncEventEmitter.onAll(cb) ⇒ <code>Promise</code></h4><p>Bind an event handler for all event types</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-hf-algo.AsyncEventEmitter"><code>AsyncEventEmitter</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves when all listeners complete</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bfx-hf-algo.AsyncEventEmitter+onAllOnce"></a></p><h4 id="asynceventemitter.onallonce(cb)-%E2%87%92-promise"><a class="header-anchor" href="#asynceventemitter.onallonce(cb)-%E2%87%92-promise">§</a> asyncEventEmitter.onAllOnce(cb) ⇒ <code>Promise</code></h4><p>Bind an event handler for all event types that only fires once</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-hf-algo.AsyncEventEmitter"><code>AsyncEventEmitter</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves when all listeners complete</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bfx-hf-algo.AsyncEventEmitter+emit"></a></p><h4 id="asynceventemitter.emit(eventname%2C-%E2%80%A6args)-%E2%87%92-promise"><a class="header-anchor" href="#asynceventemitter.emit(eventname%2C-%E2%80%A6args)-%E2%87%92-promise">§</a> asyncEventEmitter.emit(eventName, …args) ⇒ <code>Promise</code></h4><p>Emit an event; can be await’ed, and will resolve after all handlers have been called</p><p><strong>Kind</strong>: instance method of <a href="#module_bfx-hf-algo.AsyncEventEmitter"><code>AsyncEventEmitter</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves when all listeners complete</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>eventName</td><td><code>string</code></td><td>event name to emit</td></tr><tr><td>…args</td><td><code>any</code></td><td>arguments to pass to listeners</td></tr></tbody></table><p><a id="module_bfx-hf-algo/AccumulateDistribute"></a></p><h2 id="bfx-hf-algo%2Faccumulatedistribute"><a class="header-anchor" href="#bfx-hf-algo%2Faccumulatedistribute">§</a> bfx-hf-algo/AccumulateDistribute</h2><p>Accumulate/Distribute allows you to break up a large order into smaller randomized chunks, submitted at regular or irregular intervals to minimise detection by other players in the market.</p><p>By enabling the ‘Await Fill’ option, the algorithm will ensure each component fills before submitting subsequent orders. Enabling the ‘Catch Up’ flag will cause the algorithm to ignore the slice interval for the next order if previous orders have taken longer than expected to fill, thereby ensuring the time-to-fill for the entire order is not adversely affected.</p><p>The price must be manually specified as <code>limitPrice</code> for <code>LIMIT</code> order types, or as a combination of a price offset &amp; cap for <code>RELATIVE</code> order types. <code>MARKET</code> A/D orders execute using <code>MARKET</code> atomic orders, and offer no price control.</p><p>For <code>RELATIVE</code> A/D orders, the price offset &amp; cap can both be set to one of the following:</p><ul><li>Top ask</li><li>Top bid</li><li>Orderbook mid price</li><li>Last trade price</li><li>Moving Average (configurable period, time frame, candle price)</li><li>Exponential Moving Average (configurable period, time frame, candle price)</li></ul><p>The period limit for moving average targets/caps is <code>240</code>, being the number of candles returned by the Bitfinex API when subscribing to a candle data channel.</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>symbol</td><td><code>string</code></td><td>symbol to trade on</td></tr><tr><td>amount</td><td><code>number</code></td><td>total order amount</td></tr><tr><td>sliceAmount</td><td><code>number</code></td><td>individual slice order amount</td></tr><tr><td>sliceInterval</td><td><code>number</code></td><td>delay in ms between slice orders</td></tr><tr><td>[intervalDistortion]</td><td><code>number</code></td><td>slice interval distortion in %, default 0</td></tr><tr><td>[amountDistortion]</td><td><code>number</code></td><td>slice amount distortion in %, default 0</td></tr><tr><td>orderType</td><td><code>string</code></td><td>LIMIT, MARKET, RELATIVE</td></tr><tr><td>[limitPrice]</td><td><code>number</code></td><td>price for LIMIT orders</td></tr><tr><td>catchUp</td><td><code>boolean</code></td><td>if true, interval will be ignored if behind with filling slices</td></tr><tr><td>awaitFill</td><td><code>boolean</code></td><td>if true, slice orders will be kept open until filled</td></tr><tr><td>[relativeOffset]</td><td><code>object</code></td><td>price reference for RELATIVE orders</td></tr><tr><td>[relativeOffset.type]</td><td><code>string</code></td><td>ask, bid, mid, last, ma, or ema</td></tr><tr><td>[relativeOffset.delta]</td><td><code>number</code></td><td>offset distance from price reference</td></tr><tr><td>[relativeOffset.args]</td><td><code>Array.&lt;number&gt;</code></td><td>MA or EMA indicator arguments [period]</td></tr><tr><td>[relativeOffset.candlePrice]</td><td><code>string</code></td><td>‘open’, ‘high’, ‘low’, ‘close’ for MA or EMA indicators</td></tr><tr><td>[relativeOffset.candleTimeFrame]</td><td><code>string</code></td><td>‘1m’, ‘5m’, ‘1D’, etc, for MA or EMA indicators</td></tr><tr><td>[relativeCap]</td><td><code>object</code></td><td>maximum price reference for RELATIVE orders</td></tr><tr><td>[relativeCap.type]</td><td><code>string</code></td><td>ask, bid, mid, last, ma, or ema</td></tr><tr><td>[relativeCap.delta]</td><td><code>number</code></td><td>cap distance from price reference</td></tr><tr><td>[relativeCap.args]</td><td><code>Array.&lt;number&gt;</code></td><td>MA or EMA indicator arguments [period]</td></tr><tr><td>[relativeCap.candlePrice]</td><td><code>string</code></td><td>‘open’, ‘high’, ‘low’, ‘close’ for MA or EMA indicators</td></tr><tr><td>[relativeCap.candleTimeFrame]</td><td><code>string</code></td><td>‘1m’, ‘5m’, ‘1D’, etc, for MA or EMA indicators</td></tr><tr><td>_margin</td><td><code>boolean</code></td><td>if false, order type is prefixed with EXCHANGE</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js"><span class="hljs-keyword">await</span> host.startAO(<span class="hljs-string">'bfx-accumulate_distribute'</span>, {
  <span class="hljs-attr">symbol</span>: <span class="hljs-string">'tBTCUSD'</span>,
  <span class="hljs-attr">amount</span>: <span class="hljs-number">-0.2</span>,
  <span class="hljs-attr">sliceAmount</span>: <span class="hljs-number">-0.1</span>,
  <span class="hljs-attr">sliceInterval</span>: <span class="hljs-number">10000</span>,
  <span class="hljs-attr">intervalDistortion</span>: <span class="hljs-number">0.20</span>, <span class="hljs-comment">// %</span>
  <span class="hljs-attr">amountDistortion</span>: <span class="hljs-number">0.20</span>, <span class="hljs-comment">// %</span>
  <span class="hljs-attr">orderType</span>: <span class="hljs-string">'RELATIVE'</span>, <span class="hljs-comment">// MARKET, LIMIT, RELATIVE</span>
  <span class="hljs-attr">offsetType</span>: <span class="hljs-string">'ask'</span>,
  <span class="hljs-attr">offsetDelta</span>: <span class="hljs-number">-10</span>,
  <span class="hljs-attr">capType</span>: <span class="hljs-string">'bid'</span>,
  <span class="hljs-attr">capDelta</span>: <span class="hljs-number">10</span>,
  <span class="hljs-attr">submitDelay</span>: <span class="hljs-number">150</span>,
  <span class="hljs-attr">cancelDelay</span>: <span class="hljs-number">150</span>,
  <span class="hljs-attr">catchUp</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// if true &amp; behind, ignore slice interval (after prev fill)</span>
  <span class="hljs-attr">awaitFill</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// await current slice fill before continuing to next slice</span>
  <span class="hljs-attr">_margin</span>: <span class="hljs-literal">false</span>,
})
</code></pre><p><a id="module_bfx-hf-algo/AccumulateDistribute.onDataManagedBook"></a></p><h3 id="bfx-hf-algo%2Faccumulatedistribute.ondatamanagedbook(instance%2C-book%2C-meta)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Faccumulatedistribute.ondatamanagedbook(instance%2C-book%2C-meta)-%E2%87%92-promise">§</a> bfx-hf-algo/AccumulateDistribute.onDataManagedBook(instance, book, meta) ⇒ <code>Promise</code></h3><p>Saves the book on the instance state if it is needed for order generation, and it is for the configured symbol.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/AccumulateDistribute"><code>bfx-hf-algo/AccumulateDistribute</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves on completion<br><strong>See</strong>: module:bfx-hf-algo/AccumulateDistribute.hasOBRequirement</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance state</td></tr><tr><td>book</td><td><code>object</code></td><td>order book model</td></tr><tr><td>meta</td><td><a href="#module_bfx-hf-algo.AOHost..EventMetaInformation"><code>EventMetaInformation</code></a></td><td>source channel information</td></tr></tbody></table><p><a id="module_bfx-hf-algo/AccumulateDistribute.onDataManagedCandles"></a></p><h3 id="bfx-hf-algo%2Faccumulatedistribute.ondatamanagedcandles(instance%2C-candles%2C-meta)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Faccumulatedistribute.ondatamanagedcandles(instance%2C-candles%2C-meta)-%E2%87%92-promise">§</a> bfx-hf-algo/AccumulateDistribute.onDataManagedCandles(instance, candles, meta) ⇒ <code>Promise</code></h3><p>If the instance has internal indicators, they are either seeded with the initial candle dataset or updated with new candles as they arrive. The candle dataset is saved on the instance state for order generation.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/AccumulateDistribute"><code>bfx-hf-algo/AccumulateDistribute</code></a><br><strong>Returns</strong>: <code>Promise</code> - p<br><strong>See</strong></p><ul><li>module:bfx-hf-algo/AccumulateDistribute.hasIndicatorOffset</li><li>module:bfx-hf-algo/AccumulateDistribute.hasIndicatorCap</li></ul><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance state</td></tr><tr><td>candles</td><td><code>Array.&lt;object&gt;</code></td><td>array of incoming candles</td></tr><tr><td>meta</td><td><a href="#module_bfx-hf-algo.AOHost..EventMetaInformation"><code>EventMetaInformation</code></a></td><td>source channel information</td></tr></tbody></table><p><a id="module_bfx-hf-algo/AccumulateDistribute.onDataTrades"></a></p><h3 id="bfx-hf-algo%2Faccumulatedistribute.ondatatrades(instance%2C-trades%2C-meta)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Faccumulatedistribute.ondatatrades(instance%2C-trades%2C-meta)-%E2%87%92-promise">§</a> bfx-hf-algo/AccumulateDistribute.onDataTrades(instance, trades, meta) ⇒ <code>Promise</code></h3><p>Saves the received trade on the instance state if it is needed for order generation.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/AccumulateDistribute"><code>bfx-hf-algo/AccumulateDistribute</code></a><br><strong>Returns</strong>: <code>Promise</code> - p<br><strong>See</strong>: module:bfx-hf-algo/AccumulateDistribute.hasTradeRequirement</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance state</td></tr><tr><td>trades</td><td><code>Array.&lt;object&gt;</code></td><td>array of incoming trades, only the most recent is used.</td></tr><tr><td>meta</td><td><a href="#module_bfx-hf-algo.AOHost..EventMetaInformation"><code>EventMetaInformation</code></a></td><td>source channel information</td></tr></tbody></table><p><a id="module_bfx-hf-algo/AccumulateDistribute.onLifeStart"></a></p><h3 id="bfx-hf-algo%2Faccumulatedistribute.onlifestart(instance)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Faccumulatedistribute.onlifestart(instance)-%E2%87%92-promise">§</a> bfx-hf-algo/AccumulateDistribute.onLifeStart(instance) ⇒ <code>Promise</code></h3><p>If needed, creates necessary indicators for price offset &amp; cap calculation and saves them on the instance state.</p><p>Schedules the first tick of <code>self:interval_tick</code>.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/AccumulateDistribute"><code>bfx-hf-algo/AccumulateDistribute</code></a><br><strong>Returns</strong>: <code>Promise</code> - p<br><strong>See</strong></p><ul><li>module:bfx-hf-algo/AccumulateDistribute.onSelfIntervalTick</li><li>module:bfx-hf-algo/AccumulateDistribute.hasIndicatorOffset</li><li>module:bfx-hf-algo/AccumulateDistribute.hasIndicatorCap</li></ul><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance state</td></tr></tbody></table><p><a id="module_bfx-hf-algo/AccumulateDistribute.onLifeStop"></a></p><h3 id="bfx-hf-algo%2Faccumulatedistribute.onlifestop(instance)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Faccumulatedistribute.onlifestop(instance)-%E2%87%92-promise">§</a> bfx-hf-algo/AccumulateDistribute.onLifeStop(instance) ⇒ <code>Promise</code></h3><p>Clears the tick timeout in preperation for teardown</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/AccumulateDistribute"><code>bfx-hf-algo/AccumulateDistribute</code></a><br><strong>Returns</strong>: <code>Promise</code> - p</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance state</td></tr></tbody></table><p><a id="module_bfx-hf-algo/AccumulateDistribute.onOrdersOrderCancel"></a></p><h3 id="bfx-hf-algo%2Faccumulatedistribute.onordersordercancel(instance%2C-order)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Faccumulatedistribute.onordersordercancel(instance%2C-order)-%E2%87%92-promise">§</a> bfx-hf-algo/AccumulateDistribute.onOrdersOrderCancel(instance, order) ⇒ <code>Promise</code></h3><p>Triggered on atomic order cancellation; clears the tick timeout and cancels any remaining orders, before triggering the <code>exec:stop</code> event &amp; teardown</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/AccumulateDistribute"><code>bfx-hf-algo/AccumulateDistribute</code></a><br><strong>Returns</strong>: <code>Promise</code> - p</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance state</td></tr><tr><td>order</td><td><code>object</code></td><td>the order that was cancelled externally</td></tr></tbody></table><p><a id="module_bfx-hf-algo/AccumulateDistribute.onOrdersOrderFill"></a></p><h3 id="bfx-hf-algo%2Faccumulatedistribute.onordersorderfill(instance%2C-order)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Faccumulatedistribute.onordersorderfill(instance%2C-order)-%E2%87%92-promise">§</a> bfx-hf-algo/AccumulateDistribute.onOrdersOrderFill(instance, order) ⇒ <code>Promise</code></h3><p>Called when an order fills. Updates the remaining amount &amp; order timeline position (if behind, etc) on the instance state. If the instance is fully filled, the <code>exec:stop</code> event is triggered.</p><p>Otherwise, if <code>catchUp</code> is enabled and the instance is behind with order fills the next tick is re-scheduled to occur earlier in order to compensate.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/AccumulateDistribute"><code>bfx-hf-algo/AccumulateDistribute</code></a><br><strong>Returns</strong>: <code>Promise</code> - p<br><strong>See</strong>: module:bfx-hf-algo/AccumulateDistribute.scheduleTick</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance state</td></tr><tr><td>order</td><td><code>object</code></td><td>the order that filled</td></tr></tbody></table><p><a id="module_bfx-hf-algo/AccumulateDistribute.onSelfIntervalTick"></a></p><h3 id="bfx-hf-algo%2Faccumulatedistribute.onselfintervaltick(instance)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Faccumulatedistribute.onselfintervaltick(instance)-%E2%87%92-promise">§</a> bfx-hf-algo/AccumulateDistribute.onSelfIntervalTick(instance) ⇒ <code>Promise</code></h3><p>Mapped to the <code>self:interval_tick</code> event and triggered by the instance itself.</p><p>Schedules the next tick, and updates the orders-behind count on the instance state if an order is currently open (meaning it has not filled in its allocated window).</p><p>If <code>awaitFill</code> is <code>false</code>, the open order is cancelled and will be replaced by the new order on the next tick. Otherwise nothing is done in order to await a fill.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/AccumulateDistribute"><code>bfx-hf-algo/AccumulateDistribute</code></a><br><strong>Returns</strong>: <code>Promise</code> - p<br><strong>Emits</strong>: <a href="#module_bfx-hf-algo/AccumulateDistribute..event_selfSubmitOrder"><code>selfSubmitOrder</code></a><br><strong>See</strong>: module:bfx-hf-algo/AccumulateDistribute.scheduleTick</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance state</td></tr></tbody></table><p><a id="module_bfx-hf-algo/AccumulateDistribute.onSelfSubmitOrder"></a></p><h3 id="bfx-hf-algo%2Faccumulatedistribute.onselfsubmitorder(instance)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Faccumulatedistribute.onselfsubmitorder(instance)-%E2%87%92-promise">§</a> bfx-hf-algo/AccumulateDistribute.onSelfSubmitOrder(instance) ⇒ <code>Promise</code></h3><p>Mapped to the <code>self:submit_order</code> event and triggered by the instance itself.</p><p>Generates an order and submits it if the necessary data was received for price offset &amp; cap calculation.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/AccumulateDistribute"><code>bfx-hf-algo/AccumulateDistribute</code></a><br><strong>Returns</strong>: <code>Promise</code> - p<br><strong>See</strong>: module:bfx-hf-algo/AccumulateDistribute~generateOrder</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance state</td></tr></tbody></table><p><a id="module_bfx-hf-algo/AccumulateDistribute.declareChannels"></a></p><h3 id="bfx-hf-algo%2Faccumulatedistribute.declarechannels(instance%2C-host)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Faccumulatedistribute.declarechannels(instance%2C-host)-%E2%87%92-promise">§</a> bfx-hf-algo/AccumulateDistribute.declareChannels(instance, host) ⇒ <code>Promise</code></h3><p>Declares necessary data channels for price offset &amp; cap calculations. The instance may require a <code>trades</code> channel, <code>book</code> channel, or multiple <code>candle</code> channels depending on the execution parameters.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/AccumulateDistribute"><code>bfx-hf-algo/AccumulateDistribute</code></a><br><strong>Returns</strong>: <code>Promise</code> - p<br><strong>See</strong></p><ul><li>module:bfx-hf-algo/AccumulateDistribute.hasOBRequirement</li><li>module:bfx-hf-algo/AccumulateDistribute.hasTradeRequirement</li><li>module:bfx-hf-algo/AccumulateDistribute.hasIndicatorCap</li><li>module:bfx-hf-algo/AccumulateDistribute.hasIndicatorOffset</li></ul><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance state</td></tr><tr><td>host</td><td><a href="#module_bfx-hf-algo.AOHost"><code>AOHost</code></a></td><td>algo host instance for declaring channel requirements</td></tr></tbody></table><p><a id="module_bfx-hf-algo/AccumulateDistribute.declareEvents"></a></p><h3 id="bfx-hf-algo%2Faccumulatedistribute.declareevents(instance%2C-host)"><a class="header-anchor" href="#bfx-hf-algo%2Faccumulatedistribute.declareevents(instance%2C-host)">§</a> bfx-hf-algo/AccumulateDistribute.declareEvents(instance, host)</h3><p>Declares internal <code>self:submit_order</code> and <code>self:interval_tick</code> event handlers to the host for event routing.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/AccumulateDistribute"><code>bfx-hf-algo/AccumulateDistribute</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance state</td></tr><tr><td>host</td><td><a href="#module_bfx-hf-algo.AOHost"><code>AOHost</code></a></td><td>algo host instance for event mapping</td></tr></tbody></table><p><a id="module_bfx-hf-algo/AccumulateDistribute.genOrderLabel"></a></p><h3 id="bfx-hf-algo%2Faccumulatedistribute.genorderlabel(state)-%E2%87%92-string"><a class="header-anchor" href="#bfx-hf-algo%2Faccumulatedistribute.genorderlabel(state)-%E2%87%92-string">§</a> bfx-hf-algo/AccumulateDistribute.genOrderLabel(state) ⇒ <code>string</code></h3><p>Generates a label for an AccumulateDistribute instance for rendering in an UI.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/AccumulateDistribute"><code>bfx-hf-algo/AccumulateDistribute</code></a><br><strong>Returns</strong>: <code>string</code> - label</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>state</td><td><code>object</code></td><td>source instance state</td></tr><tr><td>state.args</td><td><code>object</code></td><td>source instance execution parameters</td></tr></tbody></table><p><a id="module_bfx-hf-algo/AccumulateDistribute.genPreview"></a></p><h3 id="bfx-hf-algo%2Faccumulatedistribute.genpreview(args)-%E2%87%92-array.%3Cobject%3E"><a class="header-anchor" href="#bfx-hf-algo%2Faccumulatedistribute.genpreview(args)-%E2%87%92-array.%3Cobject%3E">§</a> bfx-hf-algo/AccumulateDistribute.genPreview(args) ⇒ <code>Array.&lt;object&gt;</code></h3><p>Generates an array of preview orders which show what could be expected if an instance of AccumulateDistribute was executed with the specified parameters.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/AccumulateDistribute"><code>bfx-hf-algo/AccumulateDistribute</code></a><br><strong>Returns</strong>: <code>Array.&lt;object&gt;</code> - previewOrders</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>args</td><td><code>object</code></td><td>instance parameters</td></tr></tbody></table><p><a id="module_bfx-hf-algo/AccumulateDistribute.getUIDef"></a></p><h3 id="bfx-hf-algo%2Faccumulatedistribute.getuidef()-%E2%87%92-aouidefinition"><a class="header-anchor" href="#bfx-hf-algo%2Faccumulatedistribute.getuidef()-%E2%87%92-aouidefinition">§</a> bfx-hf-algo/AccumulateDistribute.getUIDef() ⇒ <a href="#module_bfx-hf-algo.AOUIDefinition"><code>AOUIDefinition</code></a></h3><p>Returns the UI layout definition for AccumulateDistribute, with a field for each parameter.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/AccumulateDistribute"><code>bfx-hf-algo/AccumulateDistribute</code></a><br><strong>Returns</strong>: <a href="#module_bfx-hf-algo.AOUIDefinition"><code>AOUIDefinition</code></a> - uiDef<br><a id="module_bfx-hf-algo/AccumulateDistribute.initState"></a></p><h3 id="bfx-hf-algo%2Faccumulatedistribute.initstate(args)-%E2%87%92-object"><a class="header-anchor" href="#bfx-hf-algo%2Faccumulatedistribute.initstate(args)-%E2%87%92-object">§</a> bfx-hf-algo/AccumulateDistribute.initState(args) ⇒ <code>object</code></h3><p>Creates an initial state object for an AccumulateDistribute instance to begin executing with. Generates randomized order amounts depending on the execution parameters and resets the order timeline (orders behind, etc).</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/AccumulateDistribute"><code>bfx-hf-algo/AccumulateDistribute</code></a><br><strong>Returns</strong>: <code>object</code> - initialState</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>args</td><td><code>object</code></td><td>instance execution parameters</td></tr></tbody></table><p><a id="module_bfx-hf-algo/AccumulateDistribute.processParams"></a></p><h3 id="bfx-hf-algo%2Faccumulatedistribute.processparams(data)-%E2%87%92-object"><a class="header-anchor" href="#bfx-hf-algo%2Faccumulatedistribute.processparams(data)-%E2%87%92-object">§</a> bfx-hf-algo/AccumulateDistribute.processParams(data) ⇒ <code>object</code></h3><p>Converts a raw parameters Object received from an UI into a parameters Object which can be used by an AccumulateDistribute instance for execution.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/AccumulateDistribute"><code>bfx-hf-algo/AccumulateDistribute</code></a><br><strong>Returns</strong>: <code>object</code> - parameters - ready to be passed to a fresh instance</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>data</td><td><code>object</code></td><td>raw parameters from an UI</td></tr></tbody></table><p><a id="module_bfx-hf-algo/AccumulateDistribute.serialize"></a></p><h3 id="bfx-hf-algo%2Faccumulatedistribute.serialize(state)-%E2%87%92-object"><a class="header-anchor" href="#bfx-hf-algo%2Faccumulatedistribute.serialize(state)-%E2%87%92-object">§</a> bfx-hf-algo/AccumulateDistribute.serialize(state) ⇒ <code>object</code></h3><p>Creates a POJO from an instance’s state which can be stored as JSON in a database, and later loaded with the corresponding <a href="module:bfx-hf-algo/AccumulateDistribute~unserialize">module:bfx-hf-algo/AccumulateDistribute~unserialize</a> method.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/AccumulateDistribute"><code>bfx-hf-algo/AccumulateDistribute</code></a><br><strong>Returns</strong>: <code>object</code> - pojo - DB-ready plain JS object</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>state</td><td><code>object</code></td><td>instance state to be serialized</td></tr></tbody></table><p><a id="module_bfx-hf-algo/AccumulateDistribute.unserialize"></a></p><h3 id="bfx-hf-algo%2Faccumulatedistribute.unserialize(loadedstate)-%E2%87%92-object"><a class="header-anchor" href="#bfx-hf-algo%2Faccumulatedistribute.unserialize(loadedstate)-%E2%87%92-object">§</a> bfx-hf-algo/AccumulateDistribute.unserialize(loadedState) ⇒ <code>object</code></h3><p>Converts a loaded POJO into a state object ready for live execution.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/AccumulateDistribute"><code>bfx-hf-algo/AccumulateDistribute</code></a><br><strong>Returns</strong>: <code>object</code> - instanceState - ready for execution</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>loadedState</td><td><code>object</code></td><td>data from a DB</td></tr></tbody></table><p><a id="module_bfx-hf-algo/AccumulateDistribute.validateParams"></a></p><h3 id="bfx-hf-algo%2Faccumulatedistribute.validateparams(args)-%E2%87%92-string"><a class="header-anchor" href="#bfx-hf-algo%2Faccumulatedistribute.validateparams(args)-%E2%87%92-string">§</a> bfx-hf-algo/AccumulateDistribute.validateParams(args) ⇒ <code>string</code></h3><p>Verifies that a parameters Object is valid, and all parameters are within the configured boundaries for a valid AccumulateDistribute order.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/AccumulateDistribute"><code>bfx-hf-algo/AccumulateDistribute</code></a><br><strong>Returns</strong>: <code>string</code> - error - null if parameters are valid, otherwise a description of which parameter is invalid.</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>args</td><td><code>object</code></td><td>incoming parameters</td></tr><tr><td>args.amount</td><td><code>number</code></td><td>total order amount</td></tr><tr><td>args.sliceAmount</td><td><code>number</code></td><td>individual slice order amount</td></tr><tr><td>args.sliceInterval</td><td><code>number</code></td><td>delay in ms between slice orders</td></tr><tr><td>[args.intervalDistortion]</td><td><code>number</code></td><td>slice interval distortion in %, default 0</td></tr><tr><td>[args.amountDistortion]</td><td><code>number</code></td><td>slice amount distortion in %, default 0</td></tr><tr><td>args.orderType</td><td><code>string</code></td><td>LIMIT, MARKET, RELATIVE</td></tr><tr><td>[args.limitPrice]</td><td><code>number</code></td><td>price for LIMIT orders</td></tr><tr><td>args.catchUp</td><td><code>boolean</code></td><td>if true, interval will be ignored if behind with filling slices</td></tr><tr><td>args.awaitFill</td><td><code>boolean</code></td><td>if true, slice orders will be kept open until filled</td></tr><tr><td>[args.relativeOffset]</td><td><code>object</code></td><td>price reference for RELATIVE orders</td></tr><tr><td>[args.relativeOffset.type]</td><td><code>string</code></td><td>ask, bid, mid, last, ma, or ema</td></tr><tr><td>[args.relativeOffset.delta]</td><td><code>number</code></td><td>offset distance from price reference</td></tr><tr><td>[args.relativeOffset.args]</td><td><code>Array.&lt;number&gt;</code></td><td>MA or EMA indicator arguments [period]</td></tr><tr><td>[args.relativeOffset.candlePrice]</td><td><code>string</code></td><td>‘open’, ‘high’, ‘low’, ‘close’ for MA or EMA indicators</td></tr><tr><td>[args.relativeOffset.candleTimeFrame]</td><td><code>string</code></td><td>‘1m’, ‘5m’, ‘1D’, etc, for MA or EMA indicators</td></tr><tr><td>[args.relativeCap]</td><td><code>object</code></td><td>maximum price reference for RELATIVE orders</td></tr><tr><td>[args.relativeCap.type]</td><td><code>string</code></td><td>ask, bid, mid, last, ma, or ema</td></tr><tr><td>[args.relativeCap.delta]</td><td><code>number</code></td><td>cap distance from price reference</td></tr><tr><td>[args.relativeCap.args]</td><td><code>Array.&lt;number&gt;</code></td><td>MA or EMA indicator arguments [period]</td></tr><tr><td>[args.relativeCap.candlePrice]</td><td><code>string</code></td><td>‘open’, ‘high’, ‘low’, ‘close’ for MA or EMA indicators</td></tr><tr><td>[args.relativeCap.candleTimeFrame]</td><td><code>string</code></td><td>‘1m’, ‘5m’, ‘1D’, etc, for MA or EMA indicators</td></tr></tbody></table><p><a id="module_bfx-hf-algo/AccumulateDistribute.generateOrderAmounts"></a></p><h3 id="bfx-hf-algo%2Faccumulatedistribute.generateorderamounts(args)-%E2%87%92-array.%3Cnumber%3E"><a class="header-anchor" href="#bfx-hf-algo%2Faccumulatedistribute.generateorderamounts(args)-%E2%87%92-array.%3Cnumber%3E">§</a> bfx-hf-algo/AccumulateDistribute.generateOrderAmounts(args) ⇒ <code>Array.&lt;number&gt;</code></h3><p>Generates an array of order slices which add up to the total configured amount. Randomizes them if <code>amountDistortion</code> is finite and non-zero.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/AccumulateDistribute"><code>bfx-hf-algo/AccumulateDistribute</code></a><br><strong>Returns</strong>: <code>Array.&lt;number&gt;</code> - orderAmounts</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>args</td><td><code>object</code></td><td>order parameters</td></tr><tr><td>args.amount</td><td><code>number</code></td><td>total order amount</td></tr><tr><td>args.sliceAmount</td><td><code>number</code></td><td>individual slice amount</td></tr><tr><td>args.amountDistortion</td><td><code>number</code></td><td>desired distortion in %</td></tr></tbody></table><p><a id="module_bfx-hf-algo/AccumulateDistribute.hasIndicatorCap"></a></p><h3 id="bfx-hf-algo%2Faccumulatedistribute.hasindicatorcap(args)-%E2%87%92-boolean"><a class="header-anchor" href="#bfx-hf-algo%2Faccumulatedistribute.hasindicatorcap(args)-%E2%87%92-boolean">§</a> bfx-hf-algo/AccumulateDistribute.hasIndicatorCap(args) ⇒ <code>boolean</code></h3><p>Utility function that checks if a set of execution parameters require an indicator for price cap calculation.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/AccumulateDistribute"><code>bfx-hf-algo/AccumulateDistribute</code></a><br><strong>Returns</strong>: <code>boolean</code> - hasIndicatorCap</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>args</td><td><code>object</code></td><td>instance execution parameters</td></tr></tbody></table><p><a id="module_bfx-hf-algo/AccumulateDistribute.hasIndicatorOffset"></a></p><h3 id="bfx-hf-algo%2Faccumulatedistribute.hasindicatoroffset(args)-%E2%87%92-boolean"><a class="header-anchor" href="#bfx-hf-algo%2Faccumulatedistribute.hasindicatoroffset(args)-%E2%87%92-boolean">§</a> bfx-hf-algo/AccumulateDistribute.hasIndicatorOffset(args) ⇒ <code>boolean</code></h3><p>Utility function that checks if a set of execution parameters require an indicator for price offset calculation.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/AccumulateDistribute"><code>bfx-hf-algo/AccumulateDistribute</code></a><br><strong>Returns</strong>: <code>boolean</code> - hasIndicatorOffset</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>args</td><td><code>object</code></td><td>instance execution parameters</td></tr></tbody></table><p><a id="module_bfx-hf-algo/AccumulateDistribute.hasOBRequirement"></a></p><h3 id="bfx-hf-algo%2Faccumulatedistribute.hasobrequirement(args)-%E2%87%92-boolean"><a class="header-anchor" href="#bfx-hf-algo%2Faccumulatedistribute.hasobrequirement(args)-%E2%87%92-boolean">§</a> bfx-hf-algo/AccumulateDistribute.hasOBRequirement(args) ⇒ <code>boolean</code></h3><p>Utility function that checks if a set of execution parameters require order book data for price cap or offset calculation.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/AccumulateDistribute"><code>bfx-hf-algo/AccumulateDistribute</code></a><br><strong>Returns</strong>: <code>boolean</code> - hasOBRequirement</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>args</td><td><code>object</code></td><td>instance execution parameters</td></tr></tbody></table><p><a id="module_bfx-hf-algo/AccumulateDistribute.hasTradeRequirement"></a></p><h3 id="bfx-hf-algo%2Faccumulatedistribute.hastraderequirement(args)-%E2%87%92-boolean"><a class="header-anchor" href="#bfx-hf-algo%2Faccumulatedistribute.hastraderequirement(args)-%E2%87%92-boolean">§</a> bfx-hf-algo/AccumulateDistribute.hasTradeRequirement(args) ⇒ <code>boolean</code></h3><p>Utility function that checks if a set of execution parameters require trade data for price cap or offset calculation.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/AccumulateDistribute"><code>bfx-hf-algo/AccumulateDistribute</code></a><br><strong>Returns</strong>: <code>boolean</code> - hasTradeRequirement</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>args</td><td><code>object</code></td><td>instance execution parameters</td></tr></tbody></table><p><a id="module_bfx-hf-algo/AccumulateDistribute.scheduleTick"></a></p><h3 id="bfx-hf-algo%2Faccumulatedistribute.scheduletick(instance)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Faccumulatedistribute.scheduletick(instance)-%E2%87%92-promise">§</a> bfx-hf-algo/AccumulateDistribute.scheduleTick(instance) ⇒ <code>Promise</code></h3><p>Sets a timeout to emit the <code>self:interval_tick</code> event after the configured slice interval passes, taking into account the configured interval distortion for the AccumulateDistribute instance.</p><p>If <code>catchUp</code> was enabled and the instance is behind with order fills, the next tick is always scheduled in 200ms.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/AccumulateDistribute"><code>bfx-hf-algo/AccumulateDistribute</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves on completion<br><strong>Emits</strong>: <code>module:bfx-hf-algo/AccumulateDistribute.event:selfIntervalTick</code><br><strong>See</strong>: module:bfx-hf-algo/AccumulateDistribute~onSelfIntervalTick</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance</td></tr></tbody></table><p><a id="module_bfx-hf-algo/AccumulateDistribute..generateOrder"></a></p><h3 id="bfx-hf-algo%2Faccumulatedistribute~generateorder-%E2%87%92-order"><a class="header-anchor" href="#bfx-hf-algo%2Faccumulatedistribute~generateorder-%E2%87%92-order">§</a> bfx-hf-algo/AccumulateDistribute~generateOrder ⇒ <code>Order</code></h3><p>Generates an atomic order to fill one slice of an AccumulateDistribute instance.</p><p><strong>Kind</strong>: inner property of <a href="#module_bfx-hf-algo/AccumulateDistribute"><code>bfx-hf-algo/AccumulateDistribute</code></a><br><strong>Returns</strong>: <code>Order</code> - o - null if awaiting data</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance</td></tr></tbody></table><p><a id="module_bfx-hf-algo/AccumulateDistribute..event_selfSubmitOrder"></a></p><h3 id="%E2%80%9Cselfsubmitorder%E2%80%9D"><a class="header-anchor" href="#%E2%80%9Cselfsubmitorder%E2%80%9D">§</a> “selfSubmitOrder”</h3><p>Triggers generation of the configured atomic slice, and submits it</p><p><strong>Kind</strong>: event emitted by <a href="#module_bfx-hf-algo/AccumulateDistribute"><code>bfx-hf-algo/AccumulateDistribute</code></a><br><strong>See</strong>: module:bfx-hf-algo/AccumulateDistribute~generateOrder<br><a id="module_bfx-hf-algo/AccumulateDistribute..event_selfIntervalTick"></a></p><h3 id="%E2%80%9Cselfintervaltick%E2%80%9D"><a class="header-anchor" href="#%E2%80%9Cselfintervaltick%E2%80%9D">§</a> “selfIntervalTick”</h3><p>Triggers verification of the price target, and a potential atomic order submit.</p><p><strong>Kind</strong>: event emitted by <a href="#module_bfx-hf-algo/AccumulateDistribute"><code>bfx-hf-algo/AccumulateDistribute</code></a><br><a id="module_bfx-hf-algo/DefaultErrorHandlers"></a></p><h2 id="bfx-hf-algo%2Fdefaulterrorhandlers"><a class="header-anchor" href="#bfx-hf-algo%2Fdefaulterrorhandlers">§</a> bfx-hf-algo/DefaultErrorHandlers</h2><p>Default error handlers attached to all algorithmic orders if no explicit handlers are supplied.</p><p><a id="module_bfx-hf-algo/DefaultErrorHandlers.onErrorInsufficientBalance"></a></p><h3 id="bfx-hf-algo%2Fdefaulterrorhandlers.onerrorinsufficientbalance(instance%2C-order%2C-notification)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Fdefaulterrorhandlers.onerrorinsufficientbalance(instance%2C-order%2C-notification)-%E2%87%92-promise">§</a> bfx-hf-algo/DefaultErrorHandlers.onErrorInsufficientBalance(instance, order, notification) ⇒ <code>Promise</code></h3><p>Called when an insufficient balance notification is received. Emits an <code>'exec:stop'</code> event and cancels all open orders after the teardown grace period.</p><p>Mapped to the <code>error:insufficient_balance</code> event.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/DefaultErrorHandlers"><code>bfx-hf-algo/DefaultErrorHandlers</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves on completion</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><code>object</code></td><td>AO instance</td></tr><tr><td>order</td><td><code>object</code></td><td>order which is below the min size for its symbol</td></tr><tr><td>notification</td><td><code>object</code></td><td>incoming error notification</td></tr></tbody></table><p><a id="module_bfx-hf-algo/DefaultErrorHandlers.onErrorMinimumSize"></a></p><h3 id="bfx-hf-algo%2Fdefaulterrorhandlers.onerrorminimumsize(instance%2C-order%2C-notification)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Fdefaulterrorhandlers.onerrorminimumsize(instance%2C-order%2C-notification)-%E2%87%92-promise">§</a> bfx-hf-algo/DefaultErrorHandlers.onErrorMinimumSize(instance, order, notification) ⇒ <code>Promise</code></h3><p>Called when a minimum order size error is received. Emits an <code>'exec:stop'</code> event and cancels all orders after the teardown grace period.</p><p>Mapped to the <code>error:minimum_size</code> event.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/DefaultErrorHandlers"><code>bfx-hf-algo/DefaultErrorHandlers</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves on completion</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><code>object</code></td><td>AO instance</td></tr><tr><td>order</td><td><code>object</code></td><td>order which is below the min size for its symbol</td></tr><tr><td>notification</td><td><code>object</code></td><td>barebones notification object from BFX</td></tr><tr><td>notification.text</td><td><code>string</code></td><td>original notification text</td></tr></tbody></table><p><a id="module_bfx-hf-algo/DefaultErrorHandlers.onOrdersOrderError"></a></p><h3 id="bfx-hf-algo%2Fdefaulterrorhandlers.onordersordererror(instance)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Fdefaulterrorhandlers.onordersordererror(instance)-%E2%87%92-promise">§</a> bfx-hf-algo/DefaultErrorHandlers.onOrdersOrderError(instance) ⇒ <code>Promise</code></h3><p>Called when a generic order error event is received. Emits an <code>'exec:stop'</code> event and cancels open orders after the teardown grace period.</p><p>Mapped to the <code>orders:order_error</code> event.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/DefaultErrorHandlers"><code>bfx-hf-algo/DefaultErrorHandlers</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves on completion</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><code>object</code></td><td>AO instance</td></tr></tbody></table><p><a id="module_bfx-hf-algo/Helpers"></a></p><h2 id="bfx-hf-algo%2Fhelpers"><a class="header-anchor" href="#bfx-hf-algo%2Fhelpers">§</a> bfx-hf-algo/Helpers</h2><p>All algorithmic order event handlers receive the same arguments: <code>(instance = {}, ...args)</code>. The instance contains two objects, <code>{ state = {}, h = {} }</code> with <code>state</code> being the current AO state, and <code>h</code> being a helper object.</p><p>The <code>h</code> helper object is an instance of this module bound to that specific algorithmic order, providing methods for defining its own structure (custom event names, required channels) and managing its lifecycle/execution.</p><p><a id="module_bfx-hf-algo/Helpers.clearAllTimeouts"></a></p><h3 id="bfx-hf-algo%2Fhelpers.clearalltimeouts()"><a class="header-anchor" href="#bfx-hf-algo%2Fhelpers.clearalltimeouts()">§</a> bfx-hf-algo/Helpers.clearAllTimeouts()</h3><p>Clear all timeouts for pending order submits/cancellations, called automatically by the algo host on teardown.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/Helpers"><code>bfx-hf-algo/Helpers</code></a><br><a id="module_bfx-hf-algo/Helpers.debug"></a></p><h3 id="bfx-hf-algo%2Fhelpers.debug(str%2C-%E2%80%A6args)"><a class="header-anchor" href="#bfx-hf-algo%2Fhelpers.debug(str%2C-%E2%80%A6args)">§</a> bfx-hf-algo/Helpers.debug(str, …args)</h3><p>Logs a string to the console, tagged by AO id/gid</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/Helpers"><code>bfx-hf-algo/Helpers</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>str</td><td><code>string</code></td><td>format string</td></tr><tr><td>…args</td><td><code>any</code></td><td>passed to debug()</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js">debug(<span class="hljs-string">'submitting order %s in %dms'</span>, order.toString(), delay)
</code></pre><p><a id="module_bfx-hf-algo/Helpers.emitSelf"></a></p><h3 id="bfx-hf-algo%2Fhelpers.emitself(eventname%2C-%E2%80%A6eventargs)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Fhelpers.emitself(eventname%2C-%E2%80%A6eventargs)-%E2%87%92-promise">§</a> bfx-hf-algo/Helpers.emitSelf(eventName, …eventArgs) ⇒ <code>Promise</code></h3><p>Triggeres an event on the ‘self’ section</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/Helpers"><code>bfx-hf-algo/Helpers</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves when all handlers complete</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>eventName</td><td><code>string</code></td><td>name of event to emit</td></tr><tr><td>…eventArgs</td><td><code>any</code></td><td>args passed to all handlers</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js"><span class="hljs-keyword">await</span> emitSelf(<span class="hljs-string">'submit_orders'</span>)
</code></pre><p><a id="module_bfx-hf-algo/Helpers.emitSelfAsync"></a></p><h3 id="bfx-hf-algo%2Fhelpers.emitselfasync(eventname%2C-%E2%80%A6eventargs)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Fhelpers.emitselfasync(eventname%2C-%E2%80%A6eventargs)-%E2%87%92-promise">§</a> bfx-hf-algo/Helpers.emitSelfAsync(eventName, …eventArgs) ⇒ <code>Promise</code></h3><p>Like <code>emitSelf</code> but operates after a timeout</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/Helpers"><code>bfx-hf-algo/Helpers</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves when all handlers complete</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>eventName</td><td><code>string</code></td><td>name of event to emit</td></tr><tr><td>…eventArgs</td><td><code>any</code></td><td>args passed to all handlers</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js"><span class="hljs-keyword">await</span> emitSelfAsync(<span class="hljs-string">'submit_orders'</span>)
</code></pre><p><a id="module_bfx-hf-algo/Helpers.emit"></a></p><h3 id="bfx-hf-algo%2Fhelpers.emit(eventname%2C-%E2%80%A6eventargs)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Fhelpers.emit(eventname%2C-%E2%80%A6eventargs)-%E2%87%92-promise">§</a> bfx-hf-algo/Helpers.emit(eventName, …eventArgs) ⇒ <code>Promise</code></h3><p>Triggers a generic event</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/Helpers"><code>bfx-hf-algo/Helpers</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves when all handlers complete</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>eventName</td><td><code>string</code></td><td>name of event to emit</td></tr><tr><td>…eventArgs</td><td><code>any</code></td><td>args passed to all handlers</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js"><span class="hljs-keyword">await</span> emit(<span class="hljs-string">'exec:order:submit:all'</span>, gid, [order], submitDelay)
</code></pre><p><a id="module_bfx-hf-algo/Helpers.emitAsync"></a></p><h3 id="bfx-hf-algo%2Fhelpers.emitasync(eventname%2C-%E2%80%A6eventargs)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Fhelpers.emitasync(eventname%2C-%E2%80%A6eventargs)-%E2%87%92-promise">§</a> bfx-hf-algo/Helpers.emitAsync(eventName, …eventArgs) ⇒ <code>Promise</code></h3><p>Like <code>emit</code> but operates after a timeout</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/Helpers"><code>bfx-hf-algo/Helpers</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves when all handlers complete</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>eventName</td><td><code>string</code></td><td>name of event to emit</td></tr><tr><td>…eventArgs</td><td><code>any</code></td><td>args passed to all handlers</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js"><span class="hljs-keyword">await</span> emitAsync(<span class="hljs-string">'exec:order:submit:all'</span>, gid, [order], submitDelay)
</code></pre><p><a id="module_bfx-hf-algo/Helpers.notifyUI"></a></p><h3 id="bfx-hf-algo%2Fhelpers.notifyui(level%2C-message)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Fhelpers.notifyui(level%2C-message)-%E2%87%92-promise">§</a> bfx-hf-algo/Helpers.notifyUI(level, message) ⇒ <code>Promise</code></h3><p>Triggers an UI notification, sent out via the active websocket connection</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/Helpers"><code>bfx-hf-algo/Helpers</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves when all handlers complete</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>level</td><td><code>string</code></td><td>‘info’, ‘success’, ‘error’, ‘warning’</td></tr><tr><td>message</td><td><code>string</code></td><td>notification content</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js"><span class="hljs-keyword">await</span> notifyUI(<span class="hljs-string">'info'</span>, <span class="hljs-string">`Scheduled tick in <span class="hljs-subst">${delay}</span>s`</span>)
</code></pre><p><a id="module_bfx-hf-algo/Helpers.cancelOrderWithDelay"></a></p><h3 id="bfx-hf-algo%2Fhelpers.cancelorderwithdelay(state%2C-delay%2C-order)-%E2%87%92-object"><a class="header-anchor" href="#bfx-hf-algo%2Fhelpers.cancelorderwithdelay(state%2C-delay%2C-order)-%E2%87%92-object">§</a> bfx-hf-algo/Helpers.cancelOrderWithDelay(state, delay, order) ⇒ <code>object</code></h3><p>Cancels the provided order after a delay, and removes it from the active order set.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/Helpers"><code>bfx-hf-algo/Helpers</code></a><br><strong>Returns</strong>: <code>object</code> - nextState</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>state</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>current AO instance state</td></tr><tr><td>delay</td><td><code>number</code></td><td>in ms</td></tr><tr><td>order</td><td><code>module:bfx-api-node-models.Order</code> | <code>module:bfx-api-node-models.Order~Data</code></td><td>order model or array</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js"><span class="hljs-keyword">await</span> cancelOrderWithDelay(state, <span class="hljs-number">100</span>, order)
</code></pre><p><a id="module_bfx-hf-algo/Helpers.cancelAllOrdersWithDelay"></a></p><h3 id="bfx-hf-algo%2Fhelpers.cancelallorderswithdelay(state%2C-delay)-%E2%87%92-object"><a class="header-anchor" href="#bfx-hf-algo%2Fhelpers.cancelallorderswithdelay(state%2C-delay)-%E2%87%92-object">§</a> bfx-hf-algo/Helpers.cancelAllOrdersWithDelay(state, delay) ⇒ <code>object</code></h3><p>Cancels all orders currently on the AO state after the specified delay</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/Helpers"><code>bfx-hf-algo/Helpers</code></a><br><strong>Returns</strong>: <code>object</code> - nextState</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>state</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>current AO instance state</td></tr><tr><td>delay</td><td><code>number</code></td><td>in ms</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js"><span class="hljs-keyword">await</span> cancelAllOrdersWithDelay(state, <span class="hljs-number">100</span>)
</code></pre><p><a id="module_bfx-hf-algo/Helpers.submitOrderWithDelay"></a></p><h3 id="bfx-hf-algo%2Fhelpers.submitorderwithdelay(state%2C-delay%2C-order%2C-attempt)-%E2%87%92-object"><a class="header-anchor" href="#bfx-hf-algo%2Fhelpers.submitorderwithdelay(state%2C-delay%2C-order%2C-attempt)-%E2%87%92-object">§</a> bfx-hf-algo/Helpers.submitOrderWithDelay(state, delay, order, attempt) ⇒ <code>object</code></h3><p>Submits an order after a delay, and adds it to the active order set on the AO state. Emits errors if the order fails to submit; retries up to MAX_SUBMIT_ATTEMPTS in the case of balance evaluation errors.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/Helpers"><code>bfx-hf-algo/Helpers</code></a><br><strong>Returns</strong>: <code>object</code> - nextState</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>state</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>current AO instance state</td></tr><tr><td>delay</td><td><code>number</code></td><td>delay in milliseconds</td></tr><tr><td>order</td><td><code>module:bfx-api-node-models.Order</code></td><td>order model</td></tr><tr><td>attempt</td><td><code>number</code></td><td>attempt count, max is 10 (set as a constant)</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js"><span class="hljs-keyword">await</span> submitOrderWithDelay(state, <span class="hljs-number">100</span>, order)
</code></pre><p><a id="module_bfx-hf-algo/Helpers.declareEvent"></a></p><h3 id="bfx-hf-algo%2Fhelpers.declareevent(instance%2C-aohost%2C-eventname%2C-path)"><a class="header-anchor" href="#bfx-hf-algo%2Fhelpers.declareevent(instance%2C-aohost%2C-eventname%2C-path)">§</a> bfx-hf-algo/Helpers.declareEvent(instance, aoHost, eventName, path)</h3><p>Hooks up the listener for a new event on the ‘self’ section</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/Helpers"><code>bfx-hf-algo/Helpers</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>ao instance</td></tr><tr><td>aoHost</td><td><a href="#module_bfx-hf-algo.AOHost"><code>AOHost</code></a></td><td>algo host instance</td></tr><tr><td>eventName</td><td><code>string</code></td><td>name of event to declare</td></tr><tr><td>path</td><td><code>string</code></td><td>on the ‘self’ section</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js">declareEvent(instance, host, <span class="hljs-string">'self:interval_tick'</span>, <span class="hljs-string">'interval_tick'</span>)
</code></pre><p><a id="module_bfx-hf-algo/Helpers.declareChannel"></a></p><h3 id="bfx-hf-algo%2Fhelpers.declarechannel(instance%2C-aohost%2C-channel%2C-filter)-%E2%87%92-object"><a class="header-anchor" href="#bfx-hf-algo%2Fhelpers.declarechannel(instance%2C-aohost%2C-channel%2C-filter)-%E2%87%92-object">§</a> bfx-hf-algo/Helpers.declareChannel(instance, aoHost, channel, filter) ⇒ <code>object</code></h3><p>Assigns a data channel to the provided AO instance</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/Helpers"><code>bfx-hf-algo/Helpers</code></a><br><strong>Returns</strong>: <code>object</code> - nextState</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>ao instance</td></tr><tr><td>aoHost</td><td><a href="#module_bfx-hf-algo.AOHost"><code>AOHost</code></a></td><td>algo host instance</td></tr><tr><td>channel</td><td><code>string</code></td><td>channel name, i.e. ‘ticker’</td></tr><tr><td>filter</td><td><code>object</code></td><td>channel spec, i.e. { symbol: ‘tBTCUSD’ }</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js"><span class="hljs-keyword">await</span> declareChannel(instance, host, <span class="hljs-string">'trades'</span>, { symbol })
</code></pre><p><a id="module_bfx-hf-algo/Helpers.updateState"></a></p><h3 id="bfx-hf-algo%2Fhelpers.updatestate(instance%2C-update)-%E2%87%92-object"><a class="header-anchor" href="#bfx-hf-algo%2Fhelpers.updatestate(instance%2C-update)-%E2%87%92-object">§</a> bfx-hf-algo/Helpers.updateState(instance, update) ⇒ <code>object</code></h3><p>Updates the state for the provided AO instance</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/Helpers"><code>bfx-hf-algo/Helpers</code></a><br><strong>Returns</strong>: <code>object</code> - nextState</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>ao instance</td></tr><tr><td>update</td><td><code>object</code></td><td>new state</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js"><span class="hljs-keyword">await</span> updateState(instance, { remainingAmount })
</code></pre><p><a id="module_bfx-hf-algo/Iceberg"></a></p><h2 id="bfx-hf-algo%2Ficeberg"><a class="header-anchor" href="#bfx-hf-algo%2Ficeberg">§</a> bfx-hf-algo/Iceberg</h2><p>Iceberg allows you to place a large order on the market while ensuring only a small part of it is ever filled at once. By enabling the ‘Excess As Hidden’ option, it is possible to offer up the remainder as a hidden order, allowing for minimal market disruption when executing large trades.</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>symbol</td><td><code>string</code></td><td>symbol to trade on</td></tr><tr><td>amount</td><td><code>number</code></td><td>total order amount</td></tr><tr><td>sliceAmount</td><td><code>number</code></td><td>iceberg slice order amount</td></tr><tr><td>[sliceAmountPerc]</td><td><code>number</code></td><td>optional, slice amount as % of total amount</td></tr><tr><td>excessAsHidden</td><td><code>boolean</code></td><td>whether to submit remainder as a hidden order</td></tr><tr><td>orderType</td><td><code>string</code></td><td>LIMIT or MARKET</td></tr><tr><td>[submitDelay]</td><td><code>number</code></td><td>in ms, default 1500</td></tr><tr><td>[cancelDelay]</td><td><code>number</code></td><td>in ms, default 5000</td></tr><tr><td>[_margin]</td><td><code>boolean</code></td><td>if false, prefixes order type with EXCHANGE</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js"><span class="hljs-keyword">await</span> host.startAO(<span class="hljs-string">'bfx-iceberg'</span>, {
  <span class="hljs-attr">symbol</span>: <span class="hljs-string">'tBTCUSD'</span>,
  <span class="hljs-attr">price</span>: <span class="hljs-number">21000</span>,
  <span class="hljs-attr">amount</span>: <span class="hljs-number">-0.5</span>,
  <span class="hljs-attr">sliceAmount</span>: <span class="hljs-number">-0.1</span>,
  <span class="hljs-attr">excessAsHidden</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">orderType</span>: <span class="hljs-string">'LIMIT'</span>,
  <span class="hljs-attr">submitDelay</span>: <span class="hljs-number">150</span>,
  <span class="hljs-attr">cancelDelay</span>: <span class="hljs-number">150</span>,
  <span class="hljs-attr">_margin</span>: <span class="hljs-literal">false</span>,
})
</code></pre><p><a id="module_bfx-hf-algo/Iceberg.generateOrders"></a></p><h3 id="bfx-hf-algo%2Ficeberg.generateorders-%E2%87%92-array.%3Cobject%3E"><a class="header-anchor" href="#bfx-hf-algo%2Ficeberg.generateorders-%E2%87%92-array.%3Cobject%3E">§</a> bfx-hf-algo/Iceberg.generateOrders ⇒ <code>Array.&lt;object&gt;</code></h3><p>Returns an order set for the provided Iceberg instance, including a slice order and the remaining amount as a hidden order if configured.</p><p><strong>Kind</strong>: static property of <a href="#module_bfx-hf-algo/Iceberg"><code>bfx-hf-algo/Iceberg</code></a><br><strong>Returns</strong>: <code>Array.&lt;object&gt;</code> - orders - order array<br><strong>See</strong>: module:bfx-hf-algo/Iceberg.onSelfSubmitOrders</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>state</td><td><code>object</code></td><td>instance state</td></tr></tbody></table><p><a id="module_bfx-hf-algo/Iceberg.onLifeStart"></a></p><h3 id="bfx-hf-algo%2Ficeberg.onlifestart(instance)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Ficeberg.onlifestart(instance)-%E2%87%92-promise">§</a> bfx-hf-algo/Iceberg.onLifeStart(instance) ⇒ <code>Promise</code></h3><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/Iceberg"><code>bfx-hf-algo/Iceberg</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves on completion<br><strong>Emits</strong>: <a href="#module_bfx-hf-algo/Iceberg..event_selfSubmitOrders"><code>event:selfSubmitOrders</code></a><br><strong>See</strong>: module:bfx-hf-algo/Iceberg.onSelfSubmitOrders</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance</td></tr></tbody></table><p><a id="module_bfx-hf-algo/Iceberg.onLifeStop"></a></p><h3 id="bfx-hf-algo%2Ficeberg.onlifestop(instance)"><a class="header-anchor" href="#bfx-hf-algo%2Ficeberg.onlifestop(instance)">§</a> bfx-hf-algo/Iceberg.onLifeStop(instance)</h3><p>Cancels any pending order submits prior to teardown</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/Iceberg"><code>bfx-hf-algo/Iceberg</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance</td></tr></tbody></table><p><a id="module_bfx-hf-algo/Iceberg.onOrdersOrderCancel"></a></p><h3 id="bfx-hf-algo%2Ficeberg.onordersordercancel(instance%2C-order)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Ficeberg.onordersordercancel(instance%2C-order)-%E2%87%92-promise">§</a> bfx-hf-algo/Iceberg.onOrdersOrderCancel(instance, order) ⇒ <code>Promise</code></h3><p>Called when an atomic order cancellation is detected. Cancels any open orders and emits the <code>'exec:stop'</code> event.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/Iceberg"><code>bfx-hf-algo/Iceberg</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves on completion</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance</td></tr><tr><td>order</td><td><code>module:bfx-api-node-models.Order</code></td><td>order that was cancelled</td></tr></tbody></table><p><a id="module_bfx-hf-algo/Iceberg.onOrdersOrderFill"></a></p><h3 id="bfx-hf-algo%2Ficeberg.onordersorderfill(instance%2C-order)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Ficeberg.onordersorderfill(instance%2C-order)-%E2%87%92-promise">§</a> bfx-hf-algo/Iceberg.onOrdersOrderFill(instance, order) ⇒ <code>Promise</code></h3><p>Called when an order is filled. Cancels any remaining open orders (slice or excess), updates the remaining amount on the instance state, and submits the next order set.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/Iceberg"><code>bfx-hf-algo/Iceberg</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves on completion</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance</td></tr><tr><td>order</td><td><code>module:bfx-api-node-models.Order</code></td><td>order that filled</td></tr></tbody></table><p><a id="module_bfx-hf-algo/Iceberg.onSelfSubmitOrders"></a></p><h3 id="bfx-hf-algo%2Ficeberg.onselfsubmitorders(instance)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Ficeberg.onselfsubmitorders(instance)-%E2%87%92-promise">§</a> bfx-hf-algo/Iceberg.onSelfSubmitOrders(instance) ⇒ <code>Promise</code></h3><p>Submits the next slice order, and remaining amount as a hidden order if configured.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/Iceberg"><code>bfx-hf-algo/Iceberg</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves on completion<br><strong>See</strong>: module:bfx-hf-algo/Iceberg~generateOrders</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance</td></tr></tbody></table><p><a id="module_bfx-hf-algo/Iceberg.declareEvents"></a></p><h3 id="bfx-hf-algo%2Ficeberg.declareevents(instance%2C-host)"><a class="header-anchor" href="#bfx-hf-algo%2Ficeberg.declareevents(instance%2C-host)">§</a> bfx-hf-algo/Iceberg.declareEvents(instance, host)</h3><p>Declares internal <code>self:submit_orders</code> event handler to the host for event routing.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/Iceberg"><code>bfx-hf-algo/Iceberg</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance state</td></tr><tr><td>host</td><td><a href="#module_bfx-hf-algo.AOHost"><code>AOHost</code></a></td><td>algo host instance for event mapping</td></tr></tbody></table><p><a id="module_bfx-hf-algo/Iceberg.genOrderLabel"></a></p><h3 id="bfx-hf-algo%2Ficeberg.genorderlabel(state)-%E2%87%92-string"><a class="header-anchor" href="#bfx-hf-algo%2Ficeberg.genorderlabel(state)-%E2%87%92-string">§</a> bfx-hf-algo/Iceberg.genOrderLabel(state) ⇒ <code>string</code></h3><p>Generates a label for an Iceberg instance for rendering in an UI.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/Iceberg"><code>bfx-hf-algo/Iceberg</code></a><br><strong>Returns</strong>: <code>string</code> - label</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>state</td><td><code>object</code></td><td>source instance state</td></tr><tr><td>state.args</td><td><code>object</code></td><td>source instance execution parameters</td></tr></tbody></table><p><a id="module_bfx-hf-algo/Iceberg.genPreview"></a></p><h3 id="bfx-hf-algo%2Ficeberg.genpreview(args)-%E2%87%92-array.%3Cobject%3E"><a class="header-anchor" href="#bfx-hf-algo%2Ficeberg.genpreview(args)-%E2%87%92-array.%3Cobject%3E">§</a> bfx-hf-algo/Iceberg.genPreview(args) ⇒ <code>Array.&lt;object&gt;</code></h3><p>Generates an array of preview orders which show what could be expected if an instance of Iceberg was executed with the specified parameters.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/Iceberg"><code>bfx-hf-algo/Iceberg</code></a><br><strong>Returns</strong>: <code>Array.&lt;object&gt;</code> - previewOrders</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>args</td><td><code>object</code></td><td>instance parameters</td></tr></tbody></table><p><a id="module_bfx-hf-algo/Iceberg.getUIDef"></a></p><h3 id="bfx-hf-algo%2Ficeberg.getuidef()-%E2%87%92-aouidefinition"><a class="header-anchor" href="#bfx-hf-algo%2Ficeberg.getuidef()-%E2%87%92-aouidefinition">§</a> bfx-hf-algo/Iceberg.getUIDef() ⇒ <a href="#module_bfx-hf-algo.AOUIDefinition"><code>AOUIDefinition</code></a></h3><p>Returns the UI layout definition for Iceberg, with a field for each parameter.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/Iceberg"><code>bfx-hf-algo/Iceberg</code></a><br><strong>Returns</strong>: <a href="#module_bfx-hf-algo.AOUIDefinition"><code>AOUIDefinition</code></a> - uiDef<br><a id="module_bfx-hf-algo/Iceberg.initState"></a></p><h3 id="bfx-hf-algo%2Ficeberg.initstate(args)-%E2%87%92-object"><a class="header-anchor" href="#bfx-hf-algo%2Ficeberg.initstate(args)-%E2%87%92-object">§</a> bfx-hf-algo/Iceberg.initState(args) ⇒ <code>object</code></h3><p>Creates an initial state object for an Iceberg instance to begin executing with.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/Iceberg"><code>bfx-hf-algo/Iceberg</code></a><br><strong>Returns</strong>: <code>object</code> - initialState</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>args</td><td><code>object</code></td><td>instance execution parameters</td></tr></tbody></table><p><a id="module_bfx-hf-algo/Iceberg.processParams"></a></p><h3 id="bfx-hf-algo%2Ficeberg.processparams(data)-%E2%87%92-object"><a class="header-anchor" href="#bfx-hf-algo%2Ficeberg.processparams(data)-%E2%87%92-object">§</a> bfx-hf-algo/Iceberg.processParams(data) ⇒ <code>object</code></h3><p>Converts a raw parameters Object received from an UI into a parameters Object which can be used by an Iceberg instance for execution.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/Iceberg"><code>bfx-hf-algo/Iceberg</code></a><br><strong>Returns</strong>: <code>object</code> - parameters - ready to be passed to a fresh instance</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>data</td><td><code>object</code></td><td>raw parameters from an UI</td></tr></tbody></table><p><a id="module_bfx-hf-algo/Iceberg.serialize"></a></p><h3 id="bfx-hf-algo%2Ficeberg.serialize(state)-%E2%87%92-object"><a class="header-anchor" href="#bfx-hf-algo%2Ficeberg.serialize(state)-%E2%87%92-object">§</a> bfx-hf-algo/Iceberg.serialize(state) ⇒ <code>object</code></h3><p>Creates a POJO from an instance’s state which can be stored as JSON in a database, and later loaded with the corresponding <a href="module:bfx-hf-algo/Iceberg~unserialize">module:bfx-hf-algo/Iceberg~unserialize</a> method.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/Iceberg"><code>bfx-hf-algo/Iceberg</code></a><br><strong>Returns</strong>: <code>object</code> - pojo - DB-ready plain JS object</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>state</td><td><code>object</code></td><td>instance state to be serialized</td></tr></tbody></table><p><a id="module_bfx-hf-algo/Iceberg.unserialize"></a></p><h3 id="bfx-hf-algo%2Ficeberg.unserialize(loadedstate)-%E2%87%92-object"><a class="header-anchor" href="#bfx-hf-algo%2Ficeberg.unserialize(loadedstate)-%E2%87%92-object">§</a> bfx-hf-algo/Iceberg.unserialize(loadedState) ⇒ <code>object</code></h3><p>Converts a loaded POJO into a state object ready for live execution.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/Iceberg"><code>bfx-hf-algo/Iceberg</code></a><br><strong>Returns</strong>: <code>object</code> - instanceState - ready for execution</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>loadedState</td><td><code>object</code></td><td>data from a DB</td></tr></tbody></table><p><a id="module_bfx-hf-algo/Iceberg.validateParams"></a></p><h3 id="bfx-hf-algo%2Ficeberg.validateparams(args)-%E2%87%92-string"><a class="header-anchor" href="#bfx-hf-algo%2Ficeberg.validateparams(args)-%E2%87%92-string">§</a> bfx-hf-algo/Iceberg.validateParams(args) ⇒ <code>string</code></h3><p>Verifies that a parameters Object is valid, and all parameters are within the configured boundaries for a valid Icberg order.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/Iceberg"><code>bfx-hf-algo/Iceberg</code></a><br><strong>Returns</strong>: <code>string</code> - error - null if parameters are valid, otherwise a description of which parameter is invalid.</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>args</td><td><code>object</code></td><td>incoming parameters</td></tr><tr><td>args.amount</td><td><code>number</code></td><td>total order amount</td></tr><tr><td>args.sliceAmount</td><td><code>number</code></td><td>iceberg slice order amount</td></tr><tr><td>[args.sliceAmountPerc]</td><td><code>number</code></td><td>optional, slice amount as % of total amount</td></tr><tr><td>args.excessAsHidden</td><td><code>boolean</code></td><td>whether to submit remainder as a hidden order</td></tr><tr><td>args.orderType</td><td><code>string</code></td><td>LIMIT or MARKET</td></tr><tr><td>[args.submitDelay]</td><td><code>number</code></td><td>in ms, default 1500</td></tr><tr><td>[args.cancelDelay]</td><td><code>number</code></td><td>in ms, default 5000</td></tr></tbody></table><p><a id="module_bfx-hf-algo/Iceberg.genOrderLabel"></a></p><h3 id="bfx-hf-algo%2Ficeberg.genorderlabel(state)-%E2%87%92-string-2"><a class="header-anchor" href="#bfx-hf-algo%2Ficeberg.genorderlabel(state)-%E2%87%92-string-2">§</a> bfx-hf-algo/Iceberg.genOrderLabel(state) ⇒ <code>string</code></h3><p>Generates a label for an MACrossver instance for rendering in an UI.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/Iceberg"><code>bfx-hf-algo/Iceberg</code></a><br><strong>Returns</strong>: <code>string</code> - label</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>state</td><td><code>object</code></td><td>source instance state</td></tr><tr><td>state.args</td><td><code>object</code></td><td>source instance execution parameters</td></tr></tbody></table><p><a id="module_bfx-hf-algo/Iceberg..event_selfSubmitOrders"></a></p><h3 id="%E2%80%9Cevent%3Aselfsubmitorders%E2%80%9D"><a class="header-anchor" href="#%E2%80%9Cevent%3Aselfsubmitorders%E2%80%9D">§</a> “event:selfSubmitOrders”</h3><p>Triggers order submit for both the slice and remainder if configured.</p><p><strong>Kind</strong>: event emitted by <a href="#module_bfx-hf-algo/Iceberg"><code>bfx-hf-algo/Iceberg</code></a><br><a id="module_bfx-hf-algo/MACrossover"></a></p><h2 id="bfx-hf-algo%2Fmacrossover"><a class="header-anchor" href="#bfx-hf-algo%2Fmacrossover">§</a> bfx-hf-algo/MACrossover</h2><p>MA Crossover triggers either a <code>MARKET</code> or a <code>LIMIT</code> order when two user-defined moving averages cross. Users can configure either a standard MA or an EMA individually for both long &amp; short signals.</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>symbol</td><td><code>string</code></td><td>symbol to trade on</td></tr><tr><td>orderType</td><td><code>string</code></td><td>LIMIT or MARKET</td></tr><tr><td>orderPrice</td><td><code>number</code></td><td>price for order if <code>orderType</code> is LIMIT</td></tr><tr><td>amount</td><td><code>number</code></td><td>total order amount</td></tr><tr><td>_margin</td><td><code>boolean</code></td><td>if false, order type is prefixed with EXCHANGE</td></tr><tr><td>shortType</td><td><code>string</code></td><td>MA or EMA</td></tr><tr><td>[shortEMATF]</td><td><code>string</code></td><td>candle time frame for short EMA signal</td></tr><tr><td>[shortEMAPeriod]</td><td><code>number</code></td><td>cadnel period for short EMA signal</td></tr><tr><td>[shortEMAPrice]</td><td><code>string</code></td><td>candle price key for short EMA signal</td></tr><tr><td>[shortMATF]</td><td><code>string</code></td><td>candle time frame for short MA signal</td></tr><tr><td>shortMAPeriod</td><td><code>number</code></td><td>cadnel period for short MA signal</td></tr><tr><td>[shortMAPrice]</td><td><code>string</code></td><td>candle price key for short MA signal</td></tr><tr><td>longType</td><td><code>string</code></td><td>MA or EMA</td></tr><tr><td>[longEMATF]</td><td><code>string</code></td><td>candle time frame for long EMA signal</td></tr><tr><td>[longEMAPeriod]</td><td><code>number</code></td><td>cadnel period for long EMA signal</td></tr><tr><td>[longEMAPrice]</td><td><code>string</code></td><td>candle price key for long EMA signal</td></tr><tr><td>[longMATF]</td><td><code>string</code></td><td>candle time frame for long MA signal</td></tr><tr><td>[longMAPeriod]</td><td><code>number</code></td><td>cadnel period for long MA signal</td></tr><tr><td>[longMAPrice]</td><td><code>string</code></td><td>candle price key for long MA signal</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js"><span class="hljs-keyword">await</span> host.startAO(<span class="hljs-string">'bfx-ma_crossover'</span>, {
  <span class="hljs-attr">shortType</span>: <span class="hljs-string">'EMA'</span>,
  <span class="hljs-attr">shortEMATF</span>: <span class="hljs-string">'1m'</span>,
  <span class="hljs-attr">shortEMAPeriod</span>: <span class="hljs-string">'20'</span>,
  <span class="hljs-attr">shortEMAPrice</span>: <span class="hljs-string">'close'</span>,
  <span class="hljs-attr">longType</span>: <span class="hljs-string">'EMA'</span>,
  <span class="hljs-attr">longEMATF</span>: <span class="hljs-string">'1m'</span>,
  <span class="hljs-attr">longEMAPeriod</span>: <span class="hljs-string">'100'</span>,
  <span class="hljs-attr">longEMAPrice</span>: <span class="hljs-string">'close'</span>,
  <span class="hljs-attr">amount</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attr">symbol</span>: <span class="hljs-string">'tEOSUSD'</span>,
  <span class="hljs-attr">orderType</span>: <span class="hljs-string">'MARKET'</span>,
  <span class="hljs-attr">action</span>: <span class="hljs-string">'Buy'</span>,
  <span class="hljs-attr">_margin</span>: <span class="hljs-literal">false</span>,
})
</code></pre><p><a id="module_bfx-hf-algo/MACrossover.generateOrder"></a></p><h3 id="bfx-hf-algo%2Fmacrossover.generateorder-%E2%87%92-object"><a class="header-anchor" href="#bfx-hf-algo%2Fmacrossover.generateorder-%E2%87%92-object">§</a> bfx-hf-algo/MACrossover.generateOrder ⇒ <code>object</code></h3><p>Generates the atomic order as configured in the execution parameters</p><p><strong>Kind</strong>: static property of <a href="#module_bfx-hf-algo/MACrossover"><code>bfx-hf-algo/MACrossover</code></a><br><strong>Returns</strong>: <code>object</code> - order</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance</td></tr></tbody></table><p><a id="module_bfx-hf-algo/MACrossover.onDataManagedCandles"></a></p><h3 id="bfx-hf-algo%2Fmacrossover.ondatamanagedcandles(instance%2C-candles%2C-meta)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Fmacrossover.ondatamanagedcandles(instance%2C-candles%2C-meta)-%E2%87%92-promise">§</a> bfx-hf-algo/MACrossover.onDataManagedCandles(instance, candles, meta) ⇒ <code>Promise</code></h3><p>If the instance has internal indicators, they are either seeded with the initial candle dataset or updated with new candles as they arrive. The candle dataset is saved on the instance state for order generation.</p><p>Indicator values are calculated, and if they have crossed the configured atomic order is submitted, and the <code>'exec:stop</code>’ event is emitted to stop execution and trigger teardown.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/MACrossover"><code>bfx-hf-algo/MACrossover</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves on completion</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance</td></tr><tr><td>candles</td><td><code>Array.&lt;object&gt;</code></td><td>incoming candles</td></tr><tr><td>meta</td><td><a href="#module_bfx-hf-algo.AOHost..EventMetaInformation"><code>EventMetaInformation</code></a></td><td>source channel information</td></tr></tbody></table><p><a id="module_bfx-hf-algo/MACrossover.onLifeStop"></a></p><h3 id="bfx-hf-algo%2Fmacrossover.onlifestop(instance)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Fmacrossover.onlifestop(instance)-%E2%87%92-promise">§</a> bfx-hf-algo/MACrossover.onLifeStop(instance) ⇒ <code>Promise</code></h3><p>Stub to conform to the algo order schema.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/MACrossover"><code>bfx-hf-algo/MACrossover</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves on completion</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance</td></tr></tbody></table><p><a id="module_bfx-hf-algo/MACrossover.onOrdersOrderCancel"></a></p><h3 id="bfx-hf-algo%2Fmacrossover.onordersordercancel(instance%2C-order)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Fmacrossover.onordersordercancel(instance%2C-order)-%E2%87%92-promise">§</a> bfx-hf-algo/MACrossover.onOrdersOrderCancel(instance, order) ⇒ <code>Promise</code></h3><p>Triggered when an atomic order cancellation is detected, cancels any open orders and emits the <code>'exec:stop'</code> event.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/MACrossover"><code>bfx-hf-algo/MACrossover</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves on completion</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance</td></tr><tr><td>order</td><td><code>object</code></td><td>order that was cancelled</td></tr></tbody></table><p><a id="module_bfx-hf-algo/MACrossover.onSelfSubmitOrder"></a></p><h3 id="bfx-hf-algo%2Fmacrossover.onselfsubmitorder(instance)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Fmacrossover.onselfsubmitorder(instance)-%E2%87%92-promise">§</a> bfx-hf-algo/MACrossover.onSelfSubmitOrder(instance) ⇒ <code>Promise</code></h3><p>Generates and submits the configured order.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/MACrossover"><code>bfx-hf-algo/MACrossover</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves on completion</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance</td></tr></tbody></table><p><a id="module_bfx-hf-algo/MACrossover.declareChannels"></a></p><h3 id="bfx-hf-algo%2Fmacrossover.declarechannels(instance%2C-host)"><a class="header-anchor" href="#bfx-hf-algo%2Fmacrossover.declarechannels(instance%2C-host)">§</a> bfx-hf-algo/MACrossover.declareChannels(instance, host)</h3><p>Declares necessary candle data channels for updating indicators and eventually triggering atomic order execution.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/MACrossover"><code>bfx-hf-algo/MACrossover</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance state</td></tr><tr><td>host</td><td><a href="#module_bfx-hf-algo.AOHost"><code>AOHost</code></a></td><td>algo host instance for declaring channel requirements</td></tr></tbody></table><p><a id="module_bfx-hf-algo/MACrossover.declareEvents"></a></p><h3 id="bfx-hf-algo%2Fmacrossover.declareevents(instance%2C-host)"><a class="header-anchor" href="#bfx-hf-algo%2Fmacrossover.declareevents(instance%2C-host)">§</a> bfx-hf-algo/MACrossover.declareEvents(instance, host)</h3><p>Declares the internal <code>self:submit_order</code> handler to the host for event routing.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/MACrossover"><code>bfx-hf-algo/MACrossover</code></a><br><strong>See</strong>: module:bfx-hf-algo/MACrossover.onSelfSubmitOrder</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance state</td></tr><tr><td>host</td><td><a href="#module_bfx-hf-algo.AOHost"><code>AOHost</code></a></td><td>algo host instance for event mapping</td></tr></tbody></table><p><a id="module_bfx-hf-algo/MACrossover.genPreview"></a></p><h3 id="bfx-hf-algo%2Fmacrossover.genpreview(args)-%E2%87%92-array.%3Cobject%3E"><a class="header-anchor" href="#bfx-hf-algo%2Fmacrossover.genpreview(args)-%E2%87%92-array.%3Cobject%3E">§</a> bfx-hf-algo/MACrossover.genPreview(args) ⇒ <code>Array.&lt;object&gt;</code></h3><p>Stub to conform to the algo order schema.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/MACrossover"><code>bfx-hf-algo/MACrossover</code></a><br><strong>Returns</strong>: <code>Array.&lt;object&gt;</code> - preview</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>args</td><td><code>object</code></td><td>instance arguments</td></tr></tbody></table><p><a id="module_bfx-hf-algo/MACrossover.initState"></a></p><h3 id="bfx-hf-algo%2Fmacrossover.initstate(args)-%E2%87%92-object"><a class="header-anchor" href="#bfx-hf-algo%2Fmacrossover.initstate(args)-%E2%87%92-object">§</a> bfx-hf-algo/MACrossover.initState(args) ⇒ <code>object</code></h3><p>Creates an initial state object for an MACrossover instance to begin executing with.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/MACrossover"><code>bfx-hf-algo/MACrossover</code></a><br><strong>Returns</strong>: <code>object</code> - initialState</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>args</td><td><code>object</code></td><td>instance execution parameters</td></tr></tbody></table><p><a id="module_bfx-hf-algo/MACrossover.processParams"></a></p><h3 id="bfx-hf-algo%2Fmacrossover.processparams(data)-%E2%87%92-object"><a class="header-anchor" href="#bfx-hf-algo%2Fmacrossover.processparams(data)-%E2%87%92-object">§</a> bfx-hf-algo/MACrossover.processParams(data) ⇒ <code>object</code></h3><p>Converts a raw parameters Object received from an UI into a parameters Object which can be used by an MACrossover instance for execution.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/MACrossover"><code>bfx-hf-algo/MACrossover</code></a><br><strong>Returns</strong>: <code>object</code> - parameters - ready to be passed to a fresh instance</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>data</td><td><code>object</code></td><td>raw parameters from an UI</td></tr></tbody></table><p><a id="module_bfx-hf-algo/MACrossover.serialize"></a></p><h3 id="bfx-hf-algo%2Fmacrossover.serialize(state)-%E2%87%92-object"><a class="header-anchor" href="#bfx-hf-algo%2Fmacrossover.serialize(state)-%E2%87%92-object">§</a> bfx-hf-algo/MACrossover.serialize(state) ⇒ <code>object</code></h3><p>Creates a POJO from an instance’s state which can be stored as JSON in a database, and later loaded with the corresponding <a href="module:bfx-hf-algo/MACrossover~unserialize">module:bfx-hf-algo/MACrossover~unserialize</a> method.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/MACrossover"><code>bfx-hf-algo/MACrossover</code></a><br><strong>Returns</strong>: <code>object</code> - pojo - DB-ready plain JS object</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>state</td><td><code>object</code></td><td>instance state to be serialized</td></tr></tbody></table><p><a id="module_bfx-hf-algo/MACrossover.unserialize"></a></p><h3 id="bfx-hf-algo%2Fmacrossover.unserialize(loadedstate)-%E2%87%92-object"><a class="header-anchor" href="#bfx-hf-algo%2Fmacrossover.unserialize(loadedstate)-%E2%87%92-object">§</a> bfx-hf-algo/MACrossover.unserialize(loadedState) ⇒ <code>object</code></h3><p>Converts a loaded POJO into a state object ready for live execution.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/MACrossover"><code>bfx-hf-algo/MACrossover</code></a><br><strong>Returns</strong>: <code>object</code> - instanceState - ready for execution</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>loadedState</td><td><code>object</code></td><td>data from a DB</td></tr></tbody></table><p><a id="module_bfx-hf-algo/MACrossover.validateParams"></a></p><h3 id="bfx-hf-algo%2Fmacrossover.validateparams(args)-%E2%87%92-string"><a class="header-anchor" href="#bfx-hf-algo%2Fmacrossover.validateparams(args)-%E2%87%92-string">§</a> bfx-hf-algo/MACrossover.validateParams(args) ⇒ <code>string</code></h3><p>Verifies that a parameters Object is valid, and all parameters are within the configured boundaries for a valid MACrossover order.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/MACrossover"><code>bfx-hf-algo/MACrossover</code></a><br><strong>Returns</strong>: <code>string</code> - error - null if parameters are valid, otherwise a description of which parameter is invalid.</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>args</td><td><code>object</code></td><td>incoming parameters</td></tr><tr><td>args.orderType</td><td><code>string</code></td><td>LIMIT or MARKET</td></tr><tr><td>args.orderPrice</td><td><code>number</code></td><td>price for order if <code>orderType</code> is LIMIT</td></tr><tr><td>args.amount</td><td><code>number</code></td><td>total order amount</td></tr><tr><td>args.shortType</td><td><code>string</code></td><td>MA or EMA</td></tr><tr><td>[args.shortEMATF]</td><td><code>string</code></td><td>candle time frame for short EMA signal</td></tr><tr><td>[args.shortEMAPeriod]</td><td><code>number</code></td><td>cadnel period for short EMA signal</td></tr><tr><td>[args.shortEMAPrice]</td><td><code>string</code></td><td>candle price key for short EMA signal</td></tr><tr><td>[args.shortMATF]</td><td><code>string</code></td><td>candle time frame for short MA signal</td></tr><tr><td>[args.shortMAPeriod]</td><td><code>number</code></td><td>cadnel period for short MA signal</td></tr><tr><td>[args.shortMAPrice]</td><td><code>string</code></td><td>candle price key for short MA signal</td></tr><tr><td>args.longType</td><td><code>string</code></td><td>MA or EMA</td></tr><tr><td>[args.longEMATF]</td><td><code>string</code></td><td>candle time frame for long EMA signal</td></tr><tr><td>[args.longEMAPeriod]</td><td><code>number</code></td><td>cadnel period for long EMA signal</td></tr><tr><td>[args.longEMAPrice]</td><td><code>string</code></td><td>candle price key for long EMA signal</td></tr><tr><td>[args.longMATF]</td><td><code>string</code></td><td>candle time frame for long MA signal</td></tr><tr><td>[args.longMAPeriod]</td><td><code>number</code></td><td>cadnel period for long MA signal</td></tr><tr><td>[args.longMAPrice]</td><td><code>string</code></td><td>candle price key for long MA signal</td></tr></tbody></table><p><a id="module_bfx-hf-algo/MACrossover..event_selfSubmitOrder"></a></p><h3 id="%E2%80%9Cselfsubmitorder%E2%80%9D-2"><a class="header-anchor" href="#%E2%80%9Cselfsubmitorder%E2%80%9D-2">§</a> “selfSubmitOrder”</h3><p>Triggers atomic order creation and teardown</p><p><strong>Kind</strong>: event emitted by <a href="#module_bfx-hf-algo/MACrossover"><code>bfx-hf-algo/MACrossover</code></a><br><a id="module_bfx-hf-algo/OCOCO"></a></p><h2 id="bfx-hf-algo%2Fococo"><a class="header-anchor" href="#bfx-hf-algo%2Fococo">§</a> bfx-hf-algo/OCOCO</h2><p>Order Creates OCO (or OCOCO) triggers an OCO order after an initial MARKET or LIMIT order fills.</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>symbol</td><td><code>string</code></td><td>symbol to trade on</td></tr><tr><td>orderType</td><td><code>string</code></td><td>initial order type, LIMIT or MARKET</td></tr><tr><td>orderPrice</td><td><code>number</code></td><td>price for initial order if <code>orderType</code> is LIMIT</td></tr><tr><td>amount</td><td><code>number</code></td><td>initial order amount</td></tr><tr><td>_margin</td><td><code>boolean</code></td><td>if false, order type is prefixed with EXCHANGE</td></tr><tr><td>_futures</td><td><code>boolean</code></td><td>if false, order type is prefixed with EXCHANGE</td></tr><tr><td>action</td><td><code>string</code></td><td>initial order direction, Buy or Sell</td></tr><tr><td>limitPrice</td><td><code>number</code></td><td>oco order limit price</td></tr><tr><td>stopPrice</td><td><code>number</code></td><td>oco order stop price</td></tr><tr><td>ocoAmount</td><td><code>number</code></td><td>oco order amount</td></tr><tr><td>ocoAction</td><td><code>string</code></td><td>oco order direction, Buy or Sell</td></tr><tr><td>submitDelaySec</td><td><code>number</code></td><td>submit delay in seconds</td></tr><tr><td>cancelDelaySec</td><td><code>number</code></td><td>cancel delay in seconds</td></tr><tr><td>lev</td><td><code>number</code></td><td>leverage for relevant markets</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js"><span class="hljs-keyword">await</span> host.startAO(<span class="hljs-string">'bfx-ma_crossover'</span>, {
  <span class="hljs-attr">symbol</span>: <span class="hljs-string">'tLEOUSD'</span>,
  <span class="hljs-attr">orderType</span>: <span class="hljs-string">'LIMIT'</span>,
  <span class="hljs-attr">orderPrice</span>: <span class="hljs-number">2</span>,
  <span class="hljs-attr">amount</span>: <span class="hljs-number">30</span>,
  <span class="hljs-attr">action</span>: <span class="hljs-string">'Sell'</span>,
  <span class="hljs-attr">limitPrice</span>: <span class="hljs-number">1.7</span>,
  <span class="hljs-attr">stopPrice</span>: <span class="hljs-number">2.1</span>,
  <span class="hljs-attr">ocoAmount</span>: <span class="hljs-number">30</span>,
  <span class="hljs-attr">ocoAction</span>: <span class="hljs-string">'Buy'</span>,
  <span class="hljs-attr">submitDelaySec</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">cancelDelaySec</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">margin</span>: <span class="hljs-literal">true</span>
})
</code></pre><p><a id="module_bfx-hf-algo/OCOCO.generateInitialOrder"></a></p><h3 id="bfx-hf-algo%2Fococo.generateinitialorder-%E2%87%92-object"><a class="header-anchor" href="#bfx-hf-algo%2Fococo.generateinitialorder-%E2%87%92-object">§</a> bfx-hf-algo/OCOCO.generateInitialOrder ⇒ <code>object</code></h3><p>Generates the initial atomic order as configured within the execution parameters.</p><p><strong>Kind</strong>: static property of <a href="#module_bfx-hf-algo/OCOCO"><code>bfx-hf-algo/OCOCO</code></a><br><strong>Returns</strong>: <code>object</code> - order</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance</td></tr></tbody></table><p><a id="module_bfx-hf-algo/OCOCO.generateOCOOrder"></a></p><h3 id="bfx-hf-algo%2Fococo.generateocoorder-%E2%87%92-object"><a class="header-anchor" href="#bfx-hf-algo%2Fococo.generateocoorder-%E2%87%92-object">§</a> bfx-hf-algo/OCOCO.generateOCOOrder ⇒ <code>object</code></h3><p>Generates the OCO atomic order as configured within the execution parameters.</p><p><strong>Kind</strong>: static property of <a href="#module_bfx-hf-algo/OCOCO"><code>bfx-hf-algo/OCOCO</code></a><br><strong>Returns</strong>: <code>object</code> - order</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance</td></tr></tbody></table><p><a id="module_bfx-hf-algo/OCOCO.onLifeStart"></a></p><h3 id="bfx-hf-algo%2Fococo.onlifestart(instance)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Fococo.onlifestart(instance)-%E2%87%92-promise">§</a> bfx-hf-algo/OCOCO.onLifeStart(instance) ⇒ <code>Promise</code></h3><p>Submits the initial order as configured within the execution parameters</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/OCOCO"><code>bfx-hf-algo/OCOCO</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves on completion<br><strong>See</strong>: module:bfx-hf-algo/OCOCO.onSelfSubmitInitialOrder</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance</td></tr></tbody></table><p><a id="module_bfx-hf-algo/OCOCO.onLifeStop"></a></p><h3 id="bfx-hf-algo%2Fococo.onlifestop(instance)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Fococo.onlifestop(instance)-%E2%87%92-promise">§</a> bfx-hf-algo/OCOCO.onLifeStop(instance) ⇒ <code>Promise</code></h3><p>Stub to conform to the algo order schema.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/OCOCO"><code>bfx-hf-algo/OCOCO</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves on completion</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance</td></tr></tbody></table><p><a id="module_bfx-hf-algo/OCOCO.onOrdersOrderCancel"></a></p><h3 id="bfx-hf-algo%2Fococo.onordersordercancel(instance%2C-order)"><a class="header-anchor" href="#bfx-hf-algo%2Fococo.onordersordercancel(instance%2C-order)">§</a> bfx-hf-algo/OCOCO.onOrdersOrderCancel(instance, order)</h3><p>Triggered on atomic order cancellation; cancels any open orders and triggers the <code>'exec:stop'</code> event &amp; teardown.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/OCOCO"><code>bfx-hf-algo/OCOCO</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance state</td></tr><tr><td>order</td><td><code>object</code></td><td>the order that was cancelled externally</td></tr></tbody></table><p><a id="module_bfx-hf-algo/OCOCO.onOrdersOrderFill"></a></p><h3 id="bfx-hf-algo%2Fococo.onordersorderfill(instance%2C-order)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Fococo.onordersorderfill(instance%2C-order)-%E2%87%92-promise">§</a> bfx-hf-algo/OCOCO.onOrdersOrderFill(instance, order) ⇒ <code>Promise</code></h3><p>Called on atomic order fill. If it was the initial order, the OCO order is submitted, otherwise the <code>'exec:stop'</code> event is emitted to trigger teardown.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/OCOCO"><code>bfx-hf-algo/OCOCO</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves on completion</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance</td></tr><tr><td>order</td><td><code>object</code></td><td>the order that was filled</td></tr></tbody></table><p><a id="module_bfx-hf-algo/OCOCO.onSelfSubmitInitialOrder"></a></p><h3 id="bfx-hf-algo%2Fococo.onselfsubmitinitialorder(instance)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Fococo.onselfsubmitinitialorder(instance)-%E2%87%92-promise">§</a> bfx-hf-algo/OCOCO.onSelfSubmitInitialOrder(instance) ⇒ <code>Promise</code></h3><p>Generates and submits the initial atomic order as configured within the execution parameters.</p><p>Mapped to the <code>'self:submit_initial_order'</code> event.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/OCOCO"><code>bfx-hf-algo/OCOCO</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves on completion<br><strong>See</strong>: module:bfx-hf-algo/OCOCO.generateInitialOrder</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance</td></tr></tbody></table><p><a id="module_bfx-hf-algo/OCOCO.onSelfSubmitOCOOrder"></a></p><h3 id="bfx-hf-algo%2Fococo.onselfsubmitocoorder(instance)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Fococo.onselfsubmitocoorder(instance)-%E2%87%92-promise">§</a> bfx-hf-algo/OCOCO.onSelfSubmitOCOOrder(instance) ⇒ <code>Promise</code></h3><p>Generates and submits the OCO order as configured within the execution parameters.</p><p>Mapped to the <code>'self:submit_oco_order'</code> event.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/OCOCO"><code>bfx-hf-algo/OCOCO</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves on completion<br><strong>See</strong>: module:bfx-hf-algo/OCOCO.generateOCOOrder</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance</td></tr></tbody></table><p><a id="module_bfx-hf-algo/OCOCO.module.exports"></a></p><h3 id="bfx-hf-algo%2Fococo.module.exports(instance%2C-host)"><a class="header-anchor" href="#bfx-hf-algo%2Fococo.module.exports(instance%2C-host)">§</a> bfx-hf-algo/OCOCO.module.exports(instance, host)</h3><p>Declares internal <code>self:submit_initial_order</code> and <code>self:self_submit_oco_order</code> event handlers to the host for event routing.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/OCOCO"><code>bfx-hf-algo/OCOCO</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance state</td></tr><tr><td>host</td><td><code>object</code></td><td>algo host instance for event mapping</td></tr></tbody></table><p><a id="module_bfx-hf-algo/OCOCO.genOrderLabel"></a></p><h3 id="bfx-hf-algo%2Fococo.genorderlabel(state)-%E2%87%92-string"><a class="header-anchor" href="#bfx-hf-algo%2Fococo.genorderlabel(state)-%E2%87%92-string">§</a> bfx-hf-algo/OCOCO.genOrderLabel(state) ⇒ <code>string</code></h3><p>Generates a label for an OCOCO instance for rendering in an UI.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/OCOCO"><code>bfx-hf-algo/OCOCO</code></a><br><strong>Returns</strong>: <code>string</code> - label</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>state</td><td><code>object</code></td><td>source instance state</td></tr><tr><td>state.args</td><td><code>object</code></td><td>source instance execution parameters</td></tr></tbody></table><p><a id="module_bfx-hf-algo/OCOCO.genPreview"></a></p><h3 id="bfx-hf-algo%2Fococo.genpreview(args)-%E2%87%92-array.%3Cobject%3E"><a class="header-anchor" href="#bfx-hf-algo%2Fococo.genpreview(args)-%E2%87%92-array.%3Cobject%3E">§</a> bfx-hf-algo/OCOCO.genPreview(args) ⇒ <code>Array.&lt;object&gt;</code></h3><p>Stub to conform to the algo order schema.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/OCOCO"><code>bfx-hf-algo/OCOCO</code></a><br><strong>Returns</strong>: <code>Array.&lt;object&gt;</code> - preview</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>args</td><td><code>object</code></td><td>instance arguments</td></tr></tbody></table><p><a id="module_bfx-hf-algo/OCOCO.getUIDef"></a></p><h3 id="bfx-hf-algo%2Fococo.getuidef()-%E2%87%92-object"><a class="header-anchor" href="#bfx-hf-algo%2Fococo.getuidef()-%E2%87%92-object">§</a> bfx-hf-algo/OCOCO.getUIDef() ⇒ <code>object</code></h3><p>Returns the UI layout definition for OCOCO, with a field for each parameter.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/OCOCO"><code>bfx-hf-algo/OCOCO</code></a><br><strong>Returns</strong>: <code>object</code> - uiDef<br><a id="module_bfx-hf-algo/OCOCO.initState"></a></p><h3 id="bfx-hf-algo%2Fococo.initstate(args)-%E2%87%92-object"><a class="header-anchor" href="#bfx-hf-algo%2Fococo.initstate(args)-%E2%87%92-object">§</a> bfx-hf-algo/OCOCO.initState(args) ⇒ <code>object</code></h3><p>Creates an initial state object for an OCOCO instance to begin executing with.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/OCOCO"><code>bfx-hf-algo/OCOCO</code></a><br><strong>Returns</strong>: <code>object</code> - initialState</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>args</td><td><code>object</code></td><td>instance execution parameters</td></tr></tbody></table><p><a id="module_bfx-hf-algo/OCOCO.processParams"></a></p><h3 id="bfx-hf-algo%2Fococo.processparams(data)-%E2%87%92-object"><a class="header-anchor" href="#bfx-hf-algo%2Fococo.processparams(data)-%E2%87%92-object">§</a> bfx-hf-algo/OCOCO.processParams(data) ⇒ <code>object</code></h3><p>Converts a raw parameters Object received from an UI into a parameters Object which can be used by an OCOCO instance for execution.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/OCOCO"><code>bfx-hf-algo/OCOCO</code></a><br><strong>Returns</strong>: <code>object</code> - parameters - ready to be passed to a fresh instance</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>data</td><td><code>object</code></td><td>raw parameters from an UI</td></tr></tbody></table><p><a id="module_bfx-hf-algo/OCOCO.serialize"></a></p><h3 id="bfx-hf-algo%2Fococo.serialize(state)-%E2%87%92-object"><a class="header-anchor" href="#bfx-hf-algo%2Fococo.serialize(state)-%E2%87%92-object">§</a> bfx-hf-algo/OCOCO.serialize(state) ⇒ <code>object</code></h3><p>Creates a POJO from an instance’s state which can be stored as JSON in a database, and later loaded with the corresponding <a href="module:bfx-hf-algo/OCOCO~unserialize">module:bfx-hf-algo/OCOCO~unserialize</a> method.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/OCOCO"><code>bfx-hf-algo/OCOCO</code></a><br><strong>Returns</strong>: <code>object</code> - pojo - DB-ready plain JS object</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>state</td><td><code>object</code></td><td>instance state to be serialized</td></tr></tbody></table><p><a id="module_bfx-hf-algo/OCOCO.unserialize"></a></p><h3 id="bfx-hf-algo%2Fococo.unserialize(loadedstate)-%E2%87%92-object"><a class="header-anchor" href="#bfx-hf-algo%2Fococo.unserialize(loadedstate)-%E2%87%92-object">§</a> bfx-hf-algo/OCOCO.unserialize(loadedState) ⇒ <code>object</code></h3><p>Converts a loaded POJO into a state object ready for live execution.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/OCOCO"><code>bfx-hf-algo/OCOCO</code></a><br><strong>Returns</strong>: <code>object</code> - instanceState - ready for execution</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>loadedState</td><td><code>object</code></td><td>data from a DB</td></tr></tbody></table><p><a id="module_bfx-hf-algo/OCOCO.validateParams"></a></p><h3 id="bfx-hf-algo%2Fococo.validateparams(args)-%E2%87%92-string"><a class="header-anchor" href="#bfx-hf-algo%2Fococo.validateparams(args)-%E2%87%92-string">§</a> bfx-hf-algo/OCOCO.validateParams(args) ⇒ <code>string</code></h3><p>Verifies that a parameters Object is valid, and all parameters are within the configured boundaries for a valid OCOCO order.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/OCOCO"><code>bfx-hf-algo/OCOCO</code></a><br><strong>Returns</strong>: <code>string</code> - error - null if parameters are valid, otherwise a description of which parameter is invalid.</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>args</td><td><code>object</code></td><td>incoming parameters</td></tr><tr><td>args.symbol</td><td><code>string</code></td><td>symbol to trade on</td></tr><tr><td>args.orderType</td><td><code>string</code></td><td>initial order type, LIMIT or MARKET</td></tr><tr><td>args.orderPrice</td><td><code>number</code></td><td>price for initial order if <code>orderType</code> is LIMIT</td></tr><tr><td>args.amount</td><td><code>number</code></td><td>initial order amount</td></tr><tr><td>args.action</td><td><code>string</code></td><td>initial order direction, Buy or Sell</td></tr><tr><td>args.limitPrice</td><td><code>number</code></td><td>oco order limit price</td></tr><tr><td>args.stopPrice</td><td><code>number</code></td><td>oco order stop price</td></tr><tr><td>args.ocoAmount</td><td><code>number</code></td><td>oco order amount</td></tr><tr><td>args.ocoAction</td><td><code>string</code></td><td>oco order direction, Buy or Sell</td></tr><tr><td>args.submitDelaySec</td><td><code>number</code></td><td>submit delay in seconds</td></tr><tr><td>args.cancelDelaySec</td><td><code>number</code></td><td>cancel delay in seconds</td></tr></tbody></table><p><a id="module_bfx-hf-algo/OCOCO..event_selfSubmitInitialOrder"></a></p><h3 id="%E2%80%9Cselfsubmitinitialorder%E2%80%9D"><a class="header-anchor" href="#%E2%80%9Cselfsubmitinitialorder%E2%80%9D">§</a> “selfSubmitInitialOrder”</h3><p>Triggers the creation of the initial atomic order, as configured</p><p><strong>Kind</strong>: event emitted by <a href="#module_bfx-hf-algo/OCOCO"><code>bfx-hf-algo/OCOCO</code></a><br><a id="module_bfx-hf-algo/OCOCO..event_selfSubmitOCOOrder"></a></p><h3 id="%E2%80%9Cselfsubmitocoorder%E2%80%9D"><a class="header-anchor" href="#%E2%80%9Cselfsubmitocoorder%E2%80%9D">§</a> “selfSubmitOCOOrder”</h3><p>Triggers the creation of the OCO atomic order, as configured</p><p><strong>Kind</strong>: event emitted by <a href="#module_bfx-hf-algo/OCOCO"><code>bfx-hf-algo/OCOCO</code></a><br><a id="module_bfx-hf-algo/PingPong"></a></p><h2 id="bfx-hf-algo%2Fpingpong"><a class="header-anchor" href="#bfx-hf-algo%2Fpingpong">§</a> bfx-hf-algo/PingPong</h2><p>Ping/pong submits multiple ‘ping’ orders; once a ping order fills, an associated ‘pong’ order is submitted.</p><p>Multiple ping/pong pairs can be created by specifying an order count greater than 1, a suitable min/max ping price, and a pong distance. Multiple ping orders will be created between the specified min/max prices, with the associated pongs offset by the pong distance from the ping price.</p><p>When operating in ‘endless’ mode, new ping orders will be submitted when their associated pongs fill.</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>endless</td><td><code>boolean</code></td><td>if enabled, pong fill will trigger a new ping</td></tr><tr><td>symbol</td><td><code>string</code></td><td>symbol to trade on</td></tr><tr><td>amount</td><td><code>number</code></td><td>individual ping/pong order amount</td></tr><tr><td>orderCount</td><td><code>number</code></td><td>number of ping/pong pairs to create, 1 or more</td></tr><tr><td>[pingPrice]</td><td><code>number</code></td><td>used for a single ping/pong pair</td></tr><tr><td>[pongPrice]</td><td><code>number</code></td><td>used for a single ping/pong pair</td></tr><tr><td>[pingMinPrice]</td><td><code>number</code></td><td>minimum price for ping orders</td></tr><tr><td>[pingMaxPrice]</td><td><code>number</code></td><td>maximum price for ping orders</td></tr><tr><td>[pongDistance]</td><td><code>number</code></td><td>pong offset from ping orders for multiple pairs</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js"><span class="hljs-keyword">await</span> host.startAO(<span class="hljs-string">'bfx-ping_pong'</span>, {
  <span class="hljs-attr">symbol</span>: <span class="hljs-string">'tBTCUSD'</span>,
  <span class="hljs-attr">amount</span>: <span class="hljs-number">0.5</span>,
  <span class="hljs-attr">orderCount</span>: <span class="hljs-number">5</span>,
  <span class="hljs-attr">pingMinPrice</span>: <span class="hljs-number">6000</span>,
  <span class="hljs-attr">pingMaxPrice</span>: <span class="hljs-number">6700</span>,
  <span class="hljs-attr">pongDistance</span>: <span class="hljs-number">300</span>,
  <span class="hljs-attr">submitDelay</span>: <span class="hljs-number">150</span>,
  <span class="hljs-attr">cancelDelay</span>: <span class="hljs-number">150</span>,
  <span class="hljs-attr">_margin</span>: <span class="hljs-literal">false</span>,
})
</code></pre><p><a id="module_bfx-hf-algo/PingPong.genPingPongTable"></a></p><h3 id="bfx-hf-algo%2Fpingpong.genpingpongtable-%E2%87%92-object"><a class="header-anchor" href="#bfx-hf-algo%2Fpingpong.genpingpongtable-%E2%87%92-object">§</a> bfx-hf-algo/PingPong.genPingPongTable ⇒ <code>object</code></h3><p>Generates a mapping between <code>ping</code> and <code>pong</code> prices as configured in the execution parameters.</p><p><strong>Kind</strong>: static property of <a href="#module_bfx-hf-algo/PingPong"><code>bfx-hf-algo/PingPong</code></a><br><strong>Returns</strong>: <code>object</code> - table</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>args</td><td><code>object</code></td><td>execution parameters</td></tr></tbody></table><p><a id="module_bfx-hf-algo/PingPong.onLifeStart"></a></p><h3 id="bfx-hf-algo%2Fpingpong.onlifestart(instance)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Fpingpong.onlifestart(instance)-%E2%87%92-promise">§</a> bfx-hf-algo/PingPong.onLifeStart(instance) ⇒ <code>Promise</code></h3><p>Generates and submits initial <code>ping</code> orders, along with any <code>pongs</code> that need to be submitted due to the loaded execution state.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/PingPong"><code>bfx-hf-algo/PingPong</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves on completion</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance</td></tr></tbody></table><p><a id="module_bfx-hf-algo/PingPong.onLifeStop"></a></p><h3 id="bfx-hf-algo%2Fpingpong.onlifestop(instance)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Fpingpong.onlifestop(instance)-%E2%87%92-promise">§</a> bfx-hf-algo/PingPong.onLifeStop(instance) ⇒ <code>Promise</code></h3><p>Cancels all open orders prior to teardown.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/PingPong"><code>bfx-hf-algo/PingPong</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves on completion</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance</td></tr></tbody></table><p><a id="module_bfx-hf-algo/PingPong.onOrdersOrderCancel"></a></p><h3 id="bfx-hf-algo%2Fpingpong.onordersordercancel(instance%2C-order)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Fpingpong.onordersordercancel(instance%2C-order)-%E2%87%92-promise">§</a> bfx-hf-algo/PingPong.onOrdersOrderCancel(instance, order) ⇒ <code>Promise</code></h3><p>Triggered when an atomic order cancellation is detected, and cancels any open orders before emitting an <code>exec:stop</code> event to trigger teardown.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/PingPong"><code>bfx-hf-algo/PingPong</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves on completion</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance</td></tr><tr><td>order</td><td><code>object</code></td><td>the order that was cancelled</td></tr></tbody></table><p><a id="module_bfx-hf-algo/PingPong.onOrdersOrderFill"></a></p><h3 id="bfx-hf-algo%2Fpingpong.onordersorderfill(instance%2C-order)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Fpingpong.onordersorderfill(instance%2C-order)-%E2%87%92-promise">§</a> bfx-hf-algo/PingPong.onOrdersOrderFill(instance, order) ⇒ <code>Promise</code></h3><p>Triggered on atomic order fill. If it was a <code>ping</code>, the associated <code>pong</code> is submitted. Otherwise it if was a <code>pong</code> and the instance was configured as <code>endless</code>, the associated <code>ping</code> is submitted. If not <code>endless</code>, nothing is done.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/PingPong"><code>bfx-hf-algo/PingPong</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves on completion</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance</td></tr><tr><td>order</td><td><code>object</code></td><td>the order that filled</td></tr></tbody></table><p><a id="module_bfx-hf-algo/PingPong.genOrderLabel"></a></p><h3 id="bfx-hf-algo%2Fpingpong.genorderlabel(state)-%E2%87%92-string"><a class="header-anchor" href="#bfx-hf-algo%2Fpingpong.genorderlabel(state)-%E2%87%92-string">§</a> bfx-hf-algo/PingPong.genOrderLabel(state) ⇒ <code>string</code></h3><p>Generates a label for a PingPong instance for rendering in an UI.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/PingPong"><code>bfx-hf-algo/PingPong</code></a><br><strong>Returns</strong>: <code>string</code> - label</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>state</td><td><code>object</code></td><td>source instance state</td></tr><tr><td>state.args</td><td><code>object</code></td><td>source instance execution parameters</td></tr></tbody></table><p><a id="module_bfx-hf-algo/PingPong.genPreview"></a></p><h3 id="bfx-hf-algo%2Fpingpong.genpreview(args)-%E2%87%92-array.%3Cobject%3E"><a class="header-anchor" href="#bfx-hf-algo%2Fpingpong.genpreview(args)-%E2%87%92-array.%3Cobject%3E">§</a> bfx-hf-algo/PingPong.genPreview(args) ⇒ <code>Array.&lt;object&gt;</code></h3><p>Generates an array of preview orders which show what could be expected if an instance of PingPong was executed with the specified parameters.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/PingPong"><code>bfx-hf-algo/PingPong</code></a><br><strong>Returns</strong>: <code>Array.&lt;object&gt;</code> - previewOrders</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>args</td><td><code>object</code></td><td>instance parameters</td></tr></tbody></table><p><a id="module_bfx-hf-algo/PingPong.getUIDef"></a></p><h3 id="bfx-hf-algo%2Fpingpong.getuidef()-%E2%87%92-aouidefinition"><a class="header-anchor" href="#bfx-hf-algo%2Fpingpong.getuidef()-%E2%87%92-aouidefinition">§</a> bfx-hf-algo/PingPong.getUIDef() ⇒ <a href="#module_bfx-hf-algo.AOUIDefinition"><code>AOUIDefinition</code></a></h3><p>Returns the UI layout definition for PingPong, with a field for each parameter.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/PingPong"><code>bfx-hf-algo/PingPong</code></a><br><strong>Returns</strong>: <a href="#module_bfx-hf-algo.AOUIDefinition"><code>AOUIDefinition</code></a> - uiDef<br><a id="module_bfx-hf-algo/PingPong.initState"></a></p><h3 id="bfx-hf-algo%2Fpingpong.initstate(args)-%E2%87%92-object"><a class="header-anchor" href="#bfx-hf-algo%2Fpingpong.initstate(args)-%E2%87%92-object">§</a> bfx-hf-algo/PingPong.initState(args) ⇒ <code>object</code></h3><p>Creates an initial state object for PingPong instance to begin executing with. Generates the ping-pong table price mapping.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/PingPong"><code>bfx-hf-algo/PingPong</code></a><br><strong>Returns</strong>: <code>object</code> - initialState<br><strong>See</strong>: module:bfx-hf-algo/PingPong~genPingPongTable</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>args</td><td><code>object</code></td><td>instance execution parameters</td></tr></tbody></table><p><a id="module_bfx-hf-algo/PingPong.processParams"></a></p><h3 id="bfx-hf-algo%2Fpingpong.processparams(data)-%E2%87%92-object"><a class="header-anchor" href="#bfx-hf-algo%2Fpingpong.processparams(data)-%E2%87%92-object">§</a> bfx-hf-algo/PingPong.processParams(data) ⇒ <code>object</code></h3><p>Converts a raw parameters Object received from an UI into a parameters Object which can be used by a PingPong instance for execution.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/PingPong"><code>bfx-hf-algo/PingPong</code></a><br><strong>Returns</strong>: <code>object</code> - parameters - ready to be passed to a fresh instance</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>data</td><td><code>object</code></td><td>raw parameters from an UI</td></tr></tbody></table><p><a id="module_bfx-hf-algo/PingPong.serialize"></a></p><h3 id="bfx-hf-algo%2Fpingpong.serialize(state)-%E2%87%92-object"><a class="header-anchor" href="#bfx-hf-algo%2Fpingpong.serialize(state)-%E2%87%92-object">§</a> bfx-hf-algo/PingPong.serialize(state) ⇒ <code>object</code></h3><p>Creates a POJO from an instance’s state which can be stored as JSON in a database, and later loaded with the corresponding <a href="module:bfx-hf-algo/PingPong~unserialize">module:bfx-hf-algo/PingPong~unserialize</a> method.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/PingPong"><code>bfx-hf-algo/PingPong</code></a><br><strong>Returns</strong>: <code>object</code> - pojo - DB-ready plain JS object<br><strong>See</strong>: module:bfx-hf-algo/PingPong.unserialize</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>state</td><td><code>object</code></td><td>instance state to be serialized</td></tr></tbody></table><p><a id="module_bfx-hf-algo/PingPong.unserialize"></a></p><h3 id="bfx-hf-algo%2Fpingpong.unserialize(loadedstate)-%E2%87%92-object"><a class="header-anchor" href="#bfx-hf-algo%2Fpingpong.unserialize(loadedstate)-%E2%87%92-object">§</a> bfx-hf-algo/PingPong.unserialize(loadedState) ⇒ <code>object</code></h3><p>Converts a loaded POJO into a state object ready for live execution.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/PingPong"><code>bfx-hf-algo/PingPong</code></a><br><strong>Returns</strong>: <code>object</code> - instanceState - ready for execution<br><strong>See</strong>: module:bfx-hf-algo/PingPong.serialize</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>loadedState</td><td><code>object</code></td><td>data from a DB</td></tr></tbody></table><p><a id="module_bfx-hf-algo/PingPong.validateParams"></a></p><h3 id="bfx-hf-algo%2Fpingpong.validateparams(args)-%E2%87%92-string"><a class="header-anchor" href="#bfx-hf-algo%2Fpingpong.validateparams(args)-%E2%87%92-string">§</a> bfx-hf-algo/PingPong.validateParams(args) ⇒ <code>string</code></h3><p>Verifies that a parameters Object is valid, and all parameters are within the configured boundaries for a valid PingPong order.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/PingPong"><code>bfx-hf-algo/PingPong</code></a><br><strong>Returns</strong>: <code>string</code> - error - null if parameters are valid, otherwise a description of which parameter is invalid.</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>args</td><td><code>object</code></td><td>incoming parameters</td></tr><tr><td>args.amount</td><td><code>number</code></td><td>individual ping/pong order amount</td></tr><tr><td>args.orderCount</td><td><code>number</code></td><td>number of ping/pong pairs to create, 1 or more</td></tr><tr><td>[args.pingPrice]</td><td><code>number</code></td><td>used for a single ping/pong pair</td></tr><tr><td>[args.pongPrice]</td><td><code>number</code></td><td>used for a single ping/pong pair</td></tr><tr><td>[args.pingMinPrice]</td><td><code>number</code></td><td>minimum price for ping orders</td></tr><tr><td>[args.pingMaxPrice]</td><td><code>number</code></td><td>maximum price for ping orders</td></tr><tr><td>[args.pongDistance]</td><td><code>number</code></td><td>pong offset from ping orders for multiple pairs</td></tr></tbody></table><p><a id="module_bfx-hf-algo/TWAP"></a></p><h2 id="bfx-hf-algo%2Ftwap"><a class="header-anchor" href="#bfx-hf-algo%2Ftwap">§</a> bfx-hf-algo/TWAP</h2><p>TWAP spreads an order out through time in order to fill at the time-weighted average price, calculated between the time the order is submitted to the final atomic order close.</p><p>The price can be specified as a fixed external target, such as the top bid/ask or last trade price, or as an explicit target which must be matched against the top bid/ask/last trade/etc.</p><p>Available price targets/explicit target conditions:</p><ul><li>OB side price (top bid/ask)</li><li>OB mid price</li><li>Last trade price</li></ul><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>symbol</td><td><code>string</code></td><td>symbol to trade on</td></tr><tr><td>amount</td><td><code>number</code></td><td>total order amount</td></tr><tr><td>sliceAmount</td><td><code>number</code></td><td>individual slice order amount</td></tr><tr><td>priceDelta</td><td><code>number</code></td><td>max acceptable distance from price target</td></tr><tr><td>[priceCondition]</td><td><code>string</code></td><td>MATCH_LAST, MATCH_SIDE, MATCH_MID</td></tr><tr><td>priceTarget</td><td><code>number</code> | <code>string</code></td><td>numeric, or OB_SIDE, OB_MID, LAST</td></tr><tr><td>tradeBeyondEnd</td><td><code>boolean</code></td><td>if true, slices are not cancelled after their interval expires</td></tr><tr><td>orderType</td><td><code>string</code></td><td>LIMIT or MARKET</td></tr><tr><td>_margin</td><td><code>boolean</code></td><td>if false, order type is prefixed with EXCHANGE</td></tr><tr><td>[submitDelay]</td><td><code>number</code></td><td>in ms, defaults to 1500</td></tr><tr><td>[cancelDelay]</td><td><code>number</code></td><td>in ms, defaults to 5000</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js"><span class="hljs-keyword">await</span> host.startAO(<span class="hljs-string">'bfx-twap'</span>, {
  <span class="hljs-attr">symbol</span>: <span class="hljs-string">'tBTCUSD'</span>,
  <span class="hljs-attr">amount</span>: <span class="hljs-number">-0.5</span>,
  <span class="hljs-attr">sliceAmount</span>: <span class="hljs-number">-0.1</span>,
  <span class="hljs-attr">sliceInterval</span>: <span class="hljs-number">10</span>,
  <span class="hljs-attr">priceDelta</span>: <span class="hljs-number">100</span>, <span class="hljs-comment">// max distance from price target to fulfill condition</span>
  <span class="hljs-attr">priceTarget</span>: <span class="hljs-number">16650</span>,
  <span class="hljs-attr">priceCondition</span>: TWAP.Config.PRICE_COND.MATCH_LAST,
  <span class="hljs-attr">tradeBeyondEnd</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">orderType</span>: <span class="hljs-string">'LIMIT'</span>,
  <span class="hljs-attr">submitDelay</span>: <span class="hljs-number">150</span>,
  <span class="hljs-attr">cancelDelay</span>: <span class="hljs-number">150</span>,
  <span class="hljs-attr">_margin</span>: <span class="hljs-literal">false</span>
})
</code></pre><p><a id="module_bfx-hf-algo/TWAP.generateOrder"></a></p><h3 id="bfx-hf-algo%2Ftwap.generateorder-%E2%87%92-object"><a class="header-anchor" href="#bfx-hf-algo%2Ftwap.generateorder-%E2%87%92-object">§</a> bfx-hf-algo/TWAP.generateOrder ⇒ <code>object</code></h3><p>Generates the next slice order for the provided instance, taking into account the remaining amount that needs to be filled.</p><p><strong>Kind</strong>: static property of <a href="#module_bfx-hf-algo/TWAP"><code>bfx-hf-algo/TWAP</code></a><br><strong>Returns</strong>: <code>object</code> - order - null if no amount remains</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>state</td><td><code>object</code></td><td>instance state</td></tr><tr><td>price</td><td><code>number</code></td><td>order price</td></tr></tbody></table><p><a id="module_bfx-hf-algo/TWAP.getOBPrice"></a></p><h3 id="bfx-hf-algo%2Ftwap.getobprice-%E2%87%92-number"><a class="header-anchor" href="#bfx-hf-algo%2Ftwap.getobprice-%E2%87%92-number">§</a> bfx-hf-algo/TWAP.getOBPrice ⇒ <code>number</code></h3><p>Extracts the target price from the last known order book. Null if unavailable</p><p><strong>Kind</strong>: static property of <a href="#module_bfx-hf-algo/TWAP"><code>bfx-hf-algo/TWAP</code></a><br><strong>Returns</strong>: <code>number</code> - obPrice</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>state</td><td><code>object</code></td><td>instance state</td></tr></tbody></table><p><a id="module_bfx-hf-algo/TWAP.getTradePrice"></a></p><h3 id="bfx-hf-algo%2Ftwap.gettradeprice-%E2%87%92-number"><a class="header-anchor" href="#bfx-hf-algo%2Ftwap.gettradeprice-%E2%87%92-number">§</a> bfx-hf-algo/TWAP.getTradePrice ⇒ <code>number</code></h3><p>Extracts the target price from the last known trade. Null if unavailable</p><p><strong>Kind</strong>: static property of <a href="#module_bfx-hf-algo/TWAP"><code>bfx-hf-algo/TWAP</code></a><br><strong>Returns</strong>: <code>number</code> - tradePrice</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>state</td><td><code>object</code></td><td>instance state</td></tr></tbody></table><p><a id="module_bfx-hf-algo/TWAP.hasOBTarget"></a></p><h3 id="bfx-hf-algo%2Ftwap.hasobtarget-%E2%87%92-boolean"><a class="header-anchor" href="#bfx-hf-algo%2Ftwap.hasobtarget-%E2%87%92-boolean">§</a> bfx-hf-algo/TWAP.hasOBTarget ⇒ <code>boolean</code></h3><p>Reports of the provided execution parameters have an order book price target.</p><p><strong>Kind</strong>: static property of <a href="#module_bfx-hf-algo/TWAP"><code>bfx-hf-algo/TWAP</code></a><br><strong>Returns</strong>: <code>boolean</code> - hasOBTarget</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>args</td><td><code>object</code></td><td>execution parameters</td></tr></tbody></table><p><a id="module_bfx-hf-algo/TWAP.hasTradeTarget"></a></p><h3 id="bfx-hf-algo%2Ftwap.hastradetarget-%E2%87%92-boolean"><a class="header-anchor" href="#bfx-hf-algo%2Ftwap.hastradetarget-%E2%87%92-boolean">§</a> bfx-hf-algo/TWAP.hasTradeTarget ⇒ <code>boolean</code></h3><p>Reports of the provided execution parameters have a trade price target.</p><p><strong>Kind</strong>: static property of <a href="#module_bfx-hf-algo/TWAP"><code>bfx-hf-algo/TWAP</code></a><br><strong>Returns</strong>: <code>boolean</code> - hasTradeTarget</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>args</td><td><code>object</code></td><td>execution parameters</td></tr></tbody></table><p><a id="module_bfx-hf-algo/TWAP.isTargetMet"></a></p><h3 id="bfx-hf-algo%2Ftwap.istargetmet-%E2%87%92-boolean"><a class="header-anchor" href="#bfx-hf-algo%2Ftwap.istargetmet-%E2%87%92-boolean">§</a> bfx-hf-algo/TWAP.isTargetMet ⇒ <code>boolean</code></h3><p>Reports if the price target for the provided execution parameters is met for the specified price.</p><p><strong>Kind</strong>: static property of <a href="#module_bfx-hf-algo/TWAP"><code>bfx-hf-algo/TWAP</code></a><br><strong>Returns</strong>: <code>boolean</code> - targetMet</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>args</td><td><code>object</code></td><td>execution parameters</td></tr><tr><td>price</td><td><code>number</code></td><td>price target value</td></tr></tbody></table><p><a id="module_bfx-hf-algo/TWAP.onDataManagedBook"></a></p><h3 id="bfx-hf-algo%2Ftwap.ondatamanagedbook(instance%2C-book%2C-meta)"><a class="header-anchor" href="#bfx-hf-algo%2Ftwap.ondatamanagedbook(instance%2C-book%2C-meta)">§</a> bfx-hf-algo/TWAP.onDataManagedBook(instance, book, meta)</h3><p>Saves the book on the instance state if it is needed for price target matching, and it is for the configured symbol.</p><p>Mapped to the <code>data:managedBook</code> event.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/TWAP"><code>bfx-hf-algo/TWAP</code></a><br><strong>See</strong>: module:bfx-hf-algo/TWAP.hasOBTarget</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance state</td></tr><tr><td>book</td><td><code>module:bfx-api-node-models.OrderBook</code></td><td>order book model</td></tr><tr><td>meta</td><td><a href="#module_bfx-hf-algo.AOHost..EventMetaInformation"><code>EventMetaInformation</code></a></td><td>source channel information</td></tr></tbody></table><p><a id="module_bfx-hf-algo/TWAP.onDataTrades"></a></p><h3 id="bfx-hf-algo%2Ftwap.ondatatrades(instance%2C-trades%2C-meta)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Ftwap.ondatatrades(instance%2C-trades%2C-meta)-%E2%87%92-promise">§</a> bfx-hf-algo/TWAP.onDataTrades(instance, trades, meta) ⇒ <code>Promise</code></h3><p>Saves the last trade on the instance state to be used in price matching.</p><p>Mapped to the <code>data:trades</code> event.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/TWAP"><code>bfx-hf-algo/TWAP</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves on completion</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance</td></tr><tr><td>trades</td><td><code>Array.&lt;object&gt;</code></td><td>array of incoming trades</td></tr><tr><td>meta</td><td><a href="#module_bfx-hf-algo.AOHost..EventMetaInformation"><code>EventMetaInformation</code></a></td><td>source channel information</td></tr></tbody></table><p><a id="module_bfx-hf-algo/TWAP.onLifeStart"></a></p><h3 id="bfx-hf-algo%2Ftwap.onlifestart(instance)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Ftwap.onlifestart(instance)-%E2%87%92-promise">§</a> bfx-hf-algo/TWAP.onLifeStart(instance) ⇒ <code>Promise</code></h3><p>Sets up the <code>self:interval_tick</code> interval and saves it on the state.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/TWAP"><code>bfx-hf-algo/TWAP</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves on completion</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance</td></tr></tbody></table><p><a id="module_bfx-hf-algo/TWAP.onLifeStop"></a></p><h3 id="bfx-hf-algo%2Ftwap.onlifestop(instance)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Ftwap.onlifestop(instance)-%E2%87%92-promise">§</a> bfx-hf-algo/TWAP.onLifeStop(instance) ⇒ <code>Promise</code></h3><p>Clears the tick interval prior to teardown</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/TWAP"><code>bfx-hf-algo/TWAP</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves on completion</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><code>object</code></td><td>AO instance</td></tr></tbody></table><p><a id="module_bfx-hf-algo/TWAP.onOrdersOrderCancel"></a></p><h3 id="bfx-hf-algo%2Ftwap.onordersordercancel(instance%2C-order)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Ftwap.onordersordercancel(instance%2C-order)-%E2%87%92-promise">§</a> bfx-hf-algo/TWAP.onOrdersOrderCancel(instance, order) ⇒ <code>Promise</code></h3><p>Triggered when an atomic order cancellation is detected; cancels any open orders and emits the <code>exec:stop</code> event to trigger teardown.</p><p>Mapped to the <code>orders:order_cancel</code> event.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/TWAP"><code>bfx-hf-algo/TWAP</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves on completion</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><code>object</code></td><td>AO instance</td></tr><tr><td>order</td><td><code>object</code></td><td>the order that was cancelled</td></tr></tbody></table><p><a id="module_bfx-hf-algo/TWAP.onOrdersOrderFill"></a></p><h3 id="bfx-hf-algo%2Ftwap.onordersorderfill(instance%2C-order)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Ftwap.onordersorderfill(instance%2C-order)-%E2%87%92-promise">§</a> bfx-hf-algo/TWAP.onOrdersOrderFill(instance, order) ⇒ <code>Promise</code></h3><p>Triggered when an atomic order fills. Updates the remaining amount on the instance state, and emits the <code>exec:stop</code> if the instance is now fully filled.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/TWAP"><code>bfx-hf-algo/TWAP</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves on completion</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance</td></tr><tr><td>order</td><td><code>object</code></td><td>the order that filled</td></tr></tbody></table><p><a id="module_bfx-hf-algo/TWAP.onSelfIntervalTick"></a></p><h3 id="bfx-hf-algo%2Ftwap.onselfintervaltick(instance)-%E2%87%92-promise"><a class="header-anchor" href="#bfx-hf-algo%2Ftwap.onselfintervaltick(instance)-%E2%87%92-promise">§</a> bfx-hf-algo/TWAP.onSelfIntervalTick(instance) ⇒ <code>Promise</code></h3><p>Submits the next slice order if the price condition/target is met.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/TWAP"><code>bfx-hf-algo/TWAP</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves on completion</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><a href="#module_bfx-hf-algo.AOInstance"><code>AOInstance</code></a></td><td>AO instance</td></tr></tbody></table><p><a id="module_bfx-hf-algo/TWAP.declareChannels"></a></p><h3 id="bfx-hf-algo%2Ftwap.declarechannels(instance%2C-host)"><a class="header-anchor" href="#bfx-hf-algo%2Ftwap.declarechannels(instance%2C-host)">§</a> bfx-hf-algo/TWAP.declareChannels(instance, host)</h3><p>Declares necessary data channels for price matching. The instance may require a <code>book</code> or <code>trades</code> channel depending on the execution parameters.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/TWAP"><code>bfx-hf-algo/TWAP</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><code>object</code></td><td>AO instance state</td></tr><tr><td>host</td><td><code>object</code></td><td>algo host instance for declaring channel requirements</td></tr></tbody></table><p><a id="module_bfx-hf-algo/TWAP.declareEvents"></a></p><h3 id="bfx-hf-algo%2Ftwap.declareevents(instance%2C-host)"><a class="header-anchor" href="#bfx-hf-algo%2Ftwap.declareevents(instance%2C-host)">§</a> bfx-hf-algo/TWAP.declareEvents(instance, host)</h3><p>Declares internal <code>self:interval_tick</code> event handler to the host for event routing.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/TWAP"><code>bfx-hf-algo/TWAP</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instance</td><td><code>object</code></td><td>AO instance state</td></tr><tr><td>host</td><td><code>object</code></td><td>algo host instance for event mapping</td></tr></tbody></table><p><a id="module_bfx-hf-algo/TWAP.genOrderLabel"></a></p><h3 id="bfx-hf-algo%2Ftwap.genorderlabel(state)-%E2%87%92-string"><a class="header-anchor" href="#bfx-hf-algo%2Ftwap.genorderlabel(state)-%E2%87%92-string">§</a> bfx-hf-algo/TWAP.genOrderLabel(state) ⇒ <code>string</code></h3><p>Generates a label for a TWAP instance for rendering in an UI.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/TWAP"><code>bfx-hf-algo/TWAP</code></a><br><strong>Returns</strong>: <code>string</code> - label</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>state</td><td><code>object</code></td><td>source instance state</td></tr><tr><td>state.args</td><td><code>object</code></td><td>source instance execution parameters</td></tr></tbody></table><p><a id="module_bfx-hf-algo/TWAP.genPreview"></a></p><h3 id="bfx-hf-algo%2Ftwap.genpreview(args)-%E2%87%92-array.%3Cobject%3E"><a class="header-anchor" href="#bfx-hf-algo%2Ftwap.genpreview(args)-%E2%87%92-array.%3Cobject%3E">§</a> bfx-hf-algo/TWAP.genPreview(args) ⇒ <code>Array.&lt;object&gt;</code></h3><p>Generates an array of preview orders which show what could be expected if an instance of TWAP was executed with the specified parameters.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/TWAP"><code>bfx-hf-algo/TWAP</code></a><br><strong>Returns</strong>: <code>Array.&lt;object&gt;</code> - previewOrders</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>args</td><td><code>object</code></td><td>instance parameters</td></tr></tbody></table><p><a id="module_bfx-hf-algo/TWAP.getUIDef"></a></p><h3 id="bfx-hf-algo%2Ftwap.getuidef()-%E2%87%92-aouidefinition"><a class="header-anchor" href="#bfx-hf-algo%2Ftwap.getuidef()-%E2%87%92-aouidefinition">§</a> bfx-hf-algo/TWAP.getUIDef() ⇒ <a href="#module_bfx-hf-algo.AOUIDefinition"><code>AOUIDefinition</code></a></h3><p>Returns the UI layout definition for TWAP, with a field for each parameter.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/TWAP"><code>bfx-hf-algo/TWAP</code></a><br><strong>Returns</strong>: <a href="#module_bfx-hf-algo.AOUIDefinition"><code>AOUIDefinition</code></a> - uiDef<br><a id="module_bfx-hf-algo/TWAP.initState"></a></p><h3 id="bfx-hf-algo%2Ftwap.initstate(args)-%E2%87%92-object"><a class="header-anchor" href="#bfx-hf-algo%2Ftwap.initstate(args)-%E2%87%92-object">§</a> bfx-hf-algo/TWAP.initState(args) ⇒ <code>object</code></h3><p>Creates an initial state object for a TWAP instance to begin executing with.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/TWAP"><code>bfx-hf-algo/TWAP</code></a><br><strong>Returns</strong>: <code>object</code> - initialState</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>args</td><td><code>object</code></td><td>instance execution parameters</td></tr></tbody></table><p><a id="module_bfx-hf-algo/TWAP.processParams"></a></p><h3 id="bfx-hf-algo%2Ftwap.processparams(data)-%E2%87%92-object"><a class="header-anchor" href="#bfx-hf-algo%2Ftwap.processparams(data)-%E2%87%92-object">§</a> bfx-hf-algo/TWAP.processParams(data) ⇒ <code>object</code></h3><p>Converts a raw parameters Object received from an UI into a parameters Object which can be used by TWAP instance for execution.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/TWAP"><code>bfx-hf-algo/TWAP</code></a><br><strong>Returns</strong>: <code>object</code> - parameters - ready to be passed to a fresh instance</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>data</td><td><code>object</code></td><td>raw parameters from an UI</td></tr></tbody></table><p><a id="module_bfx-hf-algo/TWAP.serialize"></a></p><h3 id="bfx-hf-algo%2Ftwap.serialize(state)-%E2%87%92-object"><a class="header-anchor" href="#bfx-hf-algo%2Ftwap.serialize(state)-%E2%87%92-object">§</a> bfx-hf-algo/TWAP.serialize(state) ⇒ <code>object</code></h3><p>Creates a POJO from an instance’s state which can be stored as JSON in a database, and later loaded with the corresponding <a href="#module_bfx-hf-algo/TWAP.unserialize">unserialize</a> method.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/TWAP"><code>bfx-hf-algo/TWAP</code></a><br><strong>Returns</strong>: <code>object</code> - pojo - DB-ready plain JS object</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>state</td><td><code>object</code></td><td>instance state to be serialized</td></tr></tbody></table><p><a id="module_bfx-hf-algo/TWAP.unserialize"></a></p><h3 id="bfx-hf-algo%2Ftwap.unserialize(loadedstate)-%E2%87%92-object"><a class="header-anchor" href="#bfx-hf-algo%2Ftwap.unserialize(loadedstate)-%E2%87%92-object">§</a> bfx-hf-algo/TWAP.unserialize(loadedState) ⇒ <code>object</code></h3><p>Converts a loaded POJO into a state object ready for live execution.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/TWAP"><code>bfx-hf-algo/TWAP</code></a><br><strong>Returns</strong>: <code>object</code> - instanceState - ready for execution</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>loadedState</td><td><code>object</code></td><td>data from a DB</td></tr></tbody></table><p><a id="module_bfx-hf-algo/TWAP.validateParams"></a></p><h3 id="bfx-hf-algo%2Ftwap.validateparams(args)-%E2%87%92-string"><a class="header-anchor" href="#bfx-hf-algo%2Ftwap.validateparams(args)-%E2%87%92-string">§</a> bfx-hf-algo/TWAP.validateParams(args) ⇒ <code>string</code></h3><p>Verifies that a parameters Object is valid, and all parameters are within the configured boundaries for a valid TWAP order.</p><p>Part of the <code>meta</code> handler section.</p><p><strong>Kind</strong>: static method of <a href="#module_bfx-hf-algo/TWAP"><code>bfx-hf-algo/TWAP</code></a><br><strong>Returns</strong>: <code>string</code> - error - null if parameters are valid, otherwise a description of which parameter is invalid.</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>args</td><td><code>object</code></td><td>incoming parameters</td></tr><tr><td>args.amount</td><td><code>number</code></td><td>total order amount</td></tr><tr><td>args.sliceAmount</td><td><code>number</code></td><td>individual slice order amount</td></tr><tr><td>args.priceDelta</td><td><code>number</code></td><td>max acceptable distance from price target</td></tr><tr><td>[args.priceCondition]</td><td><code>string</code></td><td>MATCH_LAST, MATCH_SIDE, MATCH_MID</td></tr><tr><td>args.priceTarget</td><td><code>number</code> | <code>string</code></td><td>numeric, or OB_SIDE, OB_MID, LAST</td></tr><tr><td>args.tradeBeyondEnd</td><td><code>boolean</code></td><td>if true, slices are not cancelled after their interval expires</td></tr><tr><td>args.orderType</td><td><code>string</code></td><td>LIMIT or MARKET</td></tr><tr><td>[args.submitDelay]</td><td><code>number</code></td><td>in ms, defaults to 1500</td></tr><tr><td>[args.cancelDelay]</td><td><code>number</code></td><td>in ms, defaults to 5000</td></tr></tbody></table><p><a id="module_bfx-hf-algo/TWAP..event_selfIntervalTick"></a></p><h3 id="%E2%80%9Cselfintervaltick%E2%80%9D-2"><a class="header-anchor" href="#%E2%80%9Cselfintervaltick%E2%80%9D-2">§</a> “selfIntervalTick”</h3><p>Triggers price target comparison and a potential atomic order submit</p><p><strong>Kind</strong>: event emitted by <a href="#module_bfx-hf-algo/TWAP"><code>bfx-hf-algo/TWAP</code></a></p></div></div><!--
      <div id="bfx-oss-docs-footer-bar">
        <div id="bfx-oss-docs-footer-bar__container">
          <p>Copyright © 2013-2020 iFinex Inc. All rights reserved.</p>
        </div>
      </div>
      --></div><script type="text/javascript" src="js/vendor/debug.min.js"></script><script type="text/javascript" src="js/vendor/lodash.min.js"></script><script type="text/javascript" src="js/vendor/zepto.min.js"></script><script type="text/javascript" src="js/vendor/perfect-scrollbar.min.js"></script><script type="text/javascript" src="js/main.js"></script></body></html>