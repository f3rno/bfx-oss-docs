<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width,initial-scale=1"><meta charset="utf-8"><link rel="stylesheet" type="text/css" href="css/normalize.css"><link rel="stylesheet" type="text/css" href="css/perfect-scrollbar.css"><link rel="stylesheet" type="text/css" href="css/highlightjs/night-owl.css"><link rel="stylesheet" type="text/css" href="index.css"><title>API Reference | bitfinex-api-node</title></head><body><div id="bfx-oss-docs-side-bar"><div id="bfx-oss-docs-side-bar__header"><img src="img/bfx-logo-bg-white.png" alt="Bitfinex" height="63"></div><ul><li><a href="index.html"><p>Home</p></a></li><li><a href="page_md_render_test.html"><p>Markdown Render Test</p></a></li><li><a href="page_libraries_bitfinex_api_py_README.html"><img src="svg/icons/python.svg"><p>bitfinex-api-py</p></a></li><li><a href="page_libraries_bitfinex_api_go_README.html"><img src="svg/icons/go.svg"><p>bitfinex-api-go</p></a></li><li><a href="page_libraries_bfxfixgw_README.html"><img src="svg/icons/go.svg"><p>bfxfixgw</p></a></li><li><a href="page_libraries_bitfinex_api_rb_README.html"><img src="svg/icons/ruby.svg"><p>bitfinex-api-rb</p></a></li><li class="active"><a href="page_libraries_bitfinex_api_node_README.html"><img src="svg/icons/nodejs_small.svg"><p>bitfinex-api-node</p></a><ul><li><a href="page_libraries_bitfinex_api_node_README.html"><p>- README</p></a></li><li class="active"><a href="page_libraries_bitfinex_api_node_reference.html"><p>- API Reference</p></a></li></ul></li><li><a href="page_libraries_bfx_api_mock_srv_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-mock-srv</p></a></li><li><a href="page_libraries_bfx_api_node_core_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-core</p></a></li><li><a href="page_libraries_bfx_api_node_models_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-models</p></a></li><li><a href="page_libraries_bfx_api_node_plugin_example_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-example</p></a></li><li><a href="page_libraries_bfx_api_node_plugin_managed_candles_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-managed-candles</p></a></li><li><a href="page_libraries_bfx_api_node_plugin_managed_ob_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-managed-ob</p></a></li><li><a href="page_libraries_bfx_api_node_plugin_ob_checksum_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-ob-checksum</p></a></li><li><a href="page_libraries_bfx_api_node_plugin_seq_audit_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-seq-audit</p></a></li><li><a href="page_libraries_bfx_api_node_plugin_wd_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-wd</p></a></li><li><a href="page_libraries_bfx_api_node_rest_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-rest</p></a></li><li><a href="page_libraries_bfx_api_node_util_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-util</p></a></li><li><a href="page_libraries_bfx_api_node_ws1_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-ws1</p></a></li><li><a href="page_libraries_bfx_hf_backtest_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-backtest</p></a></li><li><a href="page_libraries_bfx_hf_chart_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-chart</p></a></li><li><a href="page_libraries_bfx_hf_data_server_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-data-server</p></a></li><li><a href="page_libraries_bfx_hf_ext_plugin_bitfinex_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-ext-plugin-bitfinex</p></a></li><li><a href="page_libraries_bfx_hf_ext_plugin_dummy_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-ext-plugin-dummy</p></a></li><li><a href="page_libraries_bfx_hf_indicators_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-indicators</p></a></li><li><a href="page_libraries_bfx_hf_models_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-models</p></a></li><li><a href="page_libraries_bfx_hf_models_adapter_lowdb_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-models-adapter-lowdb</p></a></li><li><a href="page_libraries_bfx_hf_models_adapter_sql_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-models-adapter-sql</p></a></li><li><a href="page_libraries_bfx_hf_models_adapter_template_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-models-adapter-template</p></a></li><li><a href="page_libraries_bfx_hf_algo_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-algo</p></a></li><li><a href="page_libraries_bfx_hf_server_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-server</p></a></li><li><a href="page_libraries_bfx_hf_strategy_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-strategy</p></a></li><li><a href="page_libraries_bfx_hf_strategy_exec_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-strategy-exec</p></a></li><li><a href="page_libraries_bfx_hf_ui_config_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-ui-config</p></a></li><li><a href="page_libraries_bfx_hf_util_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-util</p></a></li><li><a href="page_libraries_bfx_ws2_api_audit_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-ws2-api-audit</p></a></li><li><a href="page_libraries_cbq_js_README.html"><img src="svg/icons/nodejs_small.svg"><p>cbq-js</p></a></li><li><a href="page_libraries_caron_README.html"><img src="svg/icons/nodejs_small.svg"><p>caron</p></a></li><li><a href="page_libraries_eos_name_verify_README.html"><img src="svg/icons/nodejs_small.svg"><p>eos-name-verify</p></a></li><li><a href="page_libraries_grenache_browser_http_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-browser-http</p></a></li><li><a href="page_libraries_grenache_grape_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-grape</p></a></li><li><a href="page_libraries_grenache_nodejs_base_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-nodejs-base</p></a></li><li><a href="page_libraries_grenache_nodejs_http_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-nodejs-http</p></a></li><li><a href="page_libraries_grenache_nodejs_link_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-nodejs-link</p></a></li><li><a href="page_libraries_grenache_nodejs_utp_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-nodejs-utp</p></a></li><li><a href="page_libraries_grenache_nodejs_ws_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-nodejs-ws</p></a></li><li><a href="page_libraries_grenache_nodejs_ws_tls_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-nodejs-ws-tls</p></a></li><li><a href="page_libraries_lib_js_util_currencies_README.html"><img src="svg/icons/nodejs_small.svg"><p>lib-js-util-currencies</p></a></li><li><a href="page_libraries_lib_js_util_math_README.html"><img src="svg/icons/nodejs_small.svg"><p>lib-js-util-math</p></a></li><li><a href="page_libraries_lib_js_util_number_README.html"><img src="svg/icons/nodejs_small.svg"><p>lib-js-util-number</p></a></li><li><a href="page_libraries_lib_js_util_symbol_README.html"><img src="svg/icons/nodejs_small.svg"><p>lib-js-util-symbol</p></a></li><li><a href="page_libraries_smidgen_README.html"><img src="svg/icons/nodejs_small.svg"><p>smidgen</p></a></li><li><a href="page_libraries_sunbeam_README.html"><img src="svg/icons/nodejs_small.svg"><p>sunbeam</p></a></li><li><a href="page_libraries_wasteland_README.html"><img src="svg/icons/nodejs_small.svg"><p>wasteland</p></a></li></ul></div><div id="bfx-oss-docs-content"><div id="bfx-oss-docs-header-bar"><h2>API Reference</h2><h2>bitfinex-api-node</h2></div><div id="bfx-oss-docs-content-wrapper" class="bfx-oss-docs-content-type-api-docs"><div class="bfx-oss-docs-md-content bfx-oss-docs-code-wrapper"><div id="bfx-oss-docs-api-docs-index"><div id="bfx-oss-docs-api-docs-index__inner"><ul><li><a href="#module_bitfinex-api-node">bitfinex-api-node</a><ul><li><em>static</em><ul><li><a href="#module_bitfinex-api-node.CandleChannel">.CandleChannel</a> : <code>object</code></li><li><a href="#module_bitfinex-api-node.OrderBookChannel">.OrderBookChannel</a> : <code>object</code></li><li><a href="#module_bitfinex-api-node.TickerChannel">.TickerChannel</a> : <code>object</code></li><li><a href="#module_bitfinex-api-node.TradeChannel">.TradeChannel</a> : <code>object</code></li></ul></li><li><em>inner</em><ul><li><a href="#module_bitfinex-api-node.ClientManager">~ClientManager</a><ul><li><a href="#new_module_bitfinex-api-node.ClientManager_new">new ClientManager(opts)</a></li><li><a href="#module_bitfinex-api-node.ClientManager+rest">.rest([version], [extraOpts])</a> ⇒ <code>module:bfx-api-node-rest.RESTv1</code> | <code>module:bfx-api-node-rest.RESTv2</code></li><li><a href="#module_bitfinex-api-node.ClientManager+ws">.ws([version], [extraOpts])</a> ⇒ <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a> | <code>module:bfx-api-node-ws1.WSv1</code></li></ul></li><li><a href="#module_bitfinex-api-node.WS2Manager">~WS2Manager</a> ⇐ <code>EventEmitter</code><ul><li><a href="#new_module_bitfinex-api-node.WS2Manager_new">new WS2Manager(socketArgs, [authArgs])</a></li><li><em>instance</em><ul><li><a href="#module_bitfinex-api-node.WS2Manager+setAuthArgs">.setAuthArgs(args)</a></li><li><a href="#module_bitfinex-api-node.WS2Manager+getAuthArgs">.getAuthArgs()</a> ⇒ <code>object</code></li><li><a href="#module_bitfinex-api-node.WS2Manager+reconnect">.reconnect()</a> ⇒ <code>Promise</code></li><li><a href="#module_bitfinex-api-node.WS2Manager+close">.close()</a> ⇒ <code>Promise</code></li><li><a href="#module_bitfinex-api-node.WS2Manager+getNumSockets">.getNumSockets()</a> ⇒ <code>number</code></li><li><a href="#module_bitfinex-api-node.WS2Manager+getSocket">.getSocket(i)</a> ⇒ <a href="#module_bitfinex-api-node.WS2Manager..SocketState"><code>SocketState</code></a></li><li><a href="#module_bitfinex-api-node.WS2Manager+getSocketInfo">.getSocketInfo()</a> ⇒ <code>Array.&lt;object&gt;</code></li><li><a href="#module_bitfinex-api-node.WS2Manager+auth">.auth(args)</a></li><li><a href="#module_bitfinex-api-node.WS2Manager+openSocket">.openSocket()</a> ⇒ <a href="#module_bitfinex-api-node.WS2Manager..SocketState"><code>SocketState</code></a></li><li><a href="#module_bitfinex-api-node.WS2Manager+getAuthenticatedSocket">.getAuthenticatedSocket()</a> ⇒ <a href="#module_bitfinex-api-node.WS2Manager..SocketState"><code>SocketState</code></a></li><li><a href="#module_bitfinex-api-node.WS2Manager+getFreeDataSocket">.getFreeDataSocket()</a> ⇒ <a href="#module_bitfinex-api-node.WS2Manager..SocketState"><code>SocketState</code></a></li><li><a href="#module_bitfinex-api-node.WS2Manager+getSocketWithDataChannel">.getSocketWithDataChannel(type, filter)</a> ⇒ <a href="#module_bitfinex-api-node.WS2Manager..SocketState"><code>SocketState</code></a></li><li><a href="#module_bitfinex-api-node.WS2Manager+getSocketWithChannel">.getSocketWithChannel(chanId)</a> ⇒ <a href="#module_bitfinex-api-node.WS2Manager..SocketState"><code>SocketState</code></a></li><li><a href="#module_bitfinex-api-node.WS2Manager+getSocketWithSubRef">.getSocketWithSubRef(channel, identifier)</a> ⇒ <a href="#module_bitfinex-api-node.WS2Manager..SocketState"><code>SocketState</code></a></li><li><a href="#module_bitfinex-api-node.WS2Manager+withAllSockets">.withAllSockets(cb)</a></li><li><a href="#module_bitfinex-api-node.WS2Manager+subscribe">.subscribe(type, ident, filter)</a></li><li><a href="#module_bitfinex-api-node.WS2Manager+managedUnsubscribe">.managedUnsubscribe(channel, identifier)</a></li><li><a href="#module_bitfinex-api-node.WS2Manager+unsubscribe">.unsubscribe(chanId)</a></li><li><a href="#module_bitfinex-api-node.WS2Manager+subscribeTicker">.subscribeTicker(symbol)</a></li><li><a href="#module_bitfinex-api-node.WS2Manager+subscribeTrades">.subscribeTrades(symbol)</a></li><li><a href="#module_bitfinex-api-node.WS2Manager+subscribeOrderBook">.subscribeOrderBook(symbol, [prec], [len], [freq])</a></li><li><a href="#module_bitfinex-api-node.WS2Manager+subscribeCandles">.subscribeCandles(key)</a></li><li><a href="#module_bitfinex-api-node.WS2Manager+onCandle">.onCandle(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WS2Manager+onOrderBook">.onOrderBook(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WS2Manager+onTrades">.onTrades(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WS2Manager+onTicker">.onTicker(opts, cb)</a></li></ul></li><li><em>static</em><ul><li><a href="#module_bitfinex-api-node.WS2Manager.getDataChannelCount">.getDataChannelCount(s)</a> ⇒ <code>number</code></li></ul></li><li><em>inner</em><ul><li><a href="#module_bitfinex-api-node.WS2Manager..SocketState">~SocketState</a> : <code>object</code></li></ul></li></ul></li><li><a href="#module_bitfinex-api-node.WSv2">~WSv2</a> ⇐ <code>EventEmitter</code><ul><li><a href="#new_module_bitfinex-api-node.WSv2_new">new WSv2([config])</a></li><li><em>instance</em><ul><li><a href="#module_bitfinex-api-node.WSv2+getURL">.getURL()</a> ⇒ <code>string</code></li><li><a href="#module_bitfinex-api-node.WSv2+usesAgent">.usesAgent()</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+updateAuthArgs">.updateAuthArgs(args)</a></li><li><a href="#module_bitfinex-api-node.WSv2+getAuthArgs">.getAuthArgs()</a> ⇒ <code>object</code></li><li><a href="#module_bitfinex-api-node.WSv2+setAPICredentials">.setAPICredentials(apiKey, apiSecret)</a></li><li><a href="#module_bitfinex-api-node.WSv2+getDataChannelCount">.getDataChannelCount()</a> ⇒ <code>number</code></li><li><a href="#module_bitfinex-api-node.WSv2+hasChannel">.hasChannel(chanId)</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+hasSubscriptionRef">.hasSubscriptionRef(channel, identifier)</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+getDataChannelId">.getDataChannelId(type, filter)</a> ⇒ <code>number</code></li><li><a href="#module_bitfinex-api-node.WSv2+hasDataChannel">.hasDataChannel(type, filter)</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+open">.open()</a> ⇒ <code>Promise</code></li><li><a href="#module_bitfinex-api-node.WSv2+close">.close(code, reason)</a> ⇒ <code>Promise</code></li><li><a href="#module_bitfinex-api-node.WSv2+auth">.auth([calc], [dms])</a> ⇒ <code>Promise</code></li><li><a href="#module_bitfinex-api-node.WSv2+reconnect">.reconnect()</a> ⇒ <code>Promise</code></li><li><a href="#module_bitfinex-api-node.WSv2+getOB">.getOB(symbol)</a> ⇒ <code>module:bfx-api-node-models.OrderBook</code></li><li><a href="#module_bitfinex-api-node.WSv2+getLosslessOB">.getLosslessOB(symbol)</a> ⇒ <code>module:bfx-api-node-models.OrderBook</code></li><li><a href="#module_bitfinex-api-node.WSv2+getCandles">.getCandles(key)</a> ⇒ <code>module:bfx-api-node-models.Candle</code> | <code>Array.&lt;module:bfx-api-node-models.Candle~ArrayData&gt;</code></li><li><a href="#module_bitfinex-api-node.WSv2+managedSubscribe">.managedSubscribe(channel, identifier, payload)</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+managedUnsubscribe">.managedUnsubscribe(channel, identifier)</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+getChannelData">.getChannelData(opts)</a> ⇒ <code>object</code></li><li><a href="#module_bitfinex-api-node.WSv2+send">.send(msg)</a></li><li><a href="#module_bitfinex-api-node.WSv2+sequencingEnabled">.sequencingEnabled()</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+enableSequencing">.enableSequencing(args)</a> ⇒ <code>Promise</code></li><li><a href="#module_bitfinex-api-node.WSv2+enableFlag">.enableFlag(flag)</a> ⇒ <code>Promise</code></li><li><a href="#module_bitfinex-api-node.WSv2+isFlagEnabled">.isFlagEnabled(flag)</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+onServerRestart">.onServerRestart(cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onMaintenanceStart">.onMaintenanceStart(cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onMaintenanceEnd">.onMaintenanceEnd(cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+subscribe">.subscribe(channel, payload)</a></li><li><a href="#module_bitfinex-api-node.WSv2+subscribeTicker">.subscribeTicker(symbol)</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+subscribeTrades">.subscribeTrades(symbol)</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+subscribeOrderBook">.subscribeOrderBook(symbol, prec, len)</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+subscribeCandles">.subscribeCandles(key)</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+subscribeStatus">.subscribeStatus(key)</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+unsubscribe">.unsubscribe(chanId)</a></li><li><a href="#module_bitfinex-api-node.WSv2+unsubscribeTicker">.unsubscribeTicker(symbol)</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+unsubscribeTrades">.unsubscribeTrades(symbol)</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+unsubscribeOrderBook">.unsubscribeOrderBook(symbol)</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+unsubscribeCandles">.unsubscribeCandles(symbol, frame)</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+unsubscribeStatus">.unsubscribeStatus(key)</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+removeListeners">.removeListeners(cbGID)</a></li><li><a href="#module_bitfinex-api-node.WSv2+requestCalc">.requestCalc(prefixes)</a></li><li><a href="#module_bitfinex-api-node.WSv2+submitOrder">.submitOrder(order)</a> ⇒ <code>Promise</code></li><li><a href="#module_bitfinex-api-node.WSv2+updateOrder">.updateOrder(changes)</a> ⇒ <code>Promise</code></li><li><a href="#module_bitfinex-api-node.WSv2+cancelOrder">.cancelOrder(order)</a> ⇒ <code>Promise</code></li><li><a href="#module_bitfinex-api-node.WSv2+cancelOrders">.cancelOrders(orders)</a> ⇒ <code>Promise</code></li><li><a href="#module_bitfinex-api-node.WSv2+submitOrderMultiOp">.submitOrderMultiOp(opPayloads)</a> ⇒ <code>Promise</code></li><li><a href="#module_bitfinex-api-node.WSv2+isAuthenticated">.isAuthenticated()</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+isOpen">.isOpen()</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+isReconnecting">.isReconnecting()</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+notifyUI">.notifyUI(opts)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onInfoMessage">.onInfoMessage(code, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onMessage">.onMessage(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onCandle">.onCandle(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onOrderBook">.onOrderBook(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onOrderBookChecksum">.onOrderBookChecksum(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onTrades">.onTrades(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onTradeEntry">.onTradeEntry(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onAccountTradeEntry">.onAccountTradeEntry(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onAccountTradeUpdate">.onAccountTradeUpdate(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onTicker">.onTicker(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onStatus">.onStatus(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onOrderSnapshot">.onOrderSnapshot(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onOrderNew">.onOrderNew(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onOrderUpdate">.onOrderUpdate(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onOrderClose">.onOrderClose(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onPositionSnapshot">.onPositionSnapshot(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onPositionNew">.onPositionNew(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onPositionUpdate">.onPositionUpdate(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onPositionClose">.onPositionClose(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onFundingOfferSnapshot">.onFundingOfferSnapshot(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onFundingOfferNew">.onFundingOfferNew(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onFundingOfferUpdate">.onFundingOfferUpdate(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onFundingOfferClose">.onFundingOfferClose(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onFundingCreditSnapshot">.onFundingCreditSnapshot(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onFundingCreditNew">.onFundingCreditNew(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onFundingCreditUpdate">.onFundingCreditUpdate(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onFundingCreditClose">.onFundingCreditClose(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onFundingLoanSnapshot">.onFundingLoanSnapshot(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onFundingLoanNew">.onFundingLoanNew(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onFundingLoanUpdate">.onFundingLoanUpdate(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onFundingLoanClose">.onFundingLoanClose(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onWalletSnapshot">.onWalletSnapshot(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onWalletUpdate">.onWalletUpdate(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onBalanceInfoUpdate">.onBalanceInfoUpdate(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onMarginInfoUpdate">.onMarginInfoUpdate(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onFundingInfoUpdate">.onFundingInfoUpdate(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onFundingTradeEntry">.onFundingTradeEntry(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onFundingTradeUpdate">.onFundingTradeUpdate(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onNotification">.onNotification(opts, cb)</a></li></ul></li><li><em>static</em><ul><li><a href="#module_bitfinex-api-node.WSv2.url">.url</a> : <code>string</code></li></ul></li><li><em>inner</em><ul><li><a href="#module_bitfinex-api-node.WSv2..Configuration">~Configuration</a> : <code>object</code></li></ul></li></ul></li></ul></li></ul></li></ul></div></div><p><a id="module_bitfinex-api-node"></a></p><h2 id="bitfinex-api-node"><a class="header-anchor" href="#bitfinex-api-node">§</a> bitfinex-api-node</h2><p>A Node.JS reference implementation of the Bitfinex API</p><h2 id="features"><a class="header-anchor" href="#features">§</a> Features</h2><ul><li>Official implementation</li><li>REST v2 API</li><li>WebSockets v2 API</li><li>WebSockets v1 API</li></ul><h2 id="installation"><a class="header-anchor" href="#installation">§</a> Installation</h2><pre><code class="hljs language-bash">  npm i --save bitfinex-api-node
</code></pre><h3 id="quickstart"><a class="header-anchor" href="#quickstart">§</a> Quickstart</h3><pre><code class="hljs language-js"><span class="hljs-keyword">const</span> { WSv2 } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'bitfinex-api-node'</span>)
<span class="hljs-keyword">const</span> ws = <span class="hljs-keyword">new</span> WSv2({ <span class="hljs-attr">transform</span>: <span class="hljs-literal">true</span> })

<span class="hljs-comment">// do something with ws client</span>
</code></pre><h3 id="examples"><a class="header-anchor" href="#examples">§</a> Examples</h3><p>Sending an order &amp; tracking status:</p><pre><code class="hljs language-js"><span class="hljs-keyword">const</span> ws = bfx.ws()

ws.on(<span class="hljs-string">'error'</span>, (err) =&gt; <span class="hljs-built_in">console</span>.log(err))
ws.on(<span class="hljs-string">'open'</span>, ws.auth.bind(ws))

ws.once(<span class="hljs-string">'auth'</span>, () =&gt; {
  <span class="hljs-keyword">const</span> o = <span class="hljs-keyword">new</span> Order({
    <span class="hljs-attr">cid</span>: <span class="hljs-built_in">Date</span>.now(),
    <span class="hljs-attr">symbol</span>: <span class="hljs-string">'tETHUSD'</span>,
    <span class="hljs-attr">amount</span>: <span class="hljs-number">0.1</span>,
    <span class="hljs-attr">type</span>: Order.type.MARKET
  }, ws)

  <span class="hljs-comment">// Enable automatic updates</span>
  o.registerListeners()

  o.on(<span class="hljs-string">'update'</span>, () =&gt; {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`order updated: <span class="hljs-subst">${o.serialize()}</span>`</span>)
  })

  o.on(<span class="hljs-string">'close'</span>, () =&gt; {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`order closed: <span class="hljs-subst">${o.status}</span>`</span>)
    ws.close()
  })

  o.submit().then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`submitted order <span class="hljs-subst">${o.id}</span>`</span>)
  }).catch(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
    <span class="hljs-built_in">console</span>.error(err)
    ws.close()
  })
})

ws.open()
</code></pre><p>Cancel all open orders</p><pre><code class="hljs language-js"><span class="hljs-keyword">const</span> ws = bfx.ws(<span class="hljs-number">2</span>)

ws.on(<span class="hljs-string">'error'</span>, (err) =&gt; <span class="hljs-built_in">console</span>.log(err))
ws.on(<span class="hljs-string">'open'</span>, ws.auth.bind(ws))

ws.onOrderSnapshot({}, (orders) =&gt; {
  <span class="hljs-keyword">if</span> (orders.length === <span class="hljs-number">0</span>) {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'no open orders'</span>)
    <span class="hljs-keyword">return</span>
  }

  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`recv <span class="hljs-subst">${orders.length}</span> open orders`</span>)

  ws.cancelOrders(orders).then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'cancelled orders'</span>)
  })
})

ws.open()
</code></pre><p>Subscribe to trades by pair</p><pre><code class="hljs language-js"><span class="hljs-keyword">const</span> ws = bfx.ws(<span class="hljs-number">2</span>)

ws.on(<span class="hljs-string">'error'</span>, (err) =&gt; <span class="hljs-built_in">console</span>.log(err))
ws.on(<span class="hljs-string">'open'</span>, () =&gt; {
  ws.subscribeTrades(<span class="hljs-string">'BTCUSD'</span>)
})

ws.onTrades({ <span class="hljs-attr">symbol</span>: <span class="hljs-string">'tBTCUSD'</span> }, (trades) =&gt; {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`trades: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(trades)}</span>`</span>)
})
ws.onTradeEntry({ <span class="hljs-attr">symbol</span>: <span class="hljs-string">'tBTCUSD'</span> }, (trades) =&gt; {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`te: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(trades)}</span>`</span>)
})

ws.open()
</code></pre><h2 id="version-2.0.0-breaking-changes"><a class="header-anchor" href="#version-2.0.0-breaking-changes">§</a> Version 2.0.0 Breaking changes</h2><h3 id="constructor-takes-only-an-options-object-now%2C-including-the-api-keys"><a class="header-anchor" href="#constructor-takes-only-an-options-object-now%2C-including-the-api-keys">§</a> constructor takes only an options object now, including the API keys</h3><p>Old:</p><pre><code class="hljs language-js"><span class="hljs-keyword">new</span> BFX(API_KEY, API_SECRET, { <span class="hljs-attr">version</span>: <span class="hljs-number">2</span> })
</code></pre><p>since 2.0.0:</p><pre><code class="hljs language-js"><span class="hljs-keyword">new</span> BFX({ <span class="hljs-attr">apiKey</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">apiSecret</span>: <span class="hljs-string">''</span> })
</code></pre><h3 id="trade-and-orderbook-snapshots-are-emitted-as-nested-lists"><a class="header-anchor" href="#trade-and-orderbook-snapshots-are-emitted-as-nested-lists">§</a> <code>trade</code> and <code>orderbook</code> snapshots are emitted as nested lists</h3><p>To make dealing with snapshots better predictable, snapshots are emitted as an array.</p><h3 id="normalized-orderbooks-for-r0"><a class="header-anchor" href="#normalized-orderbooks-for-r0">§</a> normalized orderbooks for R0</h3><p>Lists of raw orderbooks (<code>R0</code>) are ordered in the same order as <code>P0</code>, <code>P1</code>, <code>P2</code>, <code>P3</code></p><h2 id="faq"><a class="header-anchor" href="#faq">§</a> FAQ</h2><h3 id="order-creation-limits"><a class="header-anchor" href="#order-creation-limits">§</a> Order Creation Limits</h3><p>The base limit per-user is 1,000 orders per 5 minute interval, and is shared between all account API connections. It increases proportionally to your trade volume based on the following formula:</p><p><code>1000 + (TOTAL_PAIRS_PLATFORM * 60 * 5) / (250000000 / USER_VOL_LAST_30d)</code></p><p>Where <code>TOTAL_PAIRS_PLATFORM</code> is the number of pairs shared between Ethfinex/Bitfinex (currently ~101) and <code>USER_VOL_LAST_30d</code> is in USD.</p><h3 id="%E2%80%98on%E2%80%99-packet-guarantees"><a class="header-anchor" href="#%E2%80%98on%E2%80%99-packet-guarantees">§</a> ‘on’ Packet Guarantees</h3><p>No; if your order fills immediately, the first packet referencing the order will be an <code>oc</code> signaling the order has closed. If the order fills partially immediately after creation, an <code>on</code> packet will arrive with a status of <code>PARTIALLY FILLED...</code></p><p>For example, if you submit a <code>LIMIT</code> buy for 0.2 BTC and it is added to the order book, an <code>on</code> packet will arrive via ws2. After a partial fill of 0.1 BTC, an <code>ou</code> packet will arrive, followed by a final <code>oc</code> after the remaining 0.1 BTC fills.</p><p>On the other hand, if the order fills immediately for 0.2 BTC, you will only receive an <code>oc</code> packet.</p><h3 id="nonce-too-small"><a class="header-anchor" href="#nonce-too-small">§</a> Nonce too small</h3><p>I make multiple parallel request and I receive an error that the nonce is too small. What does it mean?</p><p>Nonces are used to guard against replay attacks. When multiple HTTP requests arrive at the API with the wrong nonce, e.g. because of an async timing issue, the API will reject the request.</p><p>If you need to go parallel, you have to use multiple API keys right now.</p><h3 id="te-vs-tu-messages"><a class="header-anchor" href="#te-vs-tu-messages">§</a> <code>te</code> vs <code>tu</code> Messages</h3><p>A <code>te</code> packet is sent first to the client immediately after a trade has been matched &amp; executed, followed by a <code>tu</code> message once it has completed processing. During times of high load, the <code>tu</code> message may be noticably delayed, and as such only the <code>te</code> message should be used for a realtime feed.</p><h3 id="sequencing"><a class="header-anchor" href="#sequencing">§</a> Sequencing</h3><p>If you enable sequencing on v2 of the WS API, each incoming packet will have a public sequence number at the end, along with an auth sequence number in the case of channel <code>0</code> packets. The public seq numbers increment on each packet, and the auth seq numbers increment on each authenticated action (new orders, etc). These values allow you to verify that no packets have been missed/dropped, since they always increase monotonically.</p><h3 id="differences-between-r*-and-p*-order-books"><a class="header-anchor" href="#differences-between-r*-and-p*-order-books">§</a> Differences Between R* and P* Order Books</h3><p>Order books with precision <code>R0</code> are considered ‘raw’ and contain entries for each order submitted to the book, whereas <code>P*</code> books contain entries for each price level (which aggregate orders).</p><p><strong>License</strong>: MIT<br><a id="module_bitfinex-api-node.CandleChannel"></a></p><h3 id="bitfinex-api-node.candlechannel-%3A-object"><a class="header-anchor" href="#bitfinex-api-node.candlechannel-%3A-object">§</a> bitfinex-api-node.CandleChannel : <code>object</code></h3><p>An object describing a trade data channel on a <a href="#module_bitfinex-api-node.WSv2">WSv2</a> data stream.</p><p><strong>Kind</strong>: static typedef of <a href="#module_bitfinex-api-node"><code>bitfinex-api-node</code></a><br><strong>Properties</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>channel</td><td><code>string</code></td><td>‘candles’</td></tr><tr><td>chanId</td><td><code>number</code></td><td>channel ID</td></tr><tr><td>key</td><td><code>string</code></td><td>data key, ‘trade:TF:SYMBOL’ i.e. ‘trade:1m:tBTCUSD’</td></tr></tbody></table><p><a id="module_bitfinex-api-node.OrderBookChannel"></a></p><h3 id="bitfinex-api-node.orderbookchannel-%3A-object"><a class="header-anchor" href="#bitfinex-api-node.orderbookchannel-%3A-object">§</a> bitfinex-api-node.OrderBookChannel : <code>object</code></h3><p>An object describing an order book data channel on a <a href="#module_bitfinex-api-node.WSv2">WSv2</a> data stream.</p><p><strong>Kind</strong>: static typedef of <a href="#module_bitfinex-api-node"><code>bitfinex-api-node</code></a><br><strong>Properties</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>channel</td><td><code>string</code></td><td>‘book’</td></tr><tr><td>chanId</td><td><code>number</code></td><td>channel ID</td></tr><tr><td>symbol</td><td><code>string</code></td><td>symbol</td></tr><tr><td>freq</td><td><code>string</code></td><td>frequency of updates; ‘F0’ is realtime, ‘F1’ is once per 2 seconds</td></tr><tr><td>prec</td><td><code>string</code></td><td>precision, (aggregate ‘P0’, ‘P1’, ‘P2’, ‘P3’, ‘P4’, raw ‘R0’)</td></tr><tr><td>len</td><td><code>string</code></td><td>book depth, ‘25’ (default) or ‘100’</td></tr></tbody></table><p><a id="module_bitfinex-api-node.TickerChannel"></a></p><h3 id="bitfinex-api-node.tickerchannel-%3A-object"><a class="header-anchor" href="#bitfinex-api-node.tickerchannel-%3A-object">§</a> bitfinex-api-node.TickerChannel : <code>object</code></h3><p>An object describing a ticker data channel on a <a href="#module_bitfinex-api-node.WSv2">WSv2</a> data stream.</p><p><strong>Kind</strong>: static typedef of <a href="#module_bitfinex-api-node"><code>bitfinex-api-node</code></a><br><strong>Properties</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>channel</td><td><code>string</code></td><td>‘ticker’</td></tr><tr><td>chanId</td><td><code>number</code></td><td>channel ID</td></tr><tr><td>symbol</td><td><code>string</code></td><td>symbol</td></tr></tbody></table><p><a id="module_bitfinex-api-node.TradeChannel"></a></p><h3 id="bitfinex-api-node.tradechannel-%3A-object"><a class="header-anchor" href="#bitfinex-api-node.tradechannel-%3A-object">§</a> bitfinex-api-node.TradeChannel : <code>object</code></h3><p>An object describing a trade data channel on a <a href="#module_bitfinex-api-node.WSv2">WSv2</a> data stream.</p><p><strong>Kind</strong>: static typedef of <a href="#module_bitfinex-api-node"><code>bitfinex-api-node</code></a><br><strong>Properties</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>channel</td><td><code>string</code></td><td>‘trades’</td></tr><tr><td>chanId</td><td><code>number</code></td><td>channel ID</td></tr><tr><td>symbol</td><td><code>string</code></td><td>symbol</td></tr></tbody></table><p><a id="module_bitfinex-api-node.ClientManager"></a></p><h3 id="bitfinex-api-node~clientmanager"><a class="header-anchor" href="#bitfinex-api-node~clientmanager">§</a> bitfinex-api-node~ClientManager</h3><p>Provides access to versions 1 &amp; 2 of the HTTP &amp; WebSocket Bitfinex APIs. Main export of {@npm bitfinex-api-node}.</p><p><strong>Kind</strong>: inner class of <a href="#module_bitfinex-api-node"><code>bitfinex-api-node</code></a><br><strong>See</strong></p><ul><li>module:bitfinex-api-node.WSv2</li><li>module:bfx-api-node-ws1.WSv1</li><li>module:bfx-api-node-rest.RESTv2</li><li>module:bfx-api-node-rest.RESTv1</li></ul><ul><li><a href="#module_bitfinex-api-node.ClientManager">~ClientManager</a><ul><li><a href="#new_module_bitfinex-api-node.ClientManager_new">new ClientManager(opts)</a></li><li><a href="#module_bitfinex-api-node.ClientManager+rest">.rest([version], [extraOpts])</a> ⇒ <code>module:bfx-api-node-rest.RESTv1</code> | <code>module:bfx-api-node-rest.RESTv2</code></li><li><a href="#module_bitfinex-api-node.ClientManager+ws">.ws([version], [extraOpts])</a> ⇒ <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a> | <code>module:bfx-api-node-ws1.WSv1</code></li></ul></li></ul><p><a id="new_module_bitfinex-api-node.ClientManager_new"></a></p><h4 id="new-clientmanager(opts)"><a class="header-anchor" href="#new-clientmanager(opts)">§</a> new ClientManager(opts)</h4><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>opts.apiKey</td><td><code>string</code></td><td>API key</td></tr><tr><td>opts.apiSecret</td><td><code>string</code></td><td>API secret</td></tr><tr><td>opts.authToken</td><td><code>string</code></td><td>optional auth option</td></tr><tr><td>opts.transform</td><td><code>string</code></td><td>if true, packets are converted to models</td></tr><tr><td>opts.nonceGenerator</td><td><code>string</code></td><td>optional</td></tr><tr><td><a href="http://opts.ws">opts.ws</a></td><td><a href="#module_bitfinex-api-node.WSv2..Configuration"><code>Configuration</code></a></td><td>ws transport options</td></tr><tr><td>opts.rest</td><td><code>string</code></td><td>rest transport options</td></tr></tbody></table><p><a id="module_bitfinex-api-node.ClientManager+rest"></a></p><h4 id="clientmanager.rest(%5Bversion%5D%2C-%5Bextraopts%5D)-%E2%87%92-module%3Abfx-api-node-rest.restv1-%7C-module%3Abfx-api-node-rest.restv2"><a class="header-anchor" href="#clientmanager.rest(%5Bversion%5D%2C-%5Bextraopts%5D)-%E2%87%92-module%3Abfx-api-node-rest.restv1-%7C-module%3Abfx-api-node-rest.restv2">§</a> clientManager.rest([version], [extraOpts]) ⇒ <code>module:bfx-api-node-rest.RESTv1</code> | <code>module:bfx-api-node-rest.RESTv2</code></h4><p>Returns a new REST API class instance (cached by version)</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.ClientManager"><code>ClientManager</code></a><br><strong>Returns</strong>: <code>module:bfx-api-node-rest.RESTv1</code> | <code>module:bfx-api-node-rest.RESTv2</code> - transport</p><table><thead><tr><th>Param</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>[version]</td><td><code>number</code></td><td><code>2</code></td><td>1 or 2</td></tr><tr><td>[extraOpts]</td><td><code>object</code></td><td><code>{}</code></td><td>passed to transport constructor</td></tr></tbody></table><p><a id="module_bitfinex-api-node.ClientManager+ws"></a></p><h4 id="clientmanager.ws(%5Bversion%5D%2C-%5Bextraopts%5D)-%E2%87%92-wsv2-%7C-module%3Abfx-api-node-ws1.wsv1"><a class="header-anchor" href="#clientmanager.ws(%5Bversion%5D%2C-%5Bextraopts%5D)-%E2%87%92-wsv2-%7C-module%3Abfx-api-node-ws1.wsv1">§</a> <a href="http://clientManager.ws">clientManager.ws</a>([version], [extraOpts]) ⇒ <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a> | <code>module:bfx-api-node-ws1.WSv1</code></h4><p>Returns a new WebSocket API class instance (cached by version)</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.ClientManager"><code>ClientManager</code></a><br><strong>Returns</strong>: <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a> | <code>module:bfx-api-node-ws1.WSv1</code> - transport</p><table><thead><tr><th>Param</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>[version]</td><td><code>number</code></td><td><code>2</code></td><td>1 or 2</td></tr><tr><td>[extraOpts]</td><td><a href="#module_bitfinex-api-node.WSv2..Configuration"><code>Configuration</code></a></td><td><code>{}</code></td><td>passed to transport constructor</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WS2Manager"></a></p><h3 id="bitfinex-api-node~ws2manager-%E2%87%90-eventemitter"><a class="header-anchor" href="#bitfinex-api-node~ws2manager-%E2%87%90-eventemitter">§</a> bitfinex-api-node~WS2Manager ⇐ <code>EventEmitter</code></h3><p>Provides a wrapper around the WSv2 class, opening new sockets when a subscription would push a single socket over the data channel limit.</p><p>For more complex operations, grab a socket reference with getSocket() or getFreeDataSocket(), or create a new WSv2 instance manually</p><p><strong>Kind</strong>: inner class of <a href="#module_bitfinex-api-node"><code>bitfinex-api-node</code></a><br><strong>Extends</strong>: <code>EventEmitter</code></p><ul><li><a href="#module_bitfinex-api-node.WS2Manager">~WS2Manager</a> ⇐ <code>EventEmitter</code><ul><li><a href="#new_module_bitfinex-api-node.WS2Manager_new">new WS2Manager(socketArgs, [authArgs])</a></li><li><em>instance</em><ul><li><a href="#module_bitfinex-api-node.WS2Manager+setAuthArgs">.setAuthArgs(args)</a></li><li><a href="#module_bitfinex-api-node.WS2Manager+getAuthArgs">.getAuthArgs()</a> ⇒ <code>object</code></li><li><a href="#module_bitfinex-api-node.WS2Manager+reconnect">.reconnect()</a> ⇒ <code>Promise</code></li><li><a href="#module_bitfinex-api-node.WS2Manager+close">.close()</a> ⇒ <code>Promise</code></li><li><a href="#module_bitfinex-api-node.WS2Manager+getNumSockets">.getNumSockets()</a> ⇒ <code>number</code></li><li><a href="#module_bitfinex-api-node.WS2Manager+getSocket">.getSocket(i)</a> ⇒ <a href="#module_bitfinex-api-node.WS2Manager..SocketState"><code>SocketState</code></a></li><li><a href="#module_bitfinex-api-node.WS2Manager+getSocketInfo">.getSocketInfo()</a> ⇒ <code>Array.&lt;object&gt;</code></li><li><a href="#module_bitfinex-api-node.WS2Manager+auth">.auth(args)</a></li><li><a href="#module_bitfinex-api-node.WS2Manager+openSocket">.openSocket()</a> ⇒ <a href="#module_bitfinex-api-node.WS2Manager..SocketState"><code>SocketState</code></a></li><li><a href="#module_bitfinex-api-node.WS2Manager+getAuthenticatedSocket">.getAuthenticatedSocket()</a> ⇒ <a href="#module_bitfinex-api-node.WS2Manager..SocketState"><code>SocketState</code></a></li><li><a href="#module_bitfinex-api-node.WS2Manager+getFreeDataSocket">.getFreeDataSocket()</a> ⇒ <a href="#module_bitfinex-api-node.WS2Manager..SocketState"><code>SocketState</code></a></li><li><a href="#module_bitfinex-api-node.WS2Manager+getSocketWithDataChannel">.getSocketWithDataChannel(type, filter)</a> ⇒ <a href="#module_bitfinex-api-node.WS2Manager..SocketState"><code>SocketState</code></a></li><li><a href="#module_bitfinex-api-node.WS2Manager+getSocketWithChannel">.getSocketWithChannel(chanId)</a> ⇒ <a href="#module_bitfinex-api-node.WS2Manager..SocketState"><code>SocketState</code></a></li><li><a href="#module_bitfinex-api-node.WS2Manager+getSocketWithSubRef">.getSocketWithSubRef(channel, identifier)</a> ⇒ <a href="#module_bitfinex-api-node.WS2Manager..SocketState"><code>SocketState</code></a></li><li><a href="#module_bitfinex-api-node.WS2Manager+withAllSockets">.withAllSockets(cb)</a></li><li><a href="#module_bitfinex-api-node.WS2Manager+subscribe">.subscribe(type, ident, filter)</a></li><li><a href="#module_bitfinex-api-node.WS2Manager+managedUnsubscribe">.managedUnsubscribe(channel, identifier)</a></li><li><a href="#module_bitfinex-api-node.WS2Manager+unsubscribe">.unsubscribe(chanId)</a></li><li><a href="#module_bitfinex-api-node.WS2Manager+subscribeTicker">.subscribeTicker(symbol)</a></li><li><a href="#module_bitfinex-api-node.WS2Manager+subscribeTrades">.subscribeTrades(symbol)</a></li><li><a href="#module_bitfinex-api-node.WS2Manager+subscribeOrderBook">.subscribeOrderBook(symbol, [prec], [len], [freq])</a></li><li><a href="#module_bitfinex-api-node.WS2Manager+subscribeCandles">.subscribeCandles(key)</a></li><li><a href="#module_bitfinex-api-node.WS2Manager+onCandle">.onCandle(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WS2Manager+onOrderBook">.onOrderBook(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WS2Manager+onTrades">.onTrades(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WS2Manager+onTicker">.onTicker(opts, cb)</a></li></ul></li><li><em>static</em><ul><li><a href="#module_bitfinex-api-node.WS2Manager.getDataChannelCount">.getDataChannelCount(s)</a> ⇒ <code>number</code></li></ul></li><li><em>inner</em><ul><li><a href="#module_bitfinex-api-node.WS2Manager..SocketState">~SocketState</a> : <code>object</code></li></ul></li></ul></li></ul><p><a id="new_module_bitfinex-api-node.WS2Manager_new"></a></p><h4 id="new-ws2manager(socketargs%2C-%5Bauthargs%5D)"><a class="header-anchor" href="#new-ws2manager(socketargs%2C-%5Bauthargs%5D)">§</a> new WS2Manager(socketArgs, [authArgs])</h4><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>socketArgs</td><td><a href="#module_bitfinex-api-node.WSv2..Configuration"><code>Configuration</code></a></td><td>passed to <a href="#module_bitfinex-api-node.WSv2">WSv2</a> constructors</td></tr><tr><td>[authArgs]</td><td><code>object</code></td><td>cached for all internal socket auth() calls</td></tr><tr><td>[authArgs.calc]</td><td><code>object</code></td><td>default 0</td></tr><tr><td>[authArgs.dms]</td><td><code>object</code></td><td>default 0</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js"><span class="hljs-keyword">const</span> rest = <span class="hljs-keyword">new</span> RESTv2()
<span class="hljs-keyword">const</span> details = <span class="hljs-keyword">await</span> rest.symbolDetails()
<span class="hljs-keyword">const</span> symbols = details.map(<span class="hljs-function"><span class="hljs-params">d</span> =&gt;</span> <span class="hljs-string">`t<span class="hljs-subst">${d.pair.toUpperCase()}</span>`</span>)
<span class="hljs-keyword">const</span> timeFrames = [<span class="hljs-string">'1m'</span>, <span class="hljs-string">'5m'</span>, <span class="hljs-string">'30m'</span>, <span class="hljs-string">'1h'</span>, <span class="hljs-string">'6h'</span>]
<span class="hljs-keyword">const</span> keys = _flatten(symbols.map(<span class="hljs-function"><span class="hljs-params">s</span> =&gt;</span> {
  <span class="hljs-keyword">return</span> timeFrames.map(<span class="hljs-function"><span class="hljs-params">tf</span> =&gt;</span> <span class="hljs-string">`trade:<span class="hljs-subst">${tf}</span>:<span class="hljs-subst">${s}</span>`</span>)
}))

<span class="hljs-keyword">const</span> m = <span class="hljs-keyword">new</span> Manager()

m.on(<span class="hljs-string">'error'</span>, (err) =&gt; {
  debug(<span class="hljs-string">'error: %s'</span>, err)
})

m.once(<span class="hljs-string">'open'</span>, () =&gt; {
  debug(<span class="hljs-string">'open'</span>)

  keys.forEach(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> {
    m.subscribeCandles(key)
    m.onCandle({ key }, (candles) =&gt; {
      debug(<span class="hljs-string">'recv %d candles on channel %s'</span>, candles.length, key)
    })
  })

  symbols.forEach(<span class="hljs-function"><span class="hljs-params">symbol</span> =&gt;</span> {
    m.subscribeTrades(symbol)
    m.onTrades({ symbol }, (trades) =&gt; {
      debug(<span class="hljs-string">'recv %d trades on channel %s'</span>, trades.length, symbol)
    })
  })

  symbols.forEach(<span class="hljs-function"><span class="hljs-params">symbol</span> =&gt;</span> {
    m.subscribeTicker(symbol)
    m.onTicker({ symbol }, (ticker) =&gt; {
      debug(<span class="hljs-string">'recv ticker on channel %s: %j'</span>, symbol, ticker)
    })
  })

  symbols.forEach(<span class="hljs-function"><span class="hljs-params">symbol</span> =&gt;</span> {
    m.subscribeOrderBook(symbol)
    m.onOrderBook({ symbol }, (update) =&gt; {
      debug(<span class="hljs-string">'recv book update on channel %s: %j'</span>, symbol, update)
    })
  })

  setInterval(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    debug(<span class="hljs-string">'num keys: %d'</span>, keys.length)
    debug(<span class="hljs-string">'num sockets: %d'</span>, m.getNumSockets())
    debug(<span class="hljs-string">'socket info: %j'</span>, m.getSocketInfo())
  }, <span class="hljs-number">5000</span>)
})

m.openSocket()
</code></pre><p><a id="module_bitfinex-api-node.WS2Manager+setAuthArgs"></a></p><h4 id="ws2manager.setauthargs(args)"><a class="header-anchor" href="#ws2manager.setauthargs(args)">§</a> wS2Manager.setAuthArgs(args)</h4><p>Update authentication arguments on all sockets</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WS2Manager"><code>WS2Manager</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>args</td><td><code>object</code></td><td>arguments</td></tr><tr><td>[args.calc]</td><td><code>object</code></td><td>calc value</td></tr><tr><td>[args.dms]</td><td><code>object</code></td><td>active 4</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WS2Manager+getAuthArgs"></a></p><h4 id="ws2manager.getauthargs()-%E2%87%92-object"><a class="header-anchor" href="#ws2manager.getauthargs()-%E2%87%92-object">§</a> wS2Manager.getAuthArgs() ⇒ <code>object</code></h4><p>Retrieve internal authentication arguments</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WS2Manager"><code>WS2Manager</code></a><br><strong>Returns</strong>: <code>object</code> - args<br><a id="module_bitfinex-api-node.WS2Manager+reconnect"></a></p><h4 id="ws2manager.reconnect()-%E2%87%92-promise"><a class="header-anchor" href="#ws2manager.reconnect()-%E2%87%92-promise">§</a> wS2Manager.reconnect() ⇒ <code>Promise</code></h4><p>Reconnects all open sockets</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WS2Manager"><code>WS2Manager</code></a><br><strong>Returns</strong>: <code>Promise</code> - p<br><a id="module_bitfinex-api-node.WS2Manager+close"></a></p><h4 id="ws2manager.close()-%E2%87%92-promise"><a class="header-anchor" href="#ws2manager.close()-%E2%87%92-promise">§</a> wS2Manager.close() ⇒ <code>Promise</code></h4><p>Closes all open sockets</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WS2Manager"><code>WS2Manager</code></a><br><strong>Returns</strong>: <code>Promise</code> - p<br><a id="module_bitfinex-api-node.WS2Manager+getNumSockets"></a></p><h4 id="ws2manager.getnumsockets()-%E2%87%92-number"><a class="header-anchor" href="#ws2manager.getnumsockets()-%E2%87%92-number">§</a> wS2Manager.getNumSockets() ⇒ <code>number</code></h4><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WS2Manager"><code>WS2Manager</code></a><br><strong>Returns</strong>: <code>number</code> - n<br><a id="module_bitfinex-api-node.WS2Manager+getSocket"></a></p><h4 id="ws2manager.getsocket(i)-%E2%87%92-socketstate"><a class="header-anchor" href="#ws2manager.getsocket(i)-%E2%87%92-socketstate">§</a> wS2Manager.getSocket(i) ⇒ <a href="#module_bitfinex-api-node.WS2Manager..SocketState"><code>SocketState</code></a></h4><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WS2Manager"><code>WS2Manager</code></a><br><strong>Returns</strong>: <a href="#module_bitfinex-api-node.WS2Manager..SocketState"><code>SocketState</code></a> - state</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>i</td><td><code>number</code></td><td>index into pool</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WS2Manager+getSocketInfo"></a></p><h4 id="ws2manager.getsocketinfo()-%E2%87%92-array.%3Cobject%3E"><a class="header-anchor" href="#ws2manager.getsocketinfo()-%E2%87%92-array.%3Cobject%3E">§</a> wS2Manager.getSocketInfo() ⇒ <code>Array.&lt;object&gt;</code></h4><p>Returns an object which can be logged to inspect the socket pool</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WS2Manager"><code>WS2Manager</code></a><br><strong>Returns</strong>: <code>Array.&lt;object&gt;</code> - socketInfo<br><a id="module_bitfinex-api-node.WS2Manager+auth"></a></p><h4 id="ws2manager.auth(args)"><a class="header-anchor" href="#ws2manager.auth(args)">§</a> wS2Manager.auth(args)</h4><p>Authenticates all existing &amp; future sockets with the provided credentials. Does nothing if an apiKey/apiSecret pair are already known.</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WS2Manager"><code>WS2Manager</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>args</td><td><code>object</code></td><td>arguments</td></tr><tr><td>args.apiKey</td><td><code>object</code></td><td>saved if not already provided</td></tr><tr><td>args.apiSecret</td><td><code>object</code></td><td>saved if not already provided</td></tr><tr><td>[args.calc]</td><td><code>object</code></td><td>default 0</td></tr><tr><td>[args.dms]</td><td><code>object</code></td><td>dead man switch, active 4</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WS2Manager+openSocket"></a></p><h4 id="ws2manager.opensocket()-%E2%87%92-socketstate"><a class="header-anchor" href="#ws2manager.opensocket()-%E2%87%92-socketstate">§</a> wS2Manager.openSocket() ⇒ <a href="#module_bitfinex-api-node.WS2Manager..SocketState"><code>SocketState</code></a></h4><p>Creates a new socket/state instance and adds it to the internal pool. Binds event listeners to forward via our own event emitter, and to manage pending subs/unsubs.</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WS2Manager"><code>WS2Manager</code></a><br><strong>Returns</strong>: <a href="#module_bitfinex-api-node.WS2Manager..SocketState"><code>SocketState</code></a> - state<br><a id="module_bitfinex-api-node.WS2Manager+getAuthenticatedSocket"></a></p><h4 id="ws2manager.getauthenticatedsocket()-%E2%87%92-socketstate"><a class="header-anchor" href="#ws2manager.getauthenticatedsocket()-%E2%87%92-socketstate">§</a> wS2Manager.getAuthenticatedSocket() ⇒ <a href="#module_bitfinex-api-node.WS2Manager..SocketState"><code>SocketState</code></a></h4><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WS2Manager"><code>WS2Manager</code></a><br><strong>Returns</strong>: <a href="#module_bitfinex-api-node.WS2Manager..SocketState"><code>SocketState</code></a> - state<br><a id="module_bitfinex-api-node.WS2Manager+getFreeDataSocket"></a></p><h4 id="ws2manager.getfreedatasocket()-%E2%87%92-socketstate"><a class="header-anchor" href="#ws2manager.getfreedatasocket()-%E2%87%92-socketstate">§</a> wS2Manager.getFreeDataSocket() ⇒ <a href="#module_bitfinex-api-node.WS2Manager..SocketState"><code>SocketState</code></a></h4><p>Returns the first socket that has less active/pending channels than the DATA_CHANNEL_LIMIT</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WS2Manager"><code>WS2Manager</code></a><br><strong>Returns</strong>: <a href="#module_bitfinex-api-node.WS2Manager..SocketState"><code>SocketState</code></a> - state - undefined if none found<br><a id="module_bitfinex-api-node.WS2Manager+getSocketWithDataChannel"></a></p><h4 id="ws2manager.getsocketwithdatachannel(type%2C-filter)-%E2%87%92-socketstate"><a class="header-anchor" href="#ws2manager.getsocketwithdatachannel(type%2C-filter)-%E2%87%92-socketstate">§</a> wS2Manager.getSocketWithDataChannel(type, filter) ⇒ <a href="#module_bitfinex-api-node.WS2Manager..SocketState"><code>SocketState</code></a></h4><p>Returns the first socket that is subscribed/pending sub to the specified channel.</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WS2Manager"><code>WS2Manager</code></a><br><strong>Returns</strong>: <a href="#module_bitfinex-api-node.WS2Manager..SocketState"><code>SocketState</code></a> - wsState - undefined if not found</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>type</td><td><code>string</code></td><td>i.e. ‘book’</td></tr><tr><td>filter</td><td><code>object</code></td><td>i.e. { symbol: ‘tBTCUSD’, prec: ‘R0’ }</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WS2Manager+getSocketWithChannel"></a></p><h4 id="ws2manager.getsocketwithchannel(chanid)-%E2%87%92-socketstate"><a class="header-anchor" href="#ws2manager.getsocketwithchannel(chanid)-%E2%87%92-socketstate">§</a> wS2Manager.getSocketWithChannel(chanId) ⇒ <a href="#module_bitfinex-api-node.WS2Manager..SocketState"><code>SocketState</code></a></h4><p>NOTE: Cannot filter against pending subscriptions, due to unknown chanId</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WS2Manager"><code>WS2Manager</code></a><br><strong>Returns</strong>: <a href="#module_bitfinex-api-node.WS2Manager..SocketState"><code>SocketState</code></a> - wsState - undefined if not found</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>chanId</td><td><code>number</code></td><td>channel ID</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WS2Manager+getSocketWithSubRef"></a></p><h4 id="ws2manager.getsocketwithsubref(channel%2C-identifier)-%E2%87%92-socketstate"><a class="header-anchor" href="#ws2manager.getsocketwithsubref(channel%2C-identifier)-%E2%87%92-socketstate">§</a> wS2Manager.getSocketWithSubRef(channel, identifier) ⇒ <a href="#module_bitfinex-api-node.WS2Manager..SocketState"><code>SocketState</code></a></h4><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WS2Manager"><code>WS2Manager</code></a><br><strong>Returns</strong>: <a href="#module_bitfinex-api-node.WS2Manager..SocketState"><code>SocketState</code></a> - wsState - undefined if not found</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>channel</td><td><code>string</code></td><td>channel type</td></tr><tr><td>identifier</td><td><code>string</code></td><td>unique channel identifier</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WS2Manager+withAllSockets"></a></p><h4 id="ws2manager.withallsockets(cb)"><a class="header-anchor" href="#ws2manager.withallsockets(cb)">§</a> wS2Manager.withAllSockets(cb)</h4><p>Calls the provided cb with all internal socket instances</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WS2Manager"><code>WS2Manager</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WS2Manager+subscribe"></a></p><h4 id="ws2manager.subscribe(type%2C-ident%2C-filter)"><a class="header-anchor" href="#ws2manager.subscribe(type%2C-ident%2C-filter)">§</a> wS2Manager.subscribe(type, ident, filter)</h4><p>Subscribes a free data socket if available to the specified channel, or opens a new socket &amp; subs if needed.</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WS2Manager"><code>WS2Manager</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>type</td><td><code>string</code></td><td>i.e. ‘book’</td></tr><tr><td>ident</td><td><code>string</code></td><td>i.e. ‘tBTCUSD’</td></tr><tr><td>filter</td><td><code>object</code></td><td>i.e. { symbol: ‘tBTCUSD’, prec: ‘R0’ }</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WS2Manager+managedUnsubscribe"></a></p><h4 id="ws2manager.managedunsubscribe(channel%2C-identifier)"><a class="header-anchor" href="#ws2manager.managedunsubscribe(channel%2C-identifier)">§</a> wS2Manager.managedUnsubscribe(channel, identifier)</h4><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WS2Manager"><code>WS2Manager</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>channel</td><td><code>string</code></td><td>channel type</td></tr><tr><td>identifier</td><td><code>string</code></td><td>unique channel identifier</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WS2Manager+unsubscribe"></a></p><h4 id="ws2manager.unsubscribe(chanid)"><a class="header-anchor" href="#ws2manager.unsubscribe(chanid)">§</a> wS2Manager.unsubscribe(chanId)</h4><p>Unsubscribes the first socket w/ the specified channel. Does nothing if no such socket is found.</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WS2Manager"><code>WS2Manager</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>chanId</td><td><code>number</code></td><td>channel ID</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WS2Manager+subscribeTicker"></a></p><h4 id="ws2manager.subscribeticker(symbol)"><a class="header-anchor" href="#ws2manager.subscribeticker(symbol)">§</a> wS2Manager.subscribeTicker(symbol)</h4><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WS2Manager"><code>WS2Manager</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>symbol</td><td><code>string</code></td><td>symbol for ticker</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WS2Manager+subscribeTrades"></a></p><h4 id="ws2manager.subscribetrades(symbol)"><a class="header-anchor" href="#ws2manager.subscribetrades(symbol)">§</a> wS2Manager.subscribeTrades(symbol)</h4><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WS2Manager"><code>WS2Manager</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>symbol</td><td><code>string</code></td><td>symbol for trades</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WS2Manager+subscribeOrderBook"></a></p><h4 id="ws2manager.subscribeorderbook(symbol%2C-%5Bprec%5D%2C-%5Blen%5D%2C-%5Bfreq%5D)"><a class="header-anchor" href="#ws2manager.subscribeorderbook(symbol%2C-%5Bprec%5D%2C-%5Blen%5D%2C-%5Bfreq%5D)">§</a> wS2Manager.subscribeOrderBook(symbol, [prec], [len], [freq])</h4><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WS2Manager"><code>WS2Manager</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>symbol</td><td><code>string</code></td><td></td><td>symbol for order book</td></tr><tr><td>[prec]</td><td><code>string</code></td><td><code>&quot;P0&quot;</code></td><td>precision, i.e. ‘R0’, default ‘P0’</td></tr><tr><td>[len]</td><td><code>string</code></td><td><code>&quot;25&quot;</code></td><td>length, default ‘25’</td></tr><tr><td>[freq]</td><td><code>string</code></td><td><code>&quot;F0&quot;</code></td><td>default ‘F0’</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WS2Manager+subscribeCandles"></a></p><h4 id="ws2manager.subscribecandles(key)"><a class="header-anchor" href="#ws2manager.subscribecandles(key)">§</a> wS2Manager.subscribeCandles(key)</h4><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WS2Manager"><code>WS2Manager</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>key</td><td><code>string</code></td><td>candle channel key</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WS2Manager+onCandle"></a></p><h4 id="ws2manager.oncandle(opts%2C-cb)"><a class="header-anchor" href="#ws2manager.oncandle(opts%2C-cb)">§</a> wS2Manager.onCandle(opts, cb)</h4><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WS2Manager"><code>WS2Manager</code></a><br><strong>Throws</strong>:</p><ul><li>an error if no data socket is available</li></ul><p><strong>See</strong>: <a href="https://docs.bitfinex.com/v2/reference#ws-public-candle">https://docs.bitfinex.com/v2/reference#ws-public-candle</a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>opts.key</td><td><code>string</code></td><td>candle set key, i.e. trade:30m:tBTCUSD</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WS2Manager+onOrderBook"></a></p><h4 id="ws2manager.onorderbook(opts%2C-cb)"><a class="header-anchor" href="#ws2manager.onorderbook(opts%2C-cb)">§</a> wS2Manager.onOrderBook(opts, cb)</h4><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WS2Manager"><code>WS2Manager</code></a><br><strong>Throws</strong>:</p><ul><li>an error if no data socket is available</li></ul><p><strong>See</strong>: <a href="https://docs.bitfinex.com/v2/reference#ws-public-order-books">https://docs.bitfinex.com/v2/reference#ws-public-order-books</a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>opts.symbol</td><td><code>string</code></td><td>order book symbol</td></tr><tr><td>[opts.prec]</td><td><code>string</code></td><td>precision, i.e. ‘R0’, default ‘P0’</td></tr><tr><td>[opts.len]</td><td><code>string</code></td><td>length, default ‘25’</td></tr><tr><td>[opts.freq]</td><td><code>string</code></td><td>default ‘F0’</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WS2Manager+onTrades"></a></p><h4 id="ws2manager.ontrades(opts%2C-cb)"><a class="header-anchor" href="#ws2manager.ontrades(opts%2C-cb)">§</a> wS2Manager.onTrades(opts, cb)</h4><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WS2Manager"><code>WS2Manager</code></a><br><strong>Throws</strong>:</p><ul><li>an error if no data socket is available</li></ul><p><strong>See</strong>: <a href="https://docs.bitfinex.com/v2/reference#ws-public-trades">https://docs.bitfinex.com/v2/reference#ws-public-trades</a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>[opts.symbol]</td><td><code>string</code></td><td>symbol for trades</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WS2Manager+onTicker"></a></p><h4 id="ws2manager.onticker(opts%2C-cb)"><a class="header-anchor" href="#ws2manager.onticker(opts%2C-cb)">§</a> wS2Manager.onTicker(opts, cb)</h4><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WS2Manager"><code>WS2Manager</code></a><br><strong>Throws</strong>:</p><ul><li>an error if no data socket is available</li></ul><p><strong>See</strong>: <a href="https://docs.bitfinex.com/v2/reference#ws-public-ticker">https://docs.bitfinex.com/v2/reference#ws-public-ticker</a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>[opts.symbol]</td><td><code>string</code></td><td>symbol for ticker</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WS2Manager.getDataChannelCount"></a></p><h4 id="ws2manager.getdatachannelcount(s)-%E2%87%92-number"><a class="header-anchor" href="#ws2manager.getdatachannelcount(s)-%E2%87%92-number">§</a> WS2Manager.getDataChannelCount(s) ⇒ <code>number</code></h4><p><strong>Kind</strong>: static method of <a href="#module_bitfinex-api-node.WS2Manager"><code>WS2Manager</code></a><br><strong>Returns</strong>: <code>number</code> - count - # of subscribed/pending data channels</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>s</td><td><a href="#module_bitfinex-api-node.WS2Manager..SocketState"><code>SocketState</code></a></td><td>socket state</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WS2Manager..SocketState"></a></p><h4 id="ws2manager~socketstate-%3A-object"><a class="header-anchor" href="#ws2manager~socketstate-%3A-object">§</a> WS2Manager~SocketState : <code>object</code></h4><p>Object containing socket state for <a href="#module_bitfinex-api-node.WS2Manager">WS2Manager</a>.</p><p><strong>Kind</strong>: inner typedef of <a href="#module_bitfinex-api-node.WS2Manager"><code>WS2Manager</code></a><br><strong>Properties</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>ws</td><td><a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a></td><td>client instance</td></tr><tr><td>pendingSubscriptions</td><td><code>Array.&lt;Array&gt;</code></td><td>array of sent but unconfirmed channel subscriptions</td></tr><tr><td>pendingUnsubscriptions</td><td><code>Array.&lt;Array&gt;</code></td><td>array of sent but unconfirmed channel unsubscribe packets</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2"></a></p><h3 id="bitfinex-api-node~wsv2-%E2%87%90-eventemitter"><a class="header-anchor" href="#bitfinex-api-node~wsv2-%E2%87%90-eventemitter">§</a> bitfinex-api-node~WSv2 ⇐ <code>EventEmitter</code></h3><p>Communicates with v2 of the Bitfinex WebSocket API</p><p><strong>Kind</strong>: inner class of <a href="#module_bitfinex-api-node"><code>bitfinex-api-node</code></a><br><strong>Extends</strong>: <code>EventEmitter</code></p><ul><li><a href="#module_bitfinex-api-node.WSv2">~WSv2</a> ⇐ <code>EventEmitter</code><ul><li><a href="#new_module_bitfinex-api-node.WSv2_new">new WSv2([config])</a></li><li><em>instance</em><ul><li><a href="#module_bitfinex-api-node.WSv2+getURL">.getURL()</a> ⇒ <code>string</code></li><li><a href="#module_bitfinex-api-node.WSv2+usesAgent">.usesAgent()</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+updateAuthArgs">.updateAuthArgs(args)</a></li><li><a href="#module_bitfinex-api-node.WSv2+getAuthArgs">.getAuthArgs()</a> ⇒ <code>object</code></li><li><a href="#module_bitfinex-api-node.WSv2+setAPICredentials">.setAPICredentials(apiKey, apiSecret)</a></li><li><a href="#module_bitfinex-api-node.WSv2+getDataChannelCount">.getDataChannelCount()</a> ⇒ <code>number</code></li><li><a href="#module_bitfinex-api-node.WSv2+hasChannel">.hasChannel(chanId)</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+hasSubscriptionRef">.hasSubscriptionRef(channel, identifier)</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+getDataChannelId">.getDataChannelId(type, filter)</a> ⇒ <code>number</code></li><li><a href="#module_bitfinex-api-node.WSv2+hasDataChannel">.hasDataChannel(type, filter)</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+open">.open()</a> ⇒ <code>Promise</code></li><li><a href="#module_bitfinex-api-node.WSv2+close">.close(code, reason)</a> ⇒ <code>Promise</code></li><li><a href="#module_bitfinex-api-node.WSv2+auth">.auth([calc], [dms])</a> ⇒ <code>Promise</code></li><li><a href="#module_bitfinex-api-node.WSv2+reconnect">.reconnect()</a> ⇒ <code>Promise</code></li><li><a href="#module_bitfinex-api-node.WSv2+getOB">.getOB(symbol)</a> ⇒ <code>module:bfx-api-node-models.OrderBook</code></li><li><a href="#module_bitfinex-api-node.WSv2+getLosslessOB">.getLosslessOB(symbol)</a> ⇒ <code>module:bfx-api-node-models.OrderBook</code></li><li><a href="#module_bitfinex-api-node.WSv2+getCandles">.getCandles(key)</a> ⇒ <code>module:bfx-api-node-models.Candle</code> | <code>Array.&lt;module:bfx-api-node-models.Candle~ArrayData&gt;</code></li><li><a href="#module_bitfinex-api-node.WSv2+managedSubscribe">.managedSubscribe(channel, identifier, payload)</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+managedUnsubscribe">.managedUnsubscribe(channel, identifier)</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+getChannelData">.getChannelData(opts)</a> ⇒ <code>object</code></li><li><a href="#module_bitfinex-api-node.WSv2+send">.send(msg)</a></li><li><a href="#module_bitfinex-api-node.WSv2+sequencingEnabled">.sequencingEnabled()</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+enableSequencing">.enableSequencing(args)</a> ⇒ <code>Promise</code></li><li><a href="#module_bitfinex-api-node.WSv2+enableFlag">.enableFlag(flag)</a> ⇒ <code>Promise</code></li><li><a href="#module_bitfinex-api-node.WSv2+isFlagEnabled">.isFlagEnabled(flag)</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+onServerRestart">.onServerRestart(cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onMaintenanceStart">.onMaintenanceStart(cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onMaintenanceEnd">.onMaintenanceEnd(cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+subscribe">.subscribe(channel, payload)</a></li><li><a href="#module_bitfinex-api-node.WSv2+subscribeTicker">.subscribeTicker(symbol)</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+subscribeTrades">.subscribeTrades(symbol)</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+subscribeOrderBook">.subscribeOrderBook(symbol, prec, len)</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+subscribeCandles">.subscribeCandles(key)</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+subscribeStatus">.subscribeStatus(key)</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+unsubscribe">.unsubscribe(chanId)</a></li><li><a href="#module_bitfinex-api-node.WSv2+unsubscribeTicker">.unsubscribeTicker(symbol)</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+unsubscribeTrades">.unsubscribeTrades(symbol)</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+unsubscribeOrderBook">.unsubscribeOrderBook(symbol)</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+unsubscribeCandles">.unsubscribeCandles(symbol, frame)</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+unsubscribeStatus">.unsubscribeStatus(key)</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+removeListeners">.removeListeners(cbGID)</a></li><li><a href="#module_bitfinex-api-node.WSv2+requestCalc">.requestCalc(prefixes)</a></li><li><a href="#module_bitfinex-api-node.WSv2+submitOrder">.submitOrder(order)</a> ⇒ <code>Promise</code></li><li><a href="#module_bitfinex-api-node.WSv2+updateOrder">.updateOrder(changes)</a> ⇒ <code>Promise</code></li><li><a href="#module_bitfinex-api-node.WSv2+cancelOrder">.cancelOrder(order)</a> ⇒ <code>Promise</code></li><li><a href="#module_bitfinex-api-node.WSv2+cancelOrders">.cancelOrders(orders)</a> ⇒ <code>Promise</code></li><li><a href="#module_bitfinex-api-node.WSv2+submitOrderMultiOp">.submitOrderMultiOp(opPayloads)</a> ⇒ <code>Promise</code></li><li><a href="#module_bitfinex-api-node.WSv2+isAuthenticated">.isAuthenticated()</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+isOpen">.isOpen()</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+isReconnecting">.isReconnecting()</a> ⇒ <code>boolean</code></li><li><a href="#module_bitfinex-api-node.WSv2+notifyUI">.notifyUI(opts)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onInfoMessage">.onInfoMessage(code, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onMessage">.onMessage(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onCandle">.onCandle(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onOrderBook">.onOrderBook(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onOrderBookChecksum">.onOrderBookChecksum(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onTrades">.onTrades(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onTradeEntry">.onTradeEntry(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onAccountTradeEntry">.onAccountTradeEntry(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onAccountTradeUpdate">.onAccountTradeUpdate(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onTicker">.onTicker(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onStatus">.onStatus(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onOrderSnapshot">.onOrderSnapshot(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onOrderNew">.onOrderNew(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onOrderUpdate">.onOrderUpdate(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onOrderClose">.onOrderClose(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onPositionSnapshot">.onPositionSnapshot(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onPositionNew">.onPositionNew(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onPositionUpdate">.onPositionUpdate(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onPositionClose">.onPositionClose(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onFundingOfferSnapshot">.onFundingOfferSnapshot(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onFundingOfferNew">.onFundingOfferNew(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onFundingOfferUpdate">.onFundingOfferUpdate(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onFundingOfferClose">.onFundingOfferClose(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onFundingCreditSnapshot">.onFundingCreditSnapshot(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onFundingCreditNew">.onFundingCreditNew(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onFundingCreditUpdate">.onFundingCreditUpdate(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onFundingCreditClose">.onFundingCreditClose(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onFundingLoanSnapshot">.onFundingLoanSnapshot(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onFundingLoanNew">.onFundingLoanNew(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onFundingLoanUpdate">.onFundingLoanUpdate(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onFundingLoanClose">.onFundingLoanClose(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onWalletSnapshot">.onWalletSnapshot(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onWalletUpdate">.onWalletUpdate(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onBalanceInfoUpdate">.onBalanceInfoUpdate(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onMarginInfoUpdate">.onMarginInfoUpdate(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onFundingInfoUpdate">.onFundingInfoUpdate(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onFundingTradeEntry">.onFundingTradeEntry(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onFundingTradeUpdate">.onFundingTradeUpdate(opts, cb)</a></li><li><a href="#module_bitfinex-api-node.WSv2+onNotification">.onNotification(opts, cb)</a></li></ul></li><li><em>static</em><ul><li><a href="#module_bitfinex-api-node.WSv2.url">.url</a> : <code>string</code></li></ul></li><li><em>inner</em><ul><li><a href="#module_bitfinex-api-node.WSv2..Configuration">~Configuration</a> : <code>object</code></li></ul></li></ul></li></ul><p><a id="new_module_bitfinex-api-node.WSv2_new"></a></p><h4 id="new-wsv2(%5Bconfig%5D)"><a class="header-anchor" href="#new-wsv2(%5Bconfig%5D)">§</a> new WSv2([config])</h4><p>Instantiate a new ws2 transport. Does not auto-open</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>[config]</td><td><a href="#module_bitfinex-api-node.WSv2..Configuration"><code>Configuration</code></a></td><td>client configuration</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js"><span class="hljs-keyword">const</span> ws = <span class="hljs-keyword">new</span> WSv2()

ws.on(<span class="hljs-string">'open'</span>, <span class="hljs-keyword">async</span> () =&gt; {
  ws.onTrades({ <span class="hljs-attr">symbol</span>: <span class="hljs-string">'tBTCUSD'</span> }, (trades) =&gt; {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'recv trades: %j'</span>, trades)
  })

  <span class="hljs-keyword">await</span> ws.subscribeTrades(<span class="hljs-string">'tBTCUSD'</span>)
})

<span class="hljs-keyword">await</span> ws.open()
</code></pre><p><a id="module_bitfinex-api-node.WSv2+getURL"></a></p><h4 id="wsv2.geturl()-%E2%87%92-string"><a class="header-anchor" href="#wsv2.geturl()-%E2%87%92-string">§</a> wSv2.getURL() ⇒ <code>string</code></h4><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>string</code> - url<br><a id="module_bitfinex-api-node.WSv2+usesAgent"></a></p><h4 id="wsv2.usesagent()-%E2%87%92-boolean"><a class="header-anchor" href="#wsv2.usesagent()-%E2%87%92-boolean">§</a> wSv2.usesAgent() ⇒ <code>boolean</code></h4><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>boolean</code> - usesAgent<br><a id="module_bitfinex-api-node.WSv2+updateAuthArgs"></a></p><h4 id="wsv2.updateauthargs(args)"><a class="header-anchor" href="#wsv2.updateauthargs(args)">§</a> wSv2.updateAuthArgs(args)</h4><p>Set <code>calc</code> and <code>dms</code> values to be used on the next <a href="#module_bitfinex-api-node.WSv2+auth">auth</a> call</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong>: module:bitfinex-api-node.WSv2#auth</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>args</td><td><code>object</code></td><td>arguments</td></tr><tr><td>[args.calc]</td><td><code>number</code></td><td>calc value</td></tr><tr><td>[args.dms]</td><td><code>number</code></td><td>dms value, active 4</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+getAuthArgs"></a></p><h4 id="wsv2.getauthargs()-%E2%87%92-object"><a class="header-anchor" href="#wsv2.getauthargs()-%E2%87%92-object">§</a> wSv2.getAuthArgs() ⇒ <code>object</code></h4><p>Fetch the current default auth parameters</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>object</code> - authArgs<br><strong>See</strong></p><ul><li>module:bitfinex-api-node.WSv2#updateAuthArgs</li><li>module:bitfinex-api-node.WSv2#auth</li></ul><p><a id="module_bitfinex-api-node.WSv2+setAPICredentials"></a></p><h4 id="wsv2.setapicredentials(apikey%2C-apisecret)"><a class="header-anchor" href="#wsv2.setapicredentials(apikey%2C-apisecret)">§</a> wSv2.setAPICredentials(apiKey, apiSecret)</h4><p>Update the internal API credentials, used on subsequent <a href="#module_bitfinex-api-node.WSv2+auth">auth</a> calls</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong>: module:bitfinex-api-node.WSv2#auth</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>apiKey</td><td><code>string</code></td><td>API key</td></tr><tr><td>apiSecret</td><td><code>string</code></td><td>API secret</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+getDataChannelCount"></a></p><h4 id="wsv2.getdatachannelcount()-%E2%87%92-number"><a class="header-anchor" href="#wsv2.getdatachannelcount()-%E2%87%92-number">§</a> wSv2.getDataChannelCount() ⇒ <code>number</code></h4><p>Get the total number of data channels this instance is currently subscribed too.</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>number</code> - count<br><strong>See</strong></p><ul><li><a href="#module_bitfinex-api-node.WSv2+subscribeTrades">WSv2#subscribeTrades</a></li><li><a href="#module_bitfinex-api-node.WSv2+subscribeTicker">WSv2#subscribeTicker</a></li><li><a href="#module_bitfinex-api-node.WSv2+subscribeCandles">WSv2#subscribeCandles</a></li><li><a href="#module_bitfinex-api-node.WSv2+subscribeOrderBook">WSv2#subscribeOrderBook</a></li></ul><p><a id="module_bitfinex-api-node.WSv2+hasChannel"></a></p><h4 id="wsv2.haschannel(chanid)-%E2%87%92-boolean"><a class="header-anchor" href="#wsv2.haschannel(chanid)-%E2%87%92-boolean">§</a> wSv2.hasChannel(chanId) ⇒ <code>boolean</code></h4><p>Check if the instance is subscribed to the specified channel ID</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>boolean</code> - isSubscribed</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>chanId</td><td><code>number</code></td><td>ID of channel to query</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+hasSubscriptionRef"></a></p><h4 id="wsv2.hassubscriptionref(channel%2C-identifier)-%E2%87%92-boolean"><a class="header-anchor" href="#wsv2.hassubscriptionref(channel%2C-identifier)-%E2%87%92-boolean">§</a> wSv2.hasSubscriptionRef(channel, identifier) ⇒ <code>boolean</code></h4><p>Check if a channel/identifier pair has been subscribed too</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>boolean</code> - hasRef<br><strong>See</strong>: module:bitfinex-api-node.WSv2#managedSubscribe</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>channel</td><td><code>string</code></td><td>channel type</td></tr><tr><td>identifier</td><td><code>string</code></td><td>unique identifier for the reference</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+getDataChannelId"></a></p><h4 id="wsv2.getdatachannelid(type%2C-filter)-%E2%87%92-number"><a class="header-anchor" href="#wsv2.getdatachannelid(type%2C-filter)-%E2%87%92-number">§</a> wSv2.getDataChannelId(type, filter) ⇒ <code>number</code></h4><p>Fetch the ID of a channel matched by type and channel data filter</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>number</code> - channelID</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>type</td><td><code>string</code></td><td>channel type</td></tr><tr><td>filter</td><td><code>object</code></td><td>to be matched against channel data</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+hasDataChannel"></a></p><h4 id="wsv2.hasdatachannel(type%2C-filter)-%E2%87%92-boolean"><a class="header-anchor" href="#wsv2.hasdatachannel(type%2C-filter)-%E2%87%92-boolean">§</a> wSv2.hasDataChannel(type, filter) ⇒ <code>boolean</code></h4><p>Check if the instance is subscribed to a data channel matching the specified type and filter.</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>boolean</code> - hasChannel</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>type</td><td><code>string</code></td><td>channel type</td></tr><tr><td>filter</td><td><code>object</code></td><td>to be matched against channel data</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+open"></a></p><h4 id="wsv2.open()-%E2%87%92-promise"><a class="header-anchor" href="#wsv2.open()-%E2%87%92-promise">§</a> wSv2.open() ⇒ <code>Promise</code></h4><p>Opens a connection to the API server. Rejects with an error if a connection is already open. Resolves on success.</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>Promise</code> - p<br><a id="module_bitfinex-api-node.WSv2+close"></a></p><h4 id="wsv2.close(code%2C-reason)-%E2%87%92-promise"><a class="header-anchor" href="#wsv2.close(code%2C-reason)-%E2%87%92-promise">§</a> wSv2.close(code, reason) ⇒ <code>Promise</code></h4><p>Closes the active connection. If there is none, rejects with a promise. Resolves on success</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>Promise</code> - p</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td><code>number</code></td><td>passed to ws</td></tr><tr><td>reason</td><td><code>string</code></td><td>passed to ws</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+auth"></a></p><h4 id="wsv2.auth(%5Bcalc%5D%2C-%5Bdms%5D)-%E2%87%92-promise"><a class="header-anchor" href="#wsv2.auth(%5Bcalc%5D%2C-%5Bdms%5D)-%E2%87%92-promise">§</a> wSv2.auth([calc], [dms]) ⇒ <code>Promise</code></h4><p>Generates &amp; sends an authentication packet to the server; if already authenticated, rejects with an error, resolves on success.</p><p>If a DMS flag of 4 is provided, all open orders are cancelled when the connection terminates.</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>Promise</code> - p</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>[calc]</td><td><code>number</code></td><td>default is 0</td></tr><tr><td>[dms]</td><td><code>number</code></td><td>dead man switch flag, active 4</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+reconnect"></a></p><h4 id="wsv2.reconnect()-%E2%87%92-promise"><a class="header-anchor" href="#wsv2.reconnect()-%E2%87%92-promise">§</a> wSv2.reconnect() ⇒ <code>Promise</code></h4><p>Utility method to close &amp; re-open the ws connection. Re-authenticates if previously authenticated</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves on completion<br><a id="module_bitfinex-api-node.WSv2+getOB"></a></p><h4 id="wsv2.getob(symbol)-%E2%87%92-module%3Abfx-api-node-models.orderbook"><a class="header-anchor" href="#wsv2.getob(symbol)-%E2%87%92-module%3Abfx-api-node-models.orderbook">§</a> wSv2.getOB(symbol) ⇒ <code>module:bfx-api-node-models.OrderBook</code></h4><p>Returns an up-to-date copy of the order book for the specified symbol, or null if no OB is managed for that symbol.</p><p>Set <code>managedOrderBooks: true</code> in the constructor to use.</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>module:bfx-api-node-models.OrderBook</code> - ob - null if not found</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>symbol</td><td><code>string</code></td><td>symbol for order book</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js"><span class="hljs-keyword">const</span> ws = <span class="hljs-keyword">new</span> WSv2({ <span class="hljs-attr">managedOrderBooks</span>: <span class="hljs-literal">true</span> })

ws.on(<span class="hljs-string">'open'</span>, <span class="hljs-keyword">async</span> () =&gt; {
  ws.onOrderBook({ <span class="hljs-attr">symbol</span>: <span class="hljs-string">'tBTCUSD'</span> }, () =&gt; {
    <span class="hljs-keyword">const</span> book = ws.getOB(<span class="hljs-string">'tBTCUSD'</span>)

    <span class="hljs-keyword">if</span> (!book) <span class="hljs-keyword">return</span>

    <span class="hljs-keyword">const</span> spread = book.midPrice()
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'spread for tBTCUSD: %f'</span>, spread)
  })

  ws.subscribeOrderBook({ <span class="hljs-attr">symbol</span>: <span class="hljs-string">'tBTCUSD'</span> })
})

<span class="hljs-keyword">await</span> ws.open()
</code></pre><p><a id="module_bitfinex-api-node.WSv2+getLosslessOB"></a></p><h4 id="wsv2.getlosslessob(symbol)-%E2%87%92-module%3Abfx-api-node-models.orderbook"><a class="header-anchor" href="#wsv2.getlosslessob(symbol)-%E2%87%92-module%3Abfx-api-node-models.orderbook">§</a> wSv2.getLosslessOB(symbol) ⇒ <code>module:bfx-api-node-models.OrderBook</code></h4><p>Returns an up-to-date lossless copy of the order book for the specified symbol, or null if no OB is managed for that symbol. All amounts and prices are in original string format.</p><p>Set <code>manageOrderBooks: true</code> in the constructor to use.</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>module:bfx-api-node-models.OrderBook</code> - ob - null if not found</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>symbol</td><td><code>string</code></td><td>symbol for order book</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+getCandles"></a></p><h4 id="wsv2.getcandles(key)-%E2%87%92-module%3Abfx-api-node-models.candle-%7C-array.%3Cmodule%3Abfx-api-node-models.candle~arraydata%3E"><a class="header-anchor" href="#wsv2.getcandles(key)-%E2%87%92-module%3Abfx-api-node-models.candle-%7C-array.%3Cmodule%3Abfx-api-node-models.candle~arraydata%3E">§</a> wSv2.getCandles(key) ⇒ <code>module:bfx-api-node-models.Candle</code> | <code>Array.&lt;module:bfx-api-node-models.Candle~ArrayData&gt;</code></h4><p>Fetch a reference to the full set of synced candles for the specified key. Set <code>managedCandles: true</code> in the constructor to use.</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>module:bfx-api-node-models.Candle</code> | <code>Array.&lt;module:bfx-api-node-models.Candle~ArrayData&gt;</code> - candles - empty array if none exist</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>key</td><td><code>string</code></td><td>key for candle set</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js"><span class="hljs-keyword">const</span> ws = <span class="hljs-keyword">new</span> WSv2({ <span class="hljs-attr">managedCandles</span>: <span class="hljs-literal">true</span> })

ws.on(<span class="hljs-string">'open'</span>, <span class="hljs-keyword">async</span> () =&gt; {
  ws.onCandles({ <span class="hljs-attr">key</span>: <span class="hljs-string">'trade:1m:tBTCUSD'</span> }, () =&gt; {
    <span class="hljs-keyword">const</span> candles = ws.getCandles(<span class="hljs-string">'trade:1m:tBTCUSD'</span>)

    <span class="hljs-keyword">if</span> (!candles) <span class="hljs-keyword">return</span>

    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'%d candles in dataset'</span>, candles.length)
  })

  ws.subscribeCandles({ <span class="hljs-attr">key</span>: <span class="hljs-string">'trade:1m:tBTCUSD'</span> })
})

<span class="hljs-keyword">await</span> ws.open()
</code></pre><p><a id="module_bitfinex-api-node.WSv2+managedSubscribe"></a></p><h4 id="wsv2.managedsubscribe(channel%2C-identifier%2C-payload)-%E2%87%92-boolean"><a class="header-anchor" href="#wsv2.managedsubscribe(channel%2C-identifier%2C-payload)-%E2%87%92-boolean">§</a> wSv2.managedSubscribe(channel, identifier, payload) ⇒ <code>boolean</code></h4><p>Subscribes and tracks subscriptions per channel/identifier pair. If already subscribed to the specified pair, nothing happens.</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>boolean</code> - subSent<br><strong>See</strong></p><ul><li>module:bitfinex-api-node.WSv2#subscribeTrades</li><li>module:bitfinex-api-node.WSv2#subscribeTicker</li><li>module:bitfinex-api-node.WSv2#subscribeCandles</li><li>module:bitfinex-api-node.WSv2#subscribeOrderBook</li></ul><p><strong>Todo</strong></p><ul class="contains-task-list"><li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox"> will be refactored to return promise from subscribe() call instead of sub action taken flag</li></ul><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>channel</td><td><code>string</code></td><td>channel name</td></tr><tr><td>identifier</td><td><code>string</code></td><td>for uniquely identifying the ref count</td></tr><tr><td>payload</td><td><code>object</code></td><td>merged with sub packet</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js"><span class="hljs-keyword">const</span> ws = <span class="hljs-keyword">new</span> WSv2()

ws.on(<span class="hljs-string">'open'</span>, <span class="hljs-keyword">async</span> () =&gt; {
  ws.onTrades({ <span class="hljs-attr">symbol</span>: <span class="hljs-string">'tBTCUSD'</span> }, (trades) =&gt; {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'recv trades: %j'</span>, trades)
 })

  ws.managedSubscribe(<span class="hljs-string">'trades'</span>, <span class="hljs-string">'tBTCUSD'</span>, { <span class="hljs-attr">symbol</span>: <span class="hljs-string">'tBTCUSD'</span> })
})

<span class="hljs-keyword">await</span> ws.open()
</code></pre><p><a id="module_bitfinex-api-node.WSv2+managedUnsubscribe"></a></p><h4 id="wsv2.managedunsubscribe(channel%2C-identifier)-%E2%87%92-boolean"><a class="header-anchor" href="#wsv2.managedunsubscribe(channel%2C-identifier)-%E2%87%92-boolean">§</a> wSv2.managedUnsubscribe(channel, identifier) ⇒ <code>boolean</code></h4><p>Decreases the subscription ref count for the channel/identifier pair, and unsubscribes from the channel if it reaches 0.</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>boolean</code> - unsubSent</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>channel</td><td><code>string</code></td><td>channel name</td></tr><tr><td>identifier</td><td><code>string</code></td><td>for uniquely identifying the ref count</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+getChannelData"></a></p><h4 id="wsv2.getchanneldata(opts)-%E2%87%92-object"><a class="header-anchor" href="#wsv2.getchanneldata(opts)-%E2%87%92-object">§</a> wSv2.getChannelData(opts) ⇒ <code>object</code></h4><p>Fetch a channel definition</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>object</code> - chanData - null if not found</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>opts.chanId</td><td><code>number</code></td><td>channel ID</td></tr><tr><td>opts.channel</td><td><code>string</code></td><td>channel name</td></tr><tr><td>[opts.symbol]</td><td><code>string</code></td><td>match by symbol</td></tr><tr><td>[opts.key]</td><td><code>string</code></td><td>match by key (for candle channels)</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+send"></a></p><h4 id="wsv2.send(msg)"><a class="header-anchor" href="#wsv2.send(msg)">§</a> wSv2.send(msg)</h4><p>Send a packet to the WS server</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>msg</td><td><code>Array</code> | <code>object</code></td><td>packet, gets stringified</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+sequencingEnabled"></a></p><h4 id="wsv2.sequencingenabled()-%E2%87%92-boolean"><a class="header-anchor" href="#wsv2.sequencingenabled()-%E2%87%92-boolean">§</a> wSv2.sequencingEnabled() ⇒ <code>boolean</code></h4><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>boolean</code> - sequencingEnabled<br><a id="module_bitfinex-api-node.WSv2+enableSequencing"></a></p><h4 id="wsv2.enablesequencing(args)-%E2%87%92-promise"><a class="header-anchor" href="#wsv2.enablesequencing(args)-%E2%87%92-promise">§</a> wSv2.enableSequencing(args) ⇒ <code>Promise</code></h4><p>Configures the seq flag to enable sequencing (packet number) for this connection. When enabled, the seq number will be the last value of channel packet arrays.</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>Promise</code> - p<br><strong>See</strong>: module:bitfinex-api-node.WSv2#flags</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>args</td><td><code>object</code></td><td>params</td></tr><tr><td>[args.audit]</td><td><code>boolean</code></td><td>if true, an error is emitted on invalid seq</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+enableFlag"></a></p><h4 id="wsv2.enableflag(flag)-%E2%87%92-promise"><a class="header-anchor" href="#wsv2.enableflag(flag)-%E2%87%92-promise">§</a> wSv2.enableFlag(flag) ⇒ <code>Promise</code></h4><p>Enables a configuration flag.</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>Promise</code> - p<br><strong>See</strong>: module:bitfinex-api-node.WSv2#flags</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>flag</td><td><code>number</code></td><td>flag to update, as numeric value</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js"><span class="hljs-keyword">const</span> ws = <span class="hljs-keyword">new</span> WSv2()

ws.on(<span class="hljs-string">'open'</span>, <span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">await</span> ws.enableFlag(WSv2.flags.CHECKSUM)
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'ob checkums enabled'</span>)
})

<span class="hljs-keyword">await</span> ws.open()
</code></pre><p><a id="module_bitfinex-api-node.WSv2+isFlagEnabled"></a></p><h4 id="wsv2.isflagenabled(flag)-%E2%87%92-boolean"><a class="header-anchor" href="#wsv2.isflagenabled(flag)-%E2%87%92-boolean">§</a> wSv2.isFlagEnabled(flag) ⇒ <code>boolean</code></h4><p>Checks local state, relies on successful server config responses</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>boolean</code> - enabled<br><strong>See</strong>: module:bitfinex-api-node.WSv2#enableFlag</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>flag</td><td><code>number</code></td><td>flag to check for</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onServerRestart"></a></p><h4 id="wsv2.onserverrestart(cb)"><a class="header-anchor" href="#wsv2.onserverrestart(cb)">§</a> wSv2.onServerRestart(cb)</h4><p>Register a callback in case of a ws server restart message; Use this to call reconnect() if needed. (code 20051)</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>cb</td><td><code>function</code></td><td>called on event trigger</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onMaintenanceStart"></a></p><h4 id="wsv2.onmaintenancestart(cb)"><a class="header-anchor" href="#wsv2.onmaintenancestart(cb)">§</a> wSv2.onMaintenanceStart(cb)</h4><p>Register a callback in case of a ‘maintenance started’ message from the server. This is a good time to pause server packets until maintenance ends</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>cb</td><td><code>function</code></td><td>called on event trigger</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onMaintenanceEnd"></a></p><h4 id="wsv2.onmaintenanceend(cb)"><a class="header-anchor" href="#wsv2.onmaintenanceend(cb)">§</a> wSv2.onMaintenanceEnd(cb)</h4><p>Register a callback to be notified of a maintenance period ending</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>cb</td><td><code>function</code></td><td>called on event trigger</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+subscribe"></a></p><h4 id="wsv2.subscribe(channel%2C-payload)"><a class="header-anchor" href="#wsv2.subscribe(channel%2C-payload)">§</a> wSv2.subscribe(channel, payload)</h4><p>Subscribe to a channel with the given filter payload</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>channel</td><td><code>string</code></td><td>channel payload/data</td></tr><tr><td>payload</td><td><code>object</code></td><td>optional extra packet data</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js"><span class="hljs-keyword">const</span> ws = <span class="hljs-keyword">new</span> WSv2()

ws.on(<span class="hljs-string">'open'</span>, () =&gt; {
  ws.onTrades({ <span class="hljs-attr">symbol</span>: <span class="hljs-string">'tBTCUSD'</span> }, (trades) =&gt; {
    <span class="hljs-comment">// ...</span>
  })

  ws.subscribe(<span class="hljs-string">'trades'</span>, { <span class="hljs-attr">symbol</span>: <span class="hljs-string">'tBTCUSD'</span> })
})

<span class="hljs-keyword">await</span> ws.open()
</code></pre><p><a id="module_bitfinex-api-node.WSv2+subscribeTicker"></a></p><h4 id="wsv2.subscribeticker(symbol)-%E2%87%92-boolean"><a class="header-anchor" href="#wsv2.subscribeticker(symbol)-%E2%87%92-boolean">§</a> wSv2.subscribeTicker(symbol) ⇒ <code>boolean</code></h4><p>Subscribe to a ticker data channel</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>boolean</code> - subscribed<br><strong>See</strong>: module:bitfinex-api-node.WSv2#managedSubscribe</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>symbol</td><td><code>string</code></td><td>symbol of ticker</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js"><span class="hljs-keyword">await</span> ws.subscribeTicker(<span class="hljs-string">'tBTCUSD'</span>)
</code></pre><p><a id="module_bitfinex-api-node.WSv2+subscribeTrades"></a></p><h4 id="wsv2.subscribetrades(symbol)-%E2%87%92-boolean"><a class="header-anchor" href="#wsv2.subscribetrades(symbol)-%E2%87%92-boolean">§</a> wSv2.subscribeTrades(symbol) ⇒ <code>boolean</code></h4><p>Subscribe to a trades data channel</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>boolean</code> - subscribed<br><strong>See</strong>: module:bitfinex-api-node.WSv2#managedSubscribe</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>symbol</td><td><code>string</code></td><td>symbol of market to monitor</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js"><span class="hljs-keyword">await</span> ws.subscribeTrades(<span class="hljs-string">'tBTCUSD'</span>)
</code></pre><p><a id="module_bitfinex-api-node.WSv2+subscribeOrderBook"></a></p><h4 id="wsv2.subscribeorderbook(symbol%2C-prec%2C-len)-%E2%87%92-boolean"><a class="header-anchor" href="#wsv2.subscribeorderbook(symbol%2C-prec%2C-len)-%E2%87%92-boolean">§</a> wSv2.subscribeOrderBook(symbol, prec, len) ⇒ <code>boolean</code></h4><p>Subscribe to an order book data channel</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>boolean</code> - subscribed<br><strong>See</strong>: module:bitfinex-api-node.WSv2#managedSubscribe</p><table><thead><tr><th>Param</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>symbol</td><td><code>string</code></td><td></td><td>symbol of order book</td></tr><tr><td>prec</td><td><code>string</code></td><td><code>&quot;P0&quot;</code></td><td>P0, P1, P2, or P3 (default P0)</td></tr><tr><td>len</td><td><code>string</code></td><td><code>&quot;25&quot;</code></td><td>25 or 100 (default 25)</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js"><span class="hljs-keyword">await</span> ws.subscribeOrderBook(<span class="hljs-string">'tBTCUSD'</span>, <span class="hljs-string">'R0'</span>, <span class="hljs-string">'25'</span>)
</code></pre><p><a id="module_bitfinex-api-node.WSv2+subscribeCandles"></a></p><h4 id="wsv2.subscribecandles(key)-%E2%87%92-boolean"><a class="header-anchor" href="#wsv2.subscribecandles(key)-%E2%87%92-boolean">§</a> wSv2.subscribeCandles(key) ⇒ <code>boolean</code></h4><p>Subscribe to a candle data channel</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>boolean</code> - subscribed<br><strong>See</strong>: module:bitfinex-api-node.WSv2#managedSubscribe</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>key</td><td><code>string</code></td><td>‘trade:5m:tBTCUSD’</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js"><span class="hljs-keyword">await</span> ws.subscribeCandles(<span class="hljs-string">'trade:5m:tBTCUSD'</span>)
</code></pre><p><a id="module_bitfinex-api-node.WSv2+subscribeStatus"></a></p><h4 id="wsv2.subscribestatus(key)-%E2%87%92-boolean"><a class="header-anchor" href="#wsv2.subscribestatus(key)-%E2%87%92-boolean">§</a> wSv2.subscribeStatus(key) ⇒ <code>boolean</code></h4><p>Subscribe to a status data channel</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>boolean</code> - subscribed<br><strong>See</strong>: module:bitfinex-api-node.WSv2#managedSubscribe</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>key</td><td><code>string</code></td><td>i.e. ‘liq:global’</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js"><span class="hljs-keyword">await</span> ws.subscribeStatus(<span class="hljs-string">'liq:global'</span>)
</code></pre><p><a id="module_bitfinex-api-node.WSv2+unsubscribe"></a></p><h4 id="wsv2.unsubscribe(chanid)"><a class="header-anchor" href="#wsv2.unsubscribe(chanid)">§</a> wSv2.unsubscribe(chanId)</h4><p>Unsubscribe from a channel by ID</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>chanId</td><td><code>number</code></td><td>ID of channel to unsubscribe from</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js"><span class="hljs-keyword">const</span> id = ws.getDataChannelId(<span class="hljs-string">'ticker'</span>, { <span class="hljs-attr">symbol</span>: <span class="hljs-string">'tBTCUSD'</span> })

<span class="hljs-keyword">if</span> (id) {
  ws.unsubscribe(id)
}
</code></pre><p><a id="module_bitfinex-api-node.WSv2+unsubscribeTicker"></a></p><h4 id="wsv2.unsubscribeticker(symbol)-%E2%87%92-boolean"><a class="header-anchor" href="#wsv2.unsubscribeticker(symbol)-%E2%87%92-boolean">§</a> wSv2.unsubscribeTicker(symbol) ⇒ <code>boolean</code></h4><p>Unsubscribe from a ticker data channel</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>boolean</code> - unsubscribed<br><strong>See</strong>: module:bitfinex-api-node.WSv2#subscribeTicker</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>symbol</td><td><code>string</code></td><td>symbol of ticker</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js"><span class="hljs-keyword">await</span> ws.unsubscribeTicker(<span class="hljs-string">'tBTCUSD'</span>)
</code></pre><p><a id="module_bitfinex-api-node.WSv2+unsubscribeTrades"></a></p><h4 id="wsv2.unsubscribetrades(symbol)-%E2%87%92-boolean"><a class="header-anchor" href="#wsv2.unsubscribetrades(symbol)-%E2%87%92-boolean">§</a> wSv2.unsubscribeTrades(symbol) ⇒ <code>boolean</code></h4><p>Unsubscribe from a trades data channel</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>boolean</code> - unsubscribed<br><strong>See</strong>: module:bitfinex-api-node.WSv2#subscribeTrades</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>symbol</td><td><code>string</code></td><td>symbol of market to unsubscribe from</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js"><span class="hljs-keyword">await</span> ws.unsubcribeTrades(<span class="hljs-string">'tBTCUSD'</span>)
</code></pre><p><a id="module_bitfinex-api-node.WSv2+unsubscribeOrderBook"></a></p><h4 id="wsv2.unsubscribeorderbook(symbol)-%E2%87%92-boolean"><a class="header-anchor" href="#wsv2.unsubscribeorderbook(symbol)-%E2%87%92-boolean">§</a> wSv2.unsubscribeOrderBook(symbol) ⇒ <code>boolean</code></h4><p>Unsubscribe from an order book data channel</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>boolean</code> - unsubscribed<br><strong>See</strong>: module:bitfinex-api-node.WSv2#subscribeOrderBook</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>symbol</td><td><code>string</code></td><td>symbol of order book</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js"><span class="hljs-keyword">await</span> ws.unsubcribeOrderBook(<span class="hljs-string">'tBTCUSD'</span>)
</code></pre><p><a id="module_bitfinex-api-node.WSv2+unsubscribeCandles"></a></p><h4 id="wsv2.unsubscribecandles(symbol%2C-frame)-%E2%87%92-boolean"><a class="header-anchor" href="#wsv2.unsubscribecandles(symbol%2C-frame)-%E2%87%92-boolean">§</a> wSv2.unsubscribeCandles(symbol, frame) ⇒ <code>boolean</code></h4><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>boolean</code> - unsubscribed<br><strong>See</strong>: module:bitfinex-api-node.WSv2#subscribeCandles</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>symbol</td><td><code>string</code></td><td>symbol of candles</td></tr><tr><td>frame</td><td><code>string</code></td><td>time frame</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js"><span class="hljs-keyword">await</span> ws.unsubscribeCandles(<span class="hljs-string">'tBTCUSD'</span>, <span class="hljs-string">'1m'</span>)
</code></pre><p><a id="module_bitfinex-api-node.WSv2+unsubscribeStatus"></a></p><h4 id="wsv2.unsubscribestatus(key)-%E2%87%92-boolean"><a class="header-anchor" href="#wsv2.unsubscribestatus(key)-%E2%87%92-boolean">§</a> wSv2.unsubscribeStatus(key) ⇒ <code>boolean</code></h4><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>boolean</code> - unsubscribed<br><strong>See</strong>: module:bitfinex-api-node.WSv2#subscribeStatus</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>key</td><td><code>string</code></td><td>key that was used in initial <a href="WSv2#subscribeStatus">WSv2#subscribeStatus</a> call</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+removeListeners"></a></p><h4 id="wsv2.removelisteners(cbgid)"><a class="header-anchor" href="#wsv2.removelisteners(cbgid)">§</a> wSv2.removeListeners(cbGID)</h4><p>Remove all listeners by callback group ID</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>cbGID</td><td><code>string</code></td><td>callback group to remove</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js"><span class="hljs-keyword">await</span> ws.subscribeTrades({ <span class="hljs-attr">symbol</span>: <span class="hljs-string">'tBTCUSD'</span>, <span class="hljs-attr">cbGID</span>: <span class="hljs-number">42</span> })
<span class="hljs-keyword">await</span> ws.subscribeTrades({ <span class="hljs-attr">symbol</span>: <span class="hljs-string">'tLEOUSD'</span>, <span class="hljs-attr">cbGID</span>: <span class="hljs-number">42</span> })
<span class="hljs-keyword">await</span> ws.subscribeTrades({ <span class="hljs-attr">symbol</span>: <span class="hljs-string">'tETHUSD'</span>, <span class="hljs-attr">cbGID</span>: <span class="hljs-number">42</span> })

<span class="hljs-comment">// ...</span>

ws.removeListeners(<span class="hljs-number">42</span>)
</code></pre><p><a id="module_bitfinex-api-node.WSv2+requestCalc"></a></p><h4 id="wsv2.requestcalc(prefixes)"><a class="header-anchor" href="#wsv2.requestcalc(prefixes)">§</a> wSv2.requestCalc(prefixes)</h4><p>Request a calc operation to be performed on the specified indexes</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>prefixes</td><td><code>Array.&lt;string&gt;</code></td><td>desired prefixes to be calculated</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+submitOrder"></a></p><h4 id="wsv2.submitorder(order)-%E2%87%92-promise"><a class="header-anchor" href="#wsv2.submitorder(order)-%E2%87%92-promise">§</a> wSv2.submitOrder(order) ⇒ <code>Promise</code></h4><p>Sends a new order to the server and resolves the returned promise once the order submit is confirmed. Emits an error if not authenticated. The order can be either an array, key/value map, or Order object instance.</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves on submit notification<br><strong>See</strong></p><ul><li>module:bitfinex-api-node.WSv2#cancelOrders</li><li>module:bitfinex-api-node.WSv2#cancelOrder</li><li>module:bitfinex-api-node.WSv2#updateOrder</li></ul><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>order</td><td><code>module:bfx-api-node-models.Order</code> | <code>module:bfx-api-node-models.Order~Data</code></td><td>order</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="hljs language-js"><span class="hljs-keyword">const</span> o = <span class="hljs-keyword">new</span> Order({
  <span class="hljs-attr">type</span>: Order.type.EXCHANGE_LIMIT,
  <span class="hljs-attr">amount</span>: <span class="hljs-number">18</span>,
  <span class="hljs-attr">price</span>: <span class="hljs-number">0.75</span>,
  <span class="hljs-attr">symbol</span>: <span class="hljs-string">'tBTCUSD'</span>,
  <span class="hljs-attr">hidden</span>: <span class="hljs-literal">true</span>
}, ws)

<span class="hljs-keyword">await</span> ws.submitOrder(o)

<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'order confirmed! status: %s'</span>, o.status)
</code></pre><p><a id="module_bitfinex-api-node.WSv2+updateOrder"></a></p><h4 id="wsv2.updateorder(changes)-%E2%87%92-promise"><a class="header-anchor" href="#wsv2.updateorder(changes)-%E2%87%92-promise">§</a> wSv2.updateOrder(changes) ⇒ <code>Promise</code></h4><p>Send a changeset to update an order in-place while maintaining position in the price queue. The changeset must contain the order ID, and supports a ‘delta’ key to increase/decrease the total amount.</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - resolves on receiving an confirmation notification<br><strong>See</strong>: module:bitfinex-api-node.WSv2#submitOrder</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>changes</td><td><code>object</code></td><td>requires at least an ‘id’</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+cancelOrder"></a></p><h4 id="wsv2.cancelorder(order)-%E2%87%92-promise"><a class="header-anchor" href="#wsv2.cancelorder(order)-%E2%87%92-promise">§</a> wSv2.cancelOrder(order) ⇒ <code>Promise</code></h4><p>Cancels an order by ID and resolves the returned promise once the cancel is confirmed. Emits an error if not authenticated. The ID can be passed as a number, or taken from an order array/object.</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>Promise</code> - p<br><strong>See</strong>: module:bitfinex-api-node.WSv2#submitOrder</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>order</td><td><code>module:bfx-api-node-models.Order</code> | <code>module:bfx-api-node-models.Order~Data</code> | <code>number</code></td><td>order model, array, or ID to be cancelled</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+cancelOrders"></a></p><h4 id="wsv2.cancelorders(orders)-%E2%87%92-promise"><a class="header-anchor" href="#wsv2.cancelorders(orders)-%E2%87%92-promise">§</a> wSv2.cancelOrders(orders) ⇒ <code>Promise</code></h4><p>Cancels multiple orders, returns a promise that resolves once all operations are confirmed.</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>Promise</code> - p<br><strong>See</strong>: module:bitfinex-api-node.WSv2#submitOrder</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>orders</td><td><code>Array.&lt;module:bfx-api-node-models.Order&gt;</code> | <code>Array.&lt;module:bfx-api-node-models.Order~Data&gt;</code> | <code>Array.&lt;number&gt;</code></td><td>array of order models, arrays or IDs to be cancelled</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+submitOrderMultiOp"></a></p><h4 id="wsv2.submitordermultiop(oppayloads)-%E2%87%92-promise"><a class="header-anchor" href="#wsv2.submitordermultiop(oppayloads)-%E2%87%92-promise">§</a> wSv2.submitOrderMultiOp(opPayloads) ⇒ <code>Promise</code></h4><p>Sends the op payloads to the server as an ‘ox_multi’ command. A promise is returned and resolves immediately if authenticated, as no confirmation is available for this message type.</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>Promise</code> - p - rejects if not authenticated</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opPayloads</td><td><code>Array.&lt;object&gt;</code></td><td>order operations</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+isAuthenticated"></a></p><h4 id="wsv2.isauthenticated()-%E2%87%92-boolean"><a class="header-anchor" href="#wsv2.isauthenticated()-%E2%87%92-boolean">§</a> wSv2.isAuthenticated() ⇒ <code>boolean</code></h4><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>boolean</code> - authenticated<br><a id="module_bitfinex-api-node.WSv2+isOpen"></a></p><h4 id="wsv2.isopen()-%E2%87%92-boolean"><a class="header-anchor" href="#wsv2.isopen()-%E2%87%92-boolean">§</a> wSv2.isOpen() ⇒ <code>boolean</code></h4><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>boolean</code> - open<br><a id="module_bitfinex-api-node.WSv2+isReconnecting"></a></p><h4 id="wsv2.isreconnecting()-%E2%87%92-boolean"><a class="header-anchor" href="#wsv2.isreconnecting()-%E2%87%92-boolean">§</a> wSv2.isReconnecting() ⇒ <code>boolean</code></h4><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Returns</strong>: <code>boolean</code> - reconnecting<br><a id="module_bitfinex-api-node.WSv2+notifyUI"></a></p><h4 id="wsv2.notifyui(opts)"><a class="header-anchor" href="#wsv2.notifyui(opts)">§</a> wSv2.notifyUI(opts)</h4><p>Sends a broadcast notification, which will be received by any active UI websocket connections (at <a href="http://bitfinex.com">bitfinex.com</a>), triggering a desktop notification.</p><p>In the future our mobile app will also support spawning native push notifications in response to incoming ucm-notify-ui packets.</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Throws</strong>:</p><ul><li>an error if given no type or message, or the instance is not open and authenticated</li></ul><p><strong>See</strong>: <a href="module:bfx-api-node-models.Notification">Notification</a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>module:bfx-api-node-models.Notification~BroadcastPayload</code></td><td>broadcast payload</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onInfoMessage"></a></p><h4 id="wsv2.oninfomessage(code%2C-cb)"><a class="header-anchor" href="#wsv2.oninfomessage(code%2C-cb)">§</a> wSv2.onInfoMessage(code, cb)</h4><p>Registers a new callback to be called when a matching info message is received.</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td><code>number</code></td><td>from <a href="module:bitfinex-api-node.WSv2.info">module:bitfinex-api-node.WSv2.info</a></td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onMessage"></a></p><h4 id="wsv2.onmessage(opts%2C-cb)"><a class="header-anchor" href="#wsv2.onmessage(opts%2C-cb)">§</a> wSv2.onMessage(opts, cb)</h4><p>Register a generic handler to be called with each received message</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code> | <code>number</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onCandle"></a></p><h4 id="wsv2.oncandle(opts%2C-cb)"><a class="header-anchor" href="#wsv2.oncandle(opts%2C-cb)">§</a> wSv2.onCandle(opts, cb)</h4><p>Register a handler to be called with each received candle</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong></p><ul><li><a href="https://docs.bitfinex.com/v2/reference#ws-public-candle">https://docs.bitfinex.com/v2/reference#ws-public-candle</a></li><li>module:bitfinex-api-node.WSv2#subscribeCandles</li><li>module:bitfinex-api-node.WSv2#unsubscribeCandles</li></ul><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>opts.key</td><td><code>string</code></td><td>candle set key, i.e. trade:30m:tBTCUSD</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code> | <code>number</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onOrderBook"></a></p><h4 id="wsv2.onorderbook(opts%2C-cb)"><a class="header-anchor" href="#wsv2.onorderbook(opts%2C-cb)">§</a> wSv2.onOrderBook(opts, cb)</h4><p>Register a handler to be called with each received candle</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong></p><ul><li><a href="https://docs.bitfinex.com/v2/reference#ws-public-order-books">https://docs.bitfinex.com/v2/reference#ws-public-order-books</a></li><li>module:bitfinex-api-node.WSv2#subscribeOrderBook</li><li>module:bitfinex-api-node.WSv2#unsubscribeOrderBook</li></ul><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>opts.symbol</td><td><code>string</code></td><td>book symbol</td></tr><tr><td>opts.prec</td><td><code>string</code></td><td>book precision, i.e. ‘R0’</td></tr><tr><td>opts.len</td><td><code>string</code></td><td>book length, i.e. ‘25’</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code> | <code>number</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onOrderBookChecksum"></a></p><h4 id="wsv2.onorderbookchecksum(opts%2C-cb)"><a class="header-anchor" href="#wsv2.onorderbookchecksum(opts%2C-cb)">§</a> wSv2.onOrderBookChecksum(opts, cb)</h4><p>Register a handler to be called with each received order book checksum</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong></p><ul><li><a href="https://docs.bitfinex.com/v2/reference#ws-public-order-books">https://docs.bitfinex.com/v2/reference#ws-public-order-books</a></li><li>module:bitfinex-api-node.WSv2#subscribeOrderBook</li><li>module:bitfinex-api-node.WSv2#unsubscribeOrderBook</li></ul><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>opts.symbol</td><td><code>string</code></td><td>book symbol</td></tr><tr><td>opts.prec</td><td><code>string</code></td><td>book precision, i.e. ‘R0’</td></tr><tr><td>opts.len</td><td><code>string</code></td><td>book length, i.e. ‘25’</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code> | <code>number</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onTrades"></a></p><h4 id="wsv2.ontrades(opts%2C-cb)"><a class="header-anchor" href="#wsv2.ontrades(opts%2C-cb)">§</a> wSv2.onTrades(opts, cb)</h4><p>Register a handler to be called with each received trade (pair or symbol required)</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong></p><ul><li><a href="https://docs.bitfinex.com/v2/reference#ws-public-trades">https://docs.bitfinex.com/v2/reference#ws-public-trades</a></li><li>module:bitfinex-api-node.WSv2#subscribeTrades</li><li>module:bitfinex-api-node.WSv2#unsubscribeTrades</li></ul><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>[opts.pair]</td><td><code>string</code></td><td>required if no symbol specified</td></tr><tr><td>[opts.symbol]</td><td><code>string</code></td><td>required if no pair specified</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code> | <code>number</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onTradeEntry"></a></p><h4 id="wsv2.ontradeentry(opts%2C-cb)"><a class="header-anchor" href="#wsv2.ontradeentry(opts%2C-cb)">§</a> wSv2.onTradeEntry(opts, cb)</h4><p>Register a handler to be called on each trade <code>'te'</code> event</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong></p><ul><li><a href="https://docs.bitfinex.com/v2/reference#ws-public-trades">https://docs.bitfinex.com/v2/reference#ws-public-trades</a></li><li>module:bitfinex-api-node.WSv2#subscribeTrades</li><li>module:bitfinex-api-node.WSv2#unsubscribeTrades</li></ul><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>[opts.pair]</td><td><code>string</code></td><td>required if no symbol specified</td></tr><tr><td>[opts.symbol]</td><td><code>string</code></td><td>required if no pair specified</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code> | <code>number</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onAccountTradeEntry"></a></p><h4 id="wsv2.onaccounttradeentry(opts%2C-cb)"><a class="header-anchor" href="#wsv2.onaccounttradeentry(opts%2C-cb)">§</a> wSv2.onAccountTradeEntry(opts, cb)</h4><p>Register a handler to be called on each personal trade <code>'te'</code> event</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong>: <a href="https://docs.bitfinex.com/v2/reference#ws-public-trades">https://docs.bitfinex.com/v2/reference#ws-public-trades</a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>[opts.pair]</td><td><code>string</code></td><td>required if no symbol specified</td></tr><tr><td>[opts.symbol]</td><td><code>string</code></td><td>required if no pair specified</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code> | <code>number</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onAccountTradeUpdate"></a></p><h4 id="wsv2.onaccounttradeupdate(opts%2C-cb)"><a class="header-anchor" href="#wsv2.onaccounttradeupdate(opts%2C-cb)">§</a> wSv2.onAccountTradeUpdate(opts, cb)</h4><p>Register a handler to be called on each personal trade <code>'tu'</code> event</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong>: <a href="https://docs.bitfinex.com/v2/reference#ws-auth-trades">https://docs.bitfinex.com/v2/reference#ws-auth-trades</a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>[opts.pair]</td><td><code>string</code></td><td>required if no symbol specified</td></tr><tr><td>[opts.symbol]</td><td><code>string</code></td><td>required if no pair specified</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code> | <code>number</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onTicker"></a></p><h4 id="wsv2.onticker(opts%2C-cb)"><a class="header-anchor" href="#wsv2.onticker(opts%2C-cb)">§</a> wSv2.onTicker(opts, cb)</h4><p>Register a handler to be called on each received ticker</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong></p><ul><li><a href="https://docs.bitfinex.com/v2/reference#ws-public-ticker">https://docs.bitfinex.com/v2/reference#ws-public-ticker</a></li><li>module:bitfinex-api-node.WSv2#subscribeTicker</li><li>module:bitfinex-api-node.WSv2#unsubscribeTicker</li></ul><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>opts.symbol</td><td><code>string</code></td><td>symbol for tickers</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code> | <code>number</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onStatus"></a></p><h4 id="wsv2.onstatus(opts%2C-cb)"><a class="header-anchor" href="#wsv2.onstatus(opts%2C-cb)">§</a> wSv2.onStatus(opts, cb)</h4><p>Register a handler to be called on each message for the desired status feed.</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong>: module:bitfinex-api-node.WSv2#subscribeStatus</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>opts.key</td><td><code>string</code></td><td>key of feed to listen on</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code> | <code>number</code></td><td>callback group ID</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onOrderSnapshot"></a></p><h4 id="wsv2.onordersnapshot(opts%2C-cb)"><a class="header-anchor" href="#wsv2.onordersnapshot(opts%2C-cb)">§</a> wSv2.onOrderSnapshot(opts, cb)</h4><p>Register a handler to be called on each full order snapshot (sent on auth)</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong></p><ul><li><a href="https://docs.bitfinex.com/v2/reference#ws-auth-orders">https://docs.bitfinex.com/v2/reference#ws-auth-orders</a></li><li>module:bitfinex-api-node.WSv2#auth</li></ul><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>[opts.symbol]</td><td><code>string</code></td><td>symbol to match</td></tr><tr><td>[<a href="http://opts.id">opts.id</a>]</td><td><code>number</code></td><td>order ID to match</td></tr><tr><td>[opts.cid]</td><td><code>number</code></td><td>order client ID to match</td></tr><tr><td>[opts.gid]</td><td><code>number</code></td><td>order group ID to match</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code> | <code>number</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onOrderNew"></a></p><h4 id="wsv2.onordernew(opts%2C-cb)"><a class="header-anchor" href="#wsv2.onordernew(opts%2C-cb)">§</a> wSv2.onOrderNew(opts, cb)</h4><p>Register a handler to be called on each new order packet</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong></p><ul><li><a href="https://docs.bitfinex.com/v2/reference#ws-auth-orders">https://docs.bitfinex.com/v2/reference#ws-auth-orders</a></li><li>module:bitfinex-api-node.WSv2#submitOrder</li></ul><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>[opts.symbol]</td><td><code>string</code></td><td>symbol to match</td></tr><tr><td>[<a href="http://opts.id">opts.id</a>]</td><td><code>number</code></td><td>order ID to match</td></tr><tr><td>[opts.cid]</td><td><code>number</code></td><td>order client ID to match</td></tr><tr><td>[opts.gid]</td><td><code>number</code></td><td>order group ID to match</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onOrderUpdate"></a></p><h4 id="wsv2.onorderupdate(opts%2C-cb)"><a class="header-anchor" href="#wsv2.onorderupdate(opts%2C-cb)">§</a> wSv2.onOrderUpdate(opts, cb)</h4><p>Register a handler to be called on each order update packet</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong></p><ul><li><a href="https://docs.bitfinex.com/v2/reference#ws-auth-orders">https://docs.bitfinex.com/v2/reference#ws-auth-orders</a></li><li>module:bitfinex-api-node.WSv2#updateOrder</li></ul><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>[opts.symbol]</td><td><code>string</code></td><td>symbol to match</td></tr><tr><td>[<a href="http://opts.id">opts.id</a>]</td><td><code>number</code></td><td>order ID to match</td></tr><tr><td>[opts.cid]</td><td><code>number</code></td><td>order client ID to match</td></tr><tr><td>[opts.gid]</td><td><code>number</code></td><td>order group ID to match</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onOrderClose"></a></p><h4 id="wsv2.onorderclose(opts%2C-cb)"><a class="header-anchor" href="#wsv2.onorderclose(opts%2C-cb)">§</a> wSv2.onOrderClose(opts, cb)</h4><p>Register a handler to be called on each order close packet</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong></p><ul><li><a href="https://docs.bitfinex.com/v2/reference#ws-auth-orders">https://docs.bitfinex.com/v2/reference#ws-auth-orders</a></li><li>module:bitfinex-api-node.WSv2#cancelOrder</li></ul><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>[opts.symbol]</td><td><code>string</code></td><td>symbol to match</td></tr><tr><td>[<a href="http://opts.id">opts.id</a>]</td><td><code>number</code></td><td>order ID to match</td></tr><tr><td>[opts.cid]</td><td><code>number</code></td><td>order client ID to match</td></tr><tr><td>[opts.gid]</td><td><code>number</code></td><td>order group ID to match</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onPositionSnapshot"></a></p><h4 id="wsv2.onpositionsnapshot(opts%2C-cb)"><a class="header-anchor" href="#wsv2.onpositionsnapshot(opts%2C-cb)">§</a> wSv2.onPositionSnapshot(opts, cb)</h4><p>Register a handler to be called on each position snapshot (sent on auth)</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong></p><ul><li><a href="https://docs.bitfinex.com/v2/reference#ws-auth-position">https://docs.bitfinex.com/v2/reference#ws-auth-position</a></li><li>module:bitfinex-api-node.WSv2#auth</li></ul><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>[opts.symbol]</td><td><code>string</code></td><td>symbol to match</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onPositionNew"></a></p><h4 id="wsv2.onpositionnew(opts%2C-cb)"><a class="header-anchor" href="#wsv2.onpositionnew(opts%2C-cb)">§</a> wSv2.onPositionNew(opts, cb)</h4><p>Register a handler to be called when a position is opened</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong>: <a href="https://docs.bitfinex.com/v2/reference#ws-auth-position">https://docs.bitfinex.com/v2/reference#ws-auth-position</a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>[opts.symbol]</td><td><code>string</code></td><td>symbol to match</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onPositionUpdate"></a></p><h4 id="wsv2.onpositionupdate(opts%2C-cb)"><a class="header-anchor" href="#wsv2.onpositionupdate(opts%2C-cb)">§</a> wSv2.onPositionUpdate(opts, cb)</h4><p>Register a handler to be called when a position is updated</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong>: <a href="https://docs.bitfinex.com/v2/reference#ws-auth-position">https://docs.bitfinex.com/v2/reference#ws-auth-position</a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>[opts.symbol]</td><td><code>string</code></td><td>symbol to match</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onPositionClose"></a></p><h4 id="wsv2.onpositionclose(opts%2C-cb)"><a class="header-anchor" href="#wsv2.onpositionclose(opts%2C-cb)">§</a> wSv2.onPositionClose(opts, cb)</h4><p>Register a handler to be called when a position is closed</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong>: <a href="https://docs.bitfinex.com/v2/reference#ws-auth-position">https://docs.bitfinex.com/v2/reference#ws-auth-position</a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>[opts.symbol]</td><td><code>string</code></td><td>symbol to match</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onFundingOfferSnapshot"></a></p><h4 id="wsv2.onfundingoffersnapshot(opts%2C-cb)"><a class="header-anchor" href="#wsv2.onfundingoffersnapshot(opts%2C-cb)">§</a> wSv2.onFundingOfferSnapshot(opts, cb)</h4><p>Register a handler to be called on each fundign offer snapshot (sent on auth)</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong></p><ul><li><a href="https://docs.bitfinex.com/v2/reference#ws-auth-offers">https://docs.bitfinex.com/v2/reference#ws-auth-offers</a></li><li>module:bitfinex-api-node.WSv2#auth</li></ul><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>[opts.symbol]</td><td><code>string</code></td><td>symbol to match</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onFundingOfferNew"></a></p><h4 id="wsv2.onfundingoffernew(opts%2C-cb)"><a class="header-anchor" href="#wsv2.onfundingoffernew(opts%2C-cb)">§</a> wSv2.onFundingOfferNew(opts, cb)</h4><p>Register a handler to be called when a funding offer is created</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong>: <a href="https://docs.bitfinex.com/v2/reference#ws-auth-offers">https://docs.bitfinex.com/v2/reference#ws-auth-offers</a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>[opts.symbol]</td><td><code>string</code></td><td>symbol to match</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onFundingOfferUpdate"></a></p><h4 id="wsv2.onfundingofferupdate(opts%2C-cb)"><a class="header-anchor" href="#wsv2.onfundingofferupdate(opts%2C-cb)">§</a> wSv2.onFundingOfferUpdate(opts, cb)</h4><p>Register a handler to be called when a funding offer is updated</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong>: <a href="https://docs.bitfinex.com/v2/reference#ws-auth-offers">https://docs.bitfinex.com/v2/reference#ws-auth-offers</a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>[opts.symbol]</td><td><code>string</code></td><td>symbol to match</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onFundingOfferClose"></a></p><h4 id="wsv2.onfundingofferclose(opts%2C-cb)"><a class="header-anchor" href="#wsv2.onfundingofferclose(opts%2C-cb)">§</a> wSv2.onFundingOfferClose(opts, cb)</h4><p>Register a handler to be called when a funding offer is closed</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong>: <a href="https://docs.bitfinex.com/v2/reference#ws-auth-offers">https://docs.bitfinex.com/v2/reference#ws-auth-offers</a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>[opts.symbol]</td><td><code>string</code></td><td>symbol to match</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onFundingCreditSnapshot"></a></p><h4 id="wsv2.onfundingcreditsnapshot(opts%2C-cb)"><a class="header-anchor" href="#wsv2.onfundingcreditsnapshot(opts%2C-cb)">§</a> wSv2.onFundingCreditSnapshot(opts, cb)</h4><p>Register a handler to be called on each funding credit snapshot (sent on auth)</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong></p><ul><li><a href="https://docs.bitfinex.com/v2/reference#ws-auth-credits">https://docs.bitfinex.com/v2/reference#ws-auth-credits</a></li><li>module:bitfinex-api-node.WSv2#auth</li></ul><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>[opts.symbol]</td><td><code>string</code></td><td>symbol to match</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onFundingCreditNew"></a></p><h4 id="wsv2.onfundingcreditnew(opts%2C-cb)"><a class="header-anchor" href="#wsv2.onfundingcreditnew(opts%2C-cb)">§</a> wSv2.onFundingCreditNew(opts, cb)</h4><p>Register a handler to be called when a funding credit is created</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong>: <a href="https://docs.bitfinex.com/v2/reference#ws-auth-credits">https://docs.bitfinex.com/v2/reference#ws-auth-credits</a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>[opts.symbol]</td><td><code>string</code></td><td>symbol to match</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onFundingCreditUpdate"></a></p><h4 id="wsv2.onfundingcreditupdate(opts%2C-cb)"><a class="header-anchor" href="#wsv2.onfundingcreditupdate(opts%2C-cb)">§</a> wSv2.onFundingCreditUpdate(opts, cb)</h4><p>Register a handler to be called when a funding credit is updated</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong>: <a href="https://docs.bitfinex.com/v2/reference#ws-auth-credits">https://docs.bitfinex.com/v2/reference#ws-auth-credits</a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>[opts.symbol]</td><td><code>string</code></td><td>symbol to match</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onFundingCreditClose"></a></p><h4 id="wsv2.onfundingcreditclose(opts%2C-cb)"><a class="header-anchor" href="#wsv2.onfundingcreditclose(opts%2C-cb)">§</a> wSv2.onFundingCreditClose(opts, cb)</h4><p>Register a handler to be called when a funding credit is closed</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong>: <a href="https://docs.bitfinex.com/v2/reference#ws-auth-credits">https://docs.bitfinex.com/v2/reference#ws-auth-credits</a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>[opts.symbol]</td><td><code>string</code></td><td>symbol to match</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onFundingLoanSnapshot"></a></p><h4 id="wsv2.onfundingloansnapshot(opts%2C-cb)"><a class="header-anchor" href="#wsv2.onfundingloansnapshot(opts%2C-cb)">§</a> wSv2.onFundingLoanSnapshot(opts, cb)</h4><p>Register a handler to be called on each funding loan snapshot (sent on auth)</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong></p><ul><li><a href="https://docs.bitfinex.com/v2/reference#ws-auth-loans">https://docs.bitfinex.com/v2/reference#ws-auth-loans</a></li><li>module:bitfinex-api-node.WSv2#auth</li></ul><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>[opts.symbol]</td><td><code>string</code></td><td>symbol to match</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onFundingLoanNew"></a></p><h4 id="wsv2.onfundingloannew(opts%2C-cb)"><a class="header-anchor" href="#wsv2.onfundingloannew(opts%2C-cb)">§</a> wSv2.onFundingLoanNew(opts, cb)</h4><p>Register a handler to be called when a funding loan is created</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong>: <a href="https://docs.bitfinex.com/v2/reference#ws-auth-loans">https://docs.bitfinex.com/v2/reference#ws-auth-loans</a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>[opts.symbol]</td><td><code>string</code></td><td>symbol to match</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onFundingLoanUpdate"></a></p><h4 id="wsv2.onfundingloanupdate(opts%2C-cb)"><a class="header-anchor" href="#wsv2.onfundingloanupdate(opts%2C-cb)">§</a> wSv2.onFundingLoanUpdate(opts, cb)</h4><p>Register a handler to be called when a funding loan is updated</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong>: <a href="https://docs.bitfinex.com/v2/reference#ws-auth-loans">https://docs.bitfinex.com/v2/reference#ws-auth-loans</a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>[opts.symbol]</td><td><code>string</code></td><td>symbol to match</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onFundingLoanClose"></a></p><h4 id="wsv2.onfundingloanclose(opts%2C-cb)"><a class="header-anchor" href="#wsv2.onfundingloanclose(opts%2C-cb)">§</a> wSv2.onFundingLoanClose(opts, cb)</h4><p>Register a handler to be called when a funding loan is closed</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong>: <a href="https://docs.bitfinex.com/v2/reference#ws-auth-loans">https://docs.bitfinex.com/v2/reference#ws-auth-loans</a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>[opts.symbol]</td><td><code>string</code></td><td>symbol to match</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onWalletSnapshot"></a></p><h4 id="wsv2.onwalletsnapshot(opts%2C-cb)"><a class="header-anchor" href="#wsv2.onwalletsnapshot(opts%2C-cb)">§</a> wSv2.onWalletSnapshot(opts, cb)</h4><p>Register a handler to be called on each wallet snapshot (sent on auth)</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong>: <a href="https://docs.bitfinex.com/v2/reference#ws-auth-wallets">https://docs.bitfinex.com/v2/reference#ws-auth-wallets</a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onWalletUpdate"></a></p><h4 id="wsv2.onwalletupdate(opts%2C-cb)"><a class="header-anchor" href="#wsv2.onwalletupdate(opts%2C-cb)">§</a> wSv2.onWalletUpdate(opts, cb)</h4><p>Register a handler to be called on each wallet update</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong>: <a href="https://docs.bitfinex.com/v2/reference#ws-auth-wallets">https://docs.bitfinex.com/v2/reference#ws-auth-wallets</a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onBalanceInfoUpdate"></a></p><h4 id="wsv2.onbalanceinfoupdate(opts%2C-cb)"><a class="header-anchor" href="#wsv2.onbalanceinfoupdate(opts%2C-cb)">§</a> wSv2.onBalanceInfoUpdate(opts, cb)</h4><p>Register a handler to be called on each balance info update</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong>: <a href="https://docs.bitfinex.com/v2/reference#ws-auth-balance">https://docs.bitfinex.com/v2/reference#ws-auth-balance</a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onMarginInfoUpdate"></a></p><h4 id="wsv2.onmargininfoupdate(opts%2C-cb)"><a class="header-anchor" href="#wsv2.onmargininfoupdate(opts%2C-cb)">§</a> wSv2.onMarginInfoUpdate(opts, cb)</h4><p>Register a handler to be called on each margin info update</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong>: <a href="https://docs.bitfinex.com/v2/reference#ws-auth-margin">https://docs.bitfinex.com/v2/reference#ws-auth-margin</a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onFundingInfoUpdate"></a></p><h4 id="wsv2.onfundinginfoupdate(opts%2C-cb)"><a class="header-anchor" href="#wsv2.onfundinginfoupdate(opts%2C-cb)">§</a> wSv2.onFundingInfoUpdate(opts, cb)</h4><p>Register a handler to be called on each funding info update</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong>: <a href="https://docs.bitfinex.com/v2/reference#ws-auth-funding">https://docs.bitfinex.com/v2/reference#ws-auth-funding</a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onFundingTradeEntry"></a></p><h4 id="wsv2.onfundingtradeentry(opts%2C-cb)"><a class="header-anchor" href="#wsv2.onfundingtradeentry(opts%2C-cb)">§</a> wSv2.onFundingTradeEntry(opts, cb)</h4><p>Register a handler to be called on each funding trade <code>'te'</code> event</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong>: <a href="https://docs.bitfinex.com/v2/reference#ws-auth-funding-trades">https://docs.bitfinex.com/v2/reference#ws-auth-funding-trades</a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>[opts.symbol]</td><td><code>string</code></td><td>symbol to match</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onFundingTradeUpdate"></a></p><h4 id="wsv2.onfundingtradeupdate(opts%2C-cb)"><a class="header-anchor" href="#wsv2.onfundingtradeupdate(opts%2C-cb)">§</a> wSv2.onFundingTradeUpdate(opts, cb)</h4><p>Register a handler to be called on each funding trade <code>'tu'</code> event</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong>: <a href="https://docs.bitfinex.com/v2/reference#ws-auth-funding-trades">https://docs.bitfinex.com/v2/reference#ws-auth-funding-trades</a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>[opts.symbol]</td><td><code>string</code></td><td>symbol to match</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2+onNotification"></a></p><h4 id="wsv2.onnotification(opts%2C-cb)"><a class="header-anchor" href="#wsv2.onnotification(opts%2C-cb)">§</a> wSv2.onNotification(opts, cb)</h4><p>Register a handler to be called on each notification</p><p><strong>Kind</strong>: instance method of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>See</strong>: <a href="https://docs.bitfinex.com/v2/reference#ws-auth-notifications">https://docs.bitfinex.com/v2/reference#ws-auth-notifications</a></p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>opts</td><td><code>object</code></td><td>options</td></tr><tr><td>[opts.type]</td><td><code>string</code></td><td>type to match</td></tr><tr><td>[opts.cbGID]</td><td><code>string</code></td><td>callback group id</td></tr><tr><td>cb</td><td><code>function</code></td><td>callback</td></tr></tbody></table><p><a id="module_bitfinex-api-node.WSv2.url"></a></p><h4 id="wsv2.url-%3A-string"><a class="header-anchor" href="#wsv2.url-%3A-string">§</a> WSv2.url : <code>string</code></h4><p>Default connection URL</p><p><strong>Kind</strong>: static constant of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Default</strong>: <code>“wss://api.bitfinex.com/ws/2”</code><br><a id="module_bitfinex-api-node.WSv2..Configuration"></a></p><h4 id="wsv2~configuration-%3A-object"><a class="header-anchor" href="#wsv2~configuration-%3A-object">§</a> WSv2~Configuration : <code>object</code></h4><p>Configuration options for a <a href="#module_bitfinex-api-node.WSv2">WSv2</a> client instance.</p><p><strong>Kind</strong>: inner typedef of <a href="#module_bitfinex-api-node.WSv2"><code>WSv2</code></a><br><strong>Properties</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>[affCode]</td><td><code>string</code></td><td><code>&quot;''&quot;</code></td><td>affiliate code to be applied to all orders</td></tr><tr><td>[apiKey]</td><td><code>string</code></td><td><code>&quot;''&quot;</code></td><td>API key</td></tr><tr><td>[apiSecret]</td><td><code>string</code></td><td><code>&quot;''&quot;</code></td><td>API secret</td></tr><tr><td>[url]</td><td><code>string</code></td><td><code>&quot;'wss://api.bitfinex.com/ws/2'&quot;</code></td><td>ws connection url</td></tr><tr><td>[orderOpBufferDelay]</td><td><code>number</code></td><td></td><td>multi-order op batching timeout</td></tr><tr><td>[transform]</td><td><code>boolean</code></td><td></td><td>if true, packets are converted to models</td></tr><tr><td>[agent]</td><td><code>object</code></td><td></td><td>node agent for ws connection (proxy)</td></tr><tr><td>[manageOrderBooks]</td><td><code>boolean</code></td><td></td><td>enable local OB persistence</td></tr><tr><td>[manageCandles]</td><td><code>boolean</code></td><td></td><td>enable local candle persistence</td></tr><tr><td>[seqAudit]</td><td><code>boolean</code></td><td></td><td>enable sequence numbers &amp; verification</td></tr><tr><td>[autoReconnect]</td><td><code>boolean</code></td><td></td><td>if true, we will reconnect on close</td></tr><tr><td>[reconnectDelay]</td><td><code>number</code></td><td></td><td>optional, defaults to 1000 (ms)</td></tr><tr><td>[reconnectThrottler]</td><td><code>object</code></td><td></td><td>pt to limit reconnect freq</td></tr><tr><td>[packetWDDelay]</td><td><code>number</code></td><td></td><td>watch-dog forced reconnection delay</td></tr></tbody></table></div></div><!--
      <div id="bfx-oss-docs-footer-bar">
        <div id="bfx-oss-docs-footer-bar__container">
          <p>Copyright © 2013-2020 iFinex Inc. All rights reserved.</p>
        </div>
      </div>
      --></div><script type="text/javascript" src="js/vendor/debug.min.js"></script><script type="text/javascript" src="js/vendor/lodash.min.js"></script><script type="text/javascript" src="js/vendor/zepto.min.js"></script><script type="text/javascript" src="js/vendor/perfect-scrollbar.min.js"></script><script type="text/javascript" src="js/main.js"></script></body></html>