<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width,initial-scale=1"><meta charset="utf-8"><link rel="stylesheet" type="text/css" href="css/normalize.css"><link rel="stylesheet" type="text/css" href="index.css"><link rel="stylesheet" type="text/css" href="css/highlightjs/ir-black.css"><title></title></head><body><div id="bfx-oss-docs-side-bar"><img id="bfx-oss-docs-side-bar__header" src="img/bfx-logo-bg-white.png" alt="Bitfinex" height="64"><ul id="bfx-oss-docs-side-bar__main-menu"><li><a href="index.html">Home</a></li><li><a href="page_v2_overview_introduction.html">API v2 Overview</a></li><li><a href="page_v2_reference.html">API v2 Reference</a></li><li><a href="page_v1_overview_introduction.html">API v1 Overview</a></li><li><a href="page_v1_reference.html">API v1 Reference</a></li><li><a href="page_oss_projects.html">Open Source Projects</a></li></ul><div class="bfx-oss-docs-side-bar__sub-menu" id="bfx-oss-docs-side-bar__api-reference-menu"><h6>General</h6><ul><li><a href="/page_v2_overview_abbreviations_glossary.html">Abbreviation Glossary</a></li><li><a href="/page_v2_overview_changelog.html">Changelog</a></li><li><a href="/page_v2_overview_derivatives.html">API Derivatives Trading</a></li><li><a href="/page_v2_overview_flag_values.html">Flag Values</a></li><li><a href="/page_v2_overview_honey_framework.html">Honey Framework</a></li><li><a href="/page_v2_overview_introduction.html">Introduction</a></li><li><a href="/page_v2_overview_open_source_libraries.html">Open Source Libraries</a></li><li><a href="/page_v2_overview_requirements_and_limitations.html">Requirements and Limitations</a></li><li><a href="/page_v2_overview_rest_auth.html">Authenticated Endpoints</a></li><li><a href="/page_v2_overview_rest_general.html">General</a></li><li><a href="/page_v2_overview_rest_public.html">Public Endpoints</a></li><li><a href="/page_v2_overview_rest_reading_the_api_documentation.html">Reading the Documentation (REST)</a></li><li><a href="/page_v2_overview_showcase.html">Showcase</a></li><li><a href="/page_v2_overview_ui_goodies.html">UI Goodies</a></li><li><a href="/page_v2_overview_ws_auth.html">Authenticated Channels</a></li><li><a href="/page_v2_overview_ws_general.html">General</a></li><li><a href="/page_v2_overview_ws_public.html">Public Channels</a></li><li><a href="/page_v2_overview_ws_reading_the_documentation.html">Reading the Documentation (WS)</a></li></ul></div></div><div id="bfx-oss-docs-content"><div id="bfx-oss-docs-header-bar"><h2>Documentation</h2><h2>General</h2></div><div class="bfx-oss-docs-content-wrapper"><div class="bfx-oss-docs-md-content bfx-oss-docs-code-wrapper"><h3>Current Version</h3><p>Bitfinex Websocket API version is 2.0</p><h3>URL</h3><p>Channels that require authentication should use the domain: wss://api.bitfinex.com/</p><p>Public channels should use the domain: wss://api-pub.bitfinex.com/</p><pre><code class="hljs language-text">// For public channels:
wss://api-pub.bitfinex.com/ws/2

// For authenticated channels:
wss://api.bitfinex.com/ws/2
</code></pre><h3>Message encoding</h3><p>Each message sent and received via the Bitfinex’s websocket channel is encoded in JSON format</p><p>All times are UTC timestamps expressed as milliseconds (eg 1477409622229)</p><div class="bfx-oss-docs-callout danger"><div class="bfx-oss-docs-callout__marker"><p>!</p></div><div class="bfx-oss-docs-callout__content"><div class="bfx-oss-docs-callout__header"><p>Array Length</p><h6>danger</h6></div><div class="bfx-oss-docs-callout__body"><p>Message (JSON array) lengths should never be hardcoded. New fields may be appended at the end of a message without changing version.</p></div></div></div><h3>Supported Pairs</h3><p>All pairs available in the platform are supported. A symbol can be a trading pair or a margin currency. All symbols are in uppercase (i.e. btcusd is invalid, BTCUSD is valid).</p><p>Trading pairs are prepended by a “t” before the pair (e.g. tBTCUSD, tETHUSD, …). Margin currencies are prepended by an “f” before the currency (e.g. fUSD, fBTC, …).</p><p>Lists of available currencies and pairs can be retrieved through the <a href="https://docs.bitfinex.com/reference#rest-public-conf">Configs endpoint</a>.</p><p>For a list of all currencies on the platform, look to: <a href="https://api-pub.bitfinex.com/v2/conf/pub:list:currency">https://api-pub.bitfinex.com/v2/conf/pub:list:currency</a> For a list of all trading pairs on the platform, look to: <a href="https://api-pub.bitfinex.com/v2/conf/pub:list:pair:exchange">https://api-pub.bitfinex.com/v2/conf/pub:list:pair:exchange</a> For a list of all margin trading pairs on the platform, look to: <a href="https://api-pub.bitfinex.com/v2/conf/pub:list:pair:margin">https://api-pub.bitfinex.com/v2/conf/pub:list:pair:margin</a></p><h3>How to Connect</h3><p>Open up a websocket connection to the websocket URI.</p><div class="bfx-oss-docs-grouped-code-fence__container bfx-oss-docs-code-wrapper"><ul class="bfx-oss-docs-grouped-code-fence__navigation-bar"><li><input type="radio" style="display: none;" class="bfx-oss-docs-grouped-code-fence__label-radio" id="label-group-3-0" name="label-group-3" checked=""><label for="group-3-0" onclick="this.previousElementSibling.click()">javascript</label></li><li><input type="radio" style="display: none;" class="bfx-oss-docs-grouped-code-fence__label-radio" id="label-group-3-6" name="label-group-3"><label for="group-3-6" onclick="this.previousElementSibling.click()">go</label></li></ul><input type="radio" style="display: none;" class="bfx-oss-docs-grouped-code-fence__fence-radio" id="group-3-0" name="group-3" checked=""><pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> WebSocket = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ws'</span>)

<span class="hljs-keyword">const</span> wss = <span class="hljs-keyword">new</span> WebSocket(<span class="hljs-string">'wss://api-pub.bitfinex.com/ws/2'</span>)
wss.onmessage = <span class="hljs-function">(<span class="hljs-params">msg</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(msg.data)
wss.onopen = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-comment">// API keys setup here (See "Authenticated Channels")</span>
}
</code></pre><input type="radio" style="display: none;" class="bfx-oss-docs-grouped-code-fence__fence-radio" id="group-3-6" name="group-3"><pre><code class="hljs language-go"><span class="hljs-keyword">import</span> (
	<span class="hljs-string">"code.google.com/p/go.net/websocket"</span>
)

ws, err := websocket.Dial(<span class="hljs-string">"wss://api.bitfinex.com/ws/2"</span>, <span class="hljs-string">""</span>, <span class="hljs-string">"http://localhost/"</span>)
<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
    <span class="hljs-keyword">return</span> err
}
</code></pre></div><p>A connection to one or more <a href="doc:ws-public">Public Channels</a> can be opened by running the example code found on their respective documentation pages.</p><p>Instructions on how to establish a connection to an authenticated channel can be found on the <a href="doc:ws-auth">Authenticated Channels</a> page.</p><p>Instructions on Websocket Inputs can be found on the <a href="ref:ws-auth-input">Websocket Inputs</a> page.</p><p>###Subscribe to Channels</p><p>You can subscribe to channels using a subscribe event. Below is a request response template:</p><pre><code class="hljs language-json"><span class="hljs-comment">// request</span>
{
   <span class="hljs-attr">"event"</span>: <span class="hljs-string">"subscribe"</span>,
   <span class="hljs-attr">"channel"</span>: CHANNEL_NAME
}

<span class="hljs-comment">// response</span>
{
   <span class="hljs-attr">"event"</span>: <span class="hljs-string">"subscribed"</span>,
   <span class="hljs-attr">"channel"</span>: CHANNEL_NAME,
   <span class="hljs-attr">"chanId"</span>: CHANNEL_ID
}

<span class="hljs-comment">// response-failure</span>
{
   <span class="hljs-attr">"event"</span>: <span class="hljs-string">"error"</span>,
   <span class="hljs-attr">"msg"</span>: ERROR_MSG,
   <span class="hljs-attr">"code"</span>: ERROR_CODE
}
</code></pre><div class="bfx-oss-docs-callout info"><div class="bfx-oss-docs-callout__marker"><p>!</p></div><div class="bfx-oss-docs-callout__content"><div class="bfx-oss-docs-callout__header"><p>Channel Name and Channel ID</p><h6>info</h6></div><div class="bfx-oss-docs-callout__body"><p>When subscribing to channels, each will be given a CHANNEL_ID and CHANNEL_NAME.</p><ul><li>CHANNEL_NAME: (string) channel name (book, trades, ticker)</li><li>CHANNEL_ID: (int) channel identifier. CHANNEL_ID is a numeric channel identifier that the developer can use to distinguish between updates for each subscribed channel.</li></ul></div></div></div><div class="bfx-oss-docs-callout info"><div class="bfx-oss-docs-callout__marker"><p>!</p></div><div class="bfx-oss-docs-callout__content"><div class="bfx-oss-docs-callout__header"><p>Subscription Limit</p><h6>info</h6></div><div class="bfx-oss-docs-callout__body"><p>All websocket connections have a limit of 30 subscriptions to public market data feed channels (tickers, book, candles, trades, …). We kindly ask all users to adapt their application setup accordingly to split subscriptions to channels using multiple WebSocket connections.</p><p>Please note that in an authenticated connection a channel is reserved for account info message.</p></div></div></div><div class="bfx-oss-docs-callout danger"><div class="bfx-oss-docs-callout__marker"><p>!</p></div><div class="bfx-oss-docs-callout__content"><div class="bfx-oss-docs-callout__header"><p>Subscription Error Codes</p><h6>danger</h6></div><div class="bfx-oss-docs-callout__body"><ul><li>10300 : Subscription failed (generic)</li><li>10301 : Already subscribed</li><li>10302 : Unknown channel</li></ul></div></div></div><p>###Unsubscribing from Channels</p><p>To stop receiving data from a channel you have to send a “unsubscribe” message. Please find a model for this below:</p><pre><code class="hljs language-json"><span class="hljs-comment">// request</span>
{
   <span class="hljs-attr">"event"</span>: <span class="hljs-string">"unsubscribe"</span>,
   <span class="hljs-attr">"chanId"</span>: CHANNEL_ID
}

<span class="hljs-comment">// response</span>
{
   <span class="hljs-attr">"event"</span>: <span class="hljs-string">"unsubscribed"</span>,
   <span class="hljs-attr">"status"</span>: <span class="hljs-string">"OK"</span>,
   <span class="hljs-attr">"chanId"</span>: CHANNEL_ID
}

<span class="hljs-comment">// response-failure</span>
{
   <span class="hljs-attr">"event"</span>: <span class="hljs-string">"error"</span>,
   <span class="hljs-attr">"msg"</span>: ERROR_MSG,
   <span class="hljs-attr">"code"</span>: ERROR_CODE
}
</code></pre><div class="bfx-oss-docs-callout danger"><div class="bfx-oss-docs-callout__marker"><p>!</p></div><div class="bfx-oss-docs-callout__content"><div class="bfx-oss-docs-callout__header"><p>Error Codes</p><h6>danger</h6></div><div class="bfx-oss-docs-callout__body"><p>10400 : Subscription failed (generic) 10401 : Not subscribed</p></div></div></div><h3>Other Error Codes</h3><p>In case of error, you receive a message containing the proper error code (<code>code</code> JSON field).</p><p>A full list of error codes can be found in the <a href="doc:abbreviations-glossary">Abbreviation Glossary</a> .</p><div class="bfx-oss-docs-callout danger"><div class="bfx-oss-docs-callout__marker"><p>!</p></div><div class="bfx-oss-docs-callout__content"><div class="bfx-oss-docs-callout__header"><p>Generic Error Codes</p><h6>danger</h6></div><div class="bfx-oss-docs-callout__body"><ul><li>10000 : Unknown event</li><li>10001 : Unknown pair</li><li>10305 : Reached limit of open channels</li></ul></div></div></div><h3>Info Messages</h3><p>Info messages are sent from the websocket server to notify you about the state of your connection.</p><p>Right after connecting you will receive an info message that contains the actual version of the websocket stream, along with a platform status flag (1 for operative, 0 for maintenance).</p><pre><code class="hljs language-json">{
   <span class="hljs-attr">"event"</span>: <span class="hljs-string">"info"</span>,
   <span class="hljs-attr">"version"</span>:  VERSION,
   <span class="hljs-attr">"platform"</span>: {
      <span class="hljs-attr">"status"</span>: <span class="hljs-number">1</span>
   }
}

</code></pre><div class="bfx-oss-docs-callout info"><div class="bfx-oss-docs-callout__marker"><p>!</p></div><div class="bfx-oss-docs-callout__content"><div class="bfx-oss-docs-callout__header"><p>NOTE</p><h6>info</h6></div><div class="bfx-oss-docs-callout__body"><p>If you are developing/using a trading bot, please make sure to handle version number changes.</p></div></div></div><p>The websocket server sends other <code>info</code> messages to inform regarding relevant events.</p><pre><code class="hljs language-json">{
   <span class="hljs-attr">"event"</span>:<span class="hljs-string">"info"</span>,
   <span class="hljs-attr">"code"</span>: CODE,
   <span class="hljs-attr">"msg"</span>: MSG
}
</code></pre><div class="bfx-oss-docs-callout info"><div class="bfx-oss-docs-callout__marker"><p>!</p></div><div class="bfx-oss-docs-callout__content"><div class="bfx-oss-docs-callout__header"><p>Info Codes</p><h6>info</h6></div><div class="bfx-oss-docs-callout__body"><ul><li>20051 : Stop/Restart Websocket Server (please reconnect)</li><li>20060 : Entering in Maintenance mode. Please pause any activity and resume after receiving the <code>info</code> message <code>20061</code> (it should take 120 seconds at most).</li><li>20061 : Maintenance ended. You can resume normal activity. It is advised to unsubscribe/subscribe again all channels.</li></ul></div></div></div><div class="bfx-oss-docs-callout warning"><div class="bfx-oss-docs-callout__marker"><p>!</p></div><div class="bfx-oss-docs-callout__content"><div class="bfx-oss-docs-callout__header"><p>Only rely on 'CODE' for 'info' events</p><h6>warning</h6></div><div class="bfx-oss-docs-callout__body"><p>We wish to emphasise to only rely on the event message codes rather than the text descriptions of the event messages. The descriptions may change over time and are not part of the protocol.</p></div></div></div><h3>Ping/Pong</h3><p>You can send a <code>ping</code> message to test your connection to the websocket server.</p><pre><code class="hljs language-json"><span class="hljs-comment">// request</span>
{
   <span class="hljs-attr">"event"</span>:<span class="hljs-string">"ping"</span>,
   <span class="hljs-attr">"cid"</span>: <span class="hljs-number">1234</span>
}

<span class="hljs-comment">// response</span>
{
   <span class="hljs-attr">"event"</span>:<span class="hljs-string">"pong"</span>,
   <span class="hljs-attr">"ts"</span>: <span class="hljs-number">1511545528111</span>,
   <span class="hljs-attr">"cid"</span>: <span class="hljs-number">1234</span>
}
</code></pre><h3>Snapshot</h3><p>Upon subscribing to a channel, sometimes an initial snapshot is sent.</p><p>Models and examples of snapshots and updates can be found on the documentation page for each channel/event.</p><h3>Update</h3><p>After receiving the snapshot, you will receive updates upon any change. Updates will have the same CHANNEL_ID as the initial snapshot and the event confirming the subscription to the channel.</p><p>Models and examples of snapshots and updates can be found on the documentation page for each channel/event.</p><h3>Heartbeating</h3><p>If there is no activity in the channel for 15 seconds, the Websocket server will send you a heartbeat message in this format.</p><pre><code class="hljs language-json">[ CHANNEL_ID, <span class="hljs-string">"hb"</span> ]
</code></pre><h3>Configuration</h3><p>Conf events can be used to change settings.</p><pre><code class="hljs language-json">{ 
  event: <span class="hljs-string">"conf"</span>, 
  flags: FLAGS
}
</code></pre><div class="bfx-oss-docs-callout info"><div class="bfx-oss-docs-callout__marker"><p>!</p></div><div class="bfx-oss-docs-callout__content"><div class="bfx-oss-docs-callout__header"><p>Flags</p><h6>info</h6></div><div class="bfx-oss-docs-callout__body"><p>In order to change the configuration, there is a new event able to be requested <code>conf</code>, and this will have a parameter <code>flags</code> which is the bitwise XOR of the different options listed below</p><p>Example: To enable all decimals as strings, set the value of flags to 8.</p><p>If you wish to enable more than one flag, sum up their values.</p></div></div></div><h3>Available Options for Conf events</h3></div></div><div id="bfx-oss-docs-footer-bar"><div id="bfx-oss-docs-footer-bar__container"><p>Copyright © 2013-2020 iFinex Inc. All rights reserved.</p></div></div></div><script type="text/javascript" src="js/vendor/zepto.min.js"></script><script type="text/javascript" src="js/vendor/lodash.min.js"></script><script type="text/javascript" src="js/vendor/debug.min.js"></script><script type="text/javascript" src="js/debug_init.js"></script></body></html>