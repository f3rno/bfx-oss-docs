<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width,initial-scale=1"><meta charset="utf-8"><link rel="stylesheet" type="text/css" href="css/normalize.css"><link rel="stylesheet" type="text/css" href="index.css"><link rel="stylesheet" type="text/css" href="css/highlightjs/ir-black.css"><title></title></head><body><div id="bfx-oss-docs-side-bar"><img id="bfx-oss-docs-side-bar__header" src="img/bfx-logo-bg-white.png" alt="Bitfinex" height="64"><ul id="bfx-oss-docs-side-bar__main-menu"><li><a href="index.html">Home</a></li><li><a href="page_v2_overview_introduction.html">API v2 Overview</a></li><li><a href="page_v2_reference.html">API v2 Reference</a></li><li><a href="page_v1_overview_introduction.html">API v1 Overview</a></li><li><a href="page_v1_reference.html">API v1 Reference</a></li><li><a href="page_oss_projects.html">Open Source Projects</a></li></ul><div class="bfx-oss-docs-side-bar__sub-menu" id="bfx-oss-docs-side-bar__api-reference-menu"><h6>Changelog</h6><ul><li><a href="/page_v2_overview_abbreviations_glossary.html">Abbreviation Glossary</a></li><li><a href="/page_v2_overview_changelog.html">Changelog</a></li><li><a href="/page_v2_overview_derivatives.html">API Derivatives Trading</a></li><li><a href="/page_v2_overview_flag_values.html">Flag Values</a></li><li><a href="/page_v2_overview_honey_framework.html">Honey Framework</a></li><li><a href="/page_v2_overview_introduction.html">Introduction</a></li><li><a href="/page_v2_overview_open_source_libraries.html">Open Source Libraries</a></li><li><a href="/page_v2_overview_requirements_and_limitations.html">Requirements and Limitations</a></li><li><a href="/page_v2_overview_rest_auth.html">Authenticated Endpoints</a></li><li><a href="/page_v2_overview_rest_general.html">General</a></li><li><a href="/page_v2_overview_rest_public.html">Public Endpoints</a></li><li><a href="/page_v2_overview_rest_reading_the_api_documentation.html">Reading the Documentation (REST)</a></li><li><a href="/page_v2_overview_showcase.html">Showcase</a></li><li><a href="/page_v2_overview_ui_goodies.html">UI Goodies</a></li><li><a href="/page_v2_overview_ws_auth.html">Authenticated Channels</a></li><li><a href="/page_v2_overview_ws_general.html">General</a></li><li><a href="/page_v2_overview_ws_public.html">Public Channels</a></li><li><a href="/page_v2_overview_ws_reading_the_documentation.html">Reading the Documentation (WS)</a></li></ul></div></div><div id="bfx-oss-docs-content"><div id="bfx-oss-docs-header-bar"><h2>Documentation</h2><h2>Changelog</h2></div><div class="bfx-oss-docs-content-wrapper"><div class="bfx-oss-docs-md-content bfx-oss-docs-code-wrapper"><h1>v2019-08-19</h1><p>Upgrade rest end point: <a href="https://api.bitfinex.com/v2/auth/r/positions/audit">https://api.bitfinex.com/v2/auth/r/positions/audit</a> (<a href="https://docs.bitfinex.com/v2/reference#positions-audit">https://docs.bitfinex.com/v2/reference#positions-audit</a>) Fields added: TYPE, COLLATERAL, COLLATERAL_MIN and META</p><h1>v2018-06-21</h1><p>Support for more granular filtering (<code>trading-tBTCUSD</code>, <code>funding-fUSD</code>, …) <a href="https://docs.bitfinex.com/v2/docs/ws-auth#section-channel-filters">https://docs.bitfinex.com/v2/docs/ws-auth#section-channel-filters</a></p><h1>v2018-06-08</h1><p>Support for TIF (Time-In-Force) for order submission and update via Websocket (<code>oc</code> and <code>ou</code> messages). This first version only support a datetime format (‘2020-01-01 10:45:23’)</p><h1>v2018-06-06</h1><p>Performance increase on order cancellation via Websocket (<code>oc</code> message)</p><h1>v2018-04-19</h1><h2>1. New RESTv2 ledger entries endpoint</h2><p>Account ledger entries (wallet movements) are now accessible via a POST request on <code>/v2/auth/r/ledgers/{currency}/hist</code>:</p><pre><code class="hljs language-javascript">request.post({
  <span class="hljs-attr">url</span>: <span class="hljs-string">`<span class="hljs-subst">${url}</span>/auth/r/ledgers/BTC/hist`</span>,
  <span class="hljs-attr">headers</span>: { <span class="hljs-comment">/* auth headers */</span> },
  <span class="hljs-attr">body</span>: {},
  <span class="hljs-attr">json</span>: <span class="hljs-literal">true</span>,
}, (error, response, body) =&gt; {
  <span class="hljs-built_in">console</span>.log(body)
})

<span class="hljs-comment">/*
  Response structure:
  [
    [
      ID,
      CURRENCY,
      null,
      TIMESTAMP_MILLI,
      null,
      AMOUNT,
      BALANCE,
      null,
      DESCRIPTION
    ],
    ...
  ]
*/</span>
</code></pre><h2>2. New RESTv2 exchange rate endpoint</h2><p>The real-time exchange rate between any two currencies is now accessible via a POST request on <code>/v2/calc/fx</code>:</p><pre><code class="hljs language-javascript">request.post({
  <span class="hljs-attr">url</span>: <span class="hljs-string">`https://api-pub.bitfinex.com/v2/calc/fx`</span>,
  <span class="hljs-attr">json</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">body</span>: {
    <span class="hljs-attr">ccy1</span>: <span class="hljs-string">'BTC'</span>,
    <span class="hljs-attr">ccy2</span>: <span class="hljs-string">'USD'</span>
  }
}, (error, response, body) =&gt; {
  <span class="hljs-built_in">console</span>.log(body)
})

<span class="hljs-comment">/*
  Response structure:
  [CURRENT_RATE]
*/</span>
</code></pre><h2>3. New RESTv2 user settings manipulation endpoints</h2><p>Users settings can now be read, modified, and deleted via POST requests:</p><pre><code class="hljs language-javascript"><span class="hljs-comment">// Read: given a key 'key1', read the saved user settings</span>
<span class="hljs-comment">// https://docs.bitfinex.com/v2/reference#user-settings-read</span>
request.post({
  <span class="hljs-attr">url</span>: <span class="hljs-string">`<span class="hljs-subst">${url}</span>/auth/r/settings`</span>,
  <span class="hljs-attr">headers</span>: { <span class="hljs-comment">/* auth headers */</span> },
  <span class="hljs-attr">json</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">body</span>: {
    <span class="hljs-attr">keys</span>: [
      <span class="hljs-string">'api:key1'</span>
    ]
  },
}, (error, response, body) =&gt; {
  <span class="hljs-built_in">console</span>.log(body) <span class="hljs-comment">// [[key, value], ...]</span>
})

<span class="hljs-comment">// Write: given an object of keys and values, write settings</span>
<span class="hljs-comment">// https://docs.bitfinex.com/v2/reference#user-settings-write</span>
request.post({
  <span class="hljs-attr">url</span>: <span class="hljs-string">`<span class="hljs-subst">${url}</span>/auth/w/settings/set`</span>,
  <span class="hljs-attr">headers</span>: { <span class="hljs-comment">/* auth headers */</span> },
  <span class="hljs-attr">json</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">body</span>: {
    <span class="hljs-attr">settings</span>: {
      <span class="hljs-string">'api:key1'</span>: <span class="hljs-string">'foo'</span>, <span class="hljs-comment">// key1 -&gt; foo</span>
      <span class="hljs-string">'api:key2'</span>: {      <span class="hljs-comment">// key2 -&gt; { bar: 2 }</span>
        <span class="hljs-attr">bar</span>: <span class="hljs-number">2</span>
      }
    },
  }
}, (error, response, body) =&gt; {
  <span class="hljs-built_in">console</span>.log(body)
})

<span class="hljs-comment">// Delete: a user setting by key</span>
<span class="hljs-comment">// https://docs.bitfinex.com/v2/reference#user-settings-delete</span>
request.post({
  <span class="hljs-attr">url</span>: <span class="hljs-string">`<span class="hljs-subst">${url}</span>/auth/w/settings/del`</span>,
  <span class="hljs-attr">headers</span>: { <span class="hljs-comment">/* auth headers */</span> },
  <span class="hljs-attr">json</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">body</span>: {
    <span class="hljs-attr">settings</span>: {
      <span class="hljs-string">'api:key1'</span>: <span class="hljs-number">1</span>, <span class="hljs-comment">// delete key1</span>
      <span class="hljs-string">'api:key2'</span>: <span class="hljs-number">1</span>  <span class="hljs-comment">// delete key2</span>
    },
  }
}, (error, response, body) =&gt; {
  <span class="hljs-built_in">console</span>.log(body)
})
</code></pre><h2>4. Added WSv2 order flag support</h2><p>Orders now contain a ‘flags’ field which can be used to modify execution behaviour. This replaces the old <code>hidden</code> and <code>postonly</code> boolean fields; if multiple flags need to be active on an order, they can be added together (logical AND). For more details, see the <a href="https://medium.com/bitfinex/bitfinex-api-dev-update-april-ee10d59f75c2">annoucement blog post</a>.</p><pre><code class="hljs language-javascript">Order.flags = {
  <span class="hljs-comment">/* The one cancels other order option allows you to place a
     pair of orders stipulating that if one order is executed
     fully or partially, then the other is automatically
     canceled. */</span>
  <span class="hljs-attr">OCO</span>: <span class="hljs-number">2</span> ** <span class="hljs-number">14</span>, <span class="hljs-comment">// 16384</span>
  
  <span class="hljs-comment">/* The post-only limit order option ensures the limit order will
     be added to the order book and not matched with a pre-existing
     order. */</span>
  <span class="hljs-attr">POSTONLY</span>: <span class="hljs-number">2</span> ** <span class="hljs-number">12</span>, <span class="hljs-comment">// 4096</span>
  
  <span class="hljs-comment">/* The hidden order option ensures an order does not appear in
     the order book; thus does not influence other market
     participants. */</span>
  <span class="hljs-attr">HIDDEN</span>: <span class="hljs-number">2</span> ** <span class="hljs-number">6</span>, <span class="hljs-comment">// 64</span>

  <span class="hljs-comment">/* Excludes variable rate funding offers when selecting funding
     for a Margin order. */</span>
  <span class="hljs-attr">NO_VR</span>: <span class="hljs-number">2</span> ** <span class="hljs-number">19</span>, <span class="hljs-comment">// 524288</span>
  
  <span class="hljs-comment">/* Close position if present */</span>
  <span class="hljs-attr">POS_CLOSE</span>: <span class="hljs-number">2</span> ** <span class="hljs-number">9</span>, <span class="hljs-comment">// 512</span>
  
  <span class="hljs-comment">/* Applies to Margin orders only; if set, and the order would
     increase the size of an open position, the order is cancelled */</span>
  <span class="hljs-attr">REDUCE_ONLY</span>: <span class="hljs-number">2</span> ** <span class="hljs-number">10</span> <span class="hljs-comment">// 1024</span>
}
</code></pre><h2>5. Added WSv2 timestamp flag</h2><p>When sending the WebSocket <code>conf</code> request, you may apply the new timestamp flag of value 32768. Once received, the timestamp will appended to every array sent by the server.</p><p>Just like order flags, the timestamp flag can be summed with other conf flags.</p><p>All available conf flags can be found <a href="https://docs.bitfinex.com/v2/docs/ws-general#section-available-options">here</a></p><h2>6. Added WSv2 atomic order updates</h2><p>You may now update an order via the WebSocket API in-place. You can change an order’s price, amount, change an amount with a given delta, alter group IDs, and change the trailing price delta. Prior to this, changes to an order were applied by cancelling &amp; submitting a new order (orders were immutable).</p><pre><code class="hljs language-javascript"><span class="hljs-comment">// adjust the remaining amount to 0.1 and set price to 500</span>
ws.send(<span class="hljs-built_in">JSON</span>.stringify([
  <span class="hljs-number">0</span>, <span class="hljs-string">'ou'</span>, <span class="hljs-literal">null</span>, {
    <span class="hljs-attr">id</span>: <span class="hljs-number">1149698545</span>,
    <span class="hljs-attr">amount</span>: <span class="hljs-string">'0.1'</span>,
    <span class="hljs-attr">price</span>: <span class="hljs-string">'500'</span>
  }
])) 

<span class="hljs-comment">// increase the remaining amount by 0.1</span>
ws.send(<span class="hljs-built_in">JSON</span>.stringify([
  <span class="hljs-number">0</span>, ‘ou’, <span class="hljs-literal">null</span>, {
    <span class="hljs-attr">id</span>: <span class="hljs-number">1149698545</span>,
    <span class="hljs-attr">delta</span>: <span class="hljs-string">'0.1'</span>,
    <span class="hljs-attr">price</span>: <span class="hljs-string">'6500'</span>
  }
])) 

<span class="hljs-comment">// set trailing price delta to 45</span>
ws.send(<span class="hljs-built_in">JSON</span>.stringify([
  <span class="hljs-number">0</span>, ‘ou’, <span class="hljs-literal">null</span>, {
    <span class="hljs-attr">id</span>: <span class="hljs-number">1149698545</span>,
    <span class="hljs-attr">price_trailing</span>: <span class="hljs-string">'45'</span>
  }
]))

<span class="hljs-comment">// Or, if using bitfinex-api-node, use the update method:</span>
<span class="hljs-keyword">const</span> o = <span class="hljs-keyword">new</span> Order({
  <span class="hljs-attr">id</span>: <span class="hljs-number">1149698545</span>
  <span class="hljs-comment">// ...</span>
}, ws)

<span class="hljs-comment">// Mirroring the examples above</span>
o.update({ <span class="hljs-attr">amount</span>: <span class="hljs-string">'0.1'</span>, <span class="hljs-attr">price</span>: <span class="hljs-string">'500'</span> })
o.update({ <span class="hljs-attr">delta</span>: <span class="hljs-string">'0.1'</span>, <span class="hljs-attr">price</span>: <span class="hljs-string">'6500'</span> })
o.update({ <span class="hljs-attr">priceTrailing</span>: <span class="hljs-string">'45'</span> })
</code></pre><h2>7. Added WSv2 offer submission</h2><p>You may now submit an offer via the WebSocket API to receive or provide funding. A few examples:</p><pre><code class="hljs language-javascript"><span class="hljs-comment">// submit a LIMIT offer for USD</span>
ws.send(<span class="hljs-built_in">JSON</span>.stringify([
  <span class="hljs-number">0</span>, <span class="hljs-string">'fon'</span>, <span class="hljs-literal">null</span>, {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'LIMIT'</span>,
    <span class="hljs-attr">symbol</span>: <span class="hljs-string">'fUSD'</span>,
    <span class="hljs-attr">amount</span>: <span class="hljs-string">'50'</span>,
    <span class="hljs-attr">rate</span>: <span class="hljs-string">'0.0002'</span>,
    <span class="hljs-attr">period</span>: <span class="hljs-number">7</span>,
    <span class="hljs-attr">flags</span>: <span class="hljs-number">0</span>
  }
]))

<span class="hljs-comment">// submit a Hidden FRR Delta Variable offer for USD</span>
ws.send(<span class="hljs-built_in">JSON</span>.stringify([
  <span class="hljs-number">0</span>, <span class="hljs-string">'fon'</span>, <span class="hljs-literal">null</span>, {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'FRRDELTAVAR'</span>,
    <span class="hljs-attr">symbol</span>: <span class="hljs-string">'fUSD'</span>,
    <span class="hljs-attr">amount</span>: <span class="hljs-string">'-50'</span>,
    <span class="hljs-attr">rate</span>: <span class="hljs-string">'0.0001'</span>,
    <span class="hljs-attr">period</span>: <span class="hljs-number">7</span>,
    <span class="hljs-attr">flags</span>: <span class="hljs-number">64</span>
  }
]))
</code></pre><h2>8. Added WSv2 notification broadcasts</h2><p>Users can now broadcast custom notifications via the WebSocket v2 API, with the only requirement being that the notification type must begin with ‘ucm’. Notifications broadcast by a user are echo’ed out from all other active API connections, and have no limitations on payload or internal structure.</p><p>The following is example notification broadcast packet:</p><pre><code class="hljs language-javascript"><span class="hljs-comment">// MESSAGE_ID can be null, and should be used to match requests &amp; responses</span>
w1.send(<span class="hljs-built_in">JSON</span>.stringify([
  <span class="hljs-number">0</span>, <span class="hljs-string">'n'</span>, MESSAGE_ID, {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'ucm-req'</span>,
    <span class="hljs-attr">info</span>: { <span class="hljs-comment">// custom payload data</span>
      <span class="hljs-attr">foo</span>: <span class="hljs-number">1</span>,
      <span class="hljs-attr">bar</span>: <span class="hljs-number">2</span>
    }
  }
]))
</code></pre><h1>v2017-03-28</h1><p><em>Release Date: Saturday 1 April 2017 (~4pm UTC)</em></p><h2>1. WebSocket changes</h2><h3>“mis”, “miu”, “fis”, “fiu”, “bs”, “bu”</h3><p>“mis”, “fis”, “bs”: will not be sent anymore “fiu”, “miu”: will change the protocol to be more granular. Instead sending a message containing all the information for all pairs/currencies they will be split in multiple messages containing the information of the pair/currency they are referring to.</p><p><strong>&quot;fiu&quot;</strong>: will be granular per currency</p><p><em>Current message</em></p><pre><code class="hljs language-json">[
  <span class="hljs-number">0</span>,
  <span class="hljs-string">"fiu"</span>,
  [
    <span class="hljs-literal">null</span>,
    <span class="hljs-literal">null</span>,
    [
      [
        SYMBOL, 
        [
          YIELD_LOAN,
          YIELD_LEND,
          DURATION_LOAN,
          DURATION_LEND,
          ...
        ]
      ],
     ...
    ]
  ]
</code></pre><p><em>New message</em></p><pre><code class="hljs language-json">[
  <span class="hljs-number">0</span>,
  <span class="hljs-string">"fiu"</span>,
  [
    <span class="hljs-string">"sym"</span>,
    SYMBOL,
    [
      YIELD_LOAN,
      YIELD_LEND,
      DURATION_LOAN,
      DURATION_LEND
    ]
  ]
]
</code></pre><p><strong><code>miu</code></strong>: will be granular per trading symbol with an addition of a ‘base’ message</p><p><em>Current message</em></p><pre><code class="hljs language-json">[
  <span class="hljs-number">0</span>,
  <span class="hljs-string">"miu"</span>,
  [
    USER_PL,
    USER_SWAP,
    [
      [
        SYMBOL,
        [ TRADABLE_BALANCE, ... ]
      ],
      MARGIN_BALANCE,
      MARGIN_NET
    ]
  ]
</code></pre><p><em>New message</em></p><pre><code class="hljs language-json">[
  <span class="hljs-number">0</span>,
  <span class="hljs-string">"miu"</span>,
  [
    <span class="hljs-string">"base"</span>,
    [
      USER_PL,
      USER_SWAP,
      MARGIN_BALANCE,
      MARGIN_NET
    ]
  ]
]

[
  <span class="hljs-number">0</span>,
  <span class="hljs-string">"miu"</span>,
  [
    <span class="hljs-string">"sym"</span>,
    [
      SYMBOL,
      [ TRADABLE_BALANCE, ... ]
    ]
  ]
]
</code></pre><h3>“ps”, “pu”, “ws”, “wu”</h3><p>These messages do not change the format but they gain the ability to send the calculation values (liquidation price, available balance) equal to “null” meaning that the new calculated value is not yet available.</p><p><em>Practical example</em></p><pre><code class="hljs language-json">[
  <span class="hljs-number">0</span>,
  <span class="hljs-string">"ps"</span>,
  [
    [ <span class="hljs-string">"tETHUSD"</span>,<span class="hljs-string">"ACTIVE"</span>,<span class="hljs-number">5.11</span>,<span class="hljs-number">12.349</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span> ],
    [ <span class="hljs-string">"tBTCUSD"</span>,<span class="hljs-string">"ACTIVE"</span>,<span class="hljs-number">0.01</span>,<span class="hljs-number">1039.558031</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span> ]
  ]
]

[
  <span class="hljs-number">0</span>,
  <span class="hljs-string">"pu"</span>,
  [ <span class="hljs-string">"tETHUSD"</span>,<span class="hljs-string">"ACTIVE"</span>,<span class="hljs-number">5.11</span>,<span class="hljs-number">12.349</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">-12.10559</span>,<span class="hljs-number">-19.18373957</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0.0073</span> ]
]

[
  <span class="hljs-number">0</span>,
  <span class="hljs-string">"pu"</span>,
  [ <span class="hljs-string">"tBTCUSD"</span>,<span class="hljs-string">"ACTIVE"</span>,<span class="hljs-number">0.01</span>,<span class="hljs-number">1039.558031</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">-0.01638031</span>,<span class="hljs-number">-0.15756994</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0.1136</span> ]
]
</code></pre><h3>“calc” input message</h3><p>This message will be used by UI and bot clients to trigger specific calculations, so we don’t end up in calculating data that is not needed (i.e right now the UI receives margin calculation informations also for pairs that are not visualised)</p><pre><code class="hljs language-json">[
  <span class="hljs-number">0</span>,
  <span class="hljs-string">"calc"</span>,
  <span class="hljs-literal">null</span>,
  [
    [<span class="hljs-string">"margin_sym_tBTCUSD"</span>],
    [<span class="hljs-string">"position_tBTCUSD"</span>],
    [<span class="hljs-string">"wallet_margin_BTC"</span>],
    [<span class="hljs-string">"wallet_funding_USD"</span>]
  ]
]

</code></pre><div class="bfx-oss-docs-callout info"><div class="bfx-oss-docs-callout__marker"><p>!</p></div><div class="bfx-oss-docs-callout__content"><div class="bfx-oss-docs-callout__header"><p>NOTE</p><h6>info</h6></div><div class="bfx-oss-docs-callout__body"><p>Calculations are on demand, so no more streaming of unnecessary data. Websocket server allows up to 30 calculations per batch. If the client sends too many concurrent requests (or tries to spam) requests, it will receive an error and potentially a disconnection. The Websocket server performs a maximum of 8 calculations per second (per client)</p></div></div></div><h2>1. REST changes</h2><h3>“/auth/r/margin/SYMBOL”, “/auth/r/funding/SYMBOL”</h3><p>These two endpoints will be granular per symbol</p><p>Example: <code>/auth/r/trading/tBTCUSD</code> <code>/auth/r/funding/fUSD</code></p></div></div><div id="bfx-oss-docs-footer-bar"><div id="bfx-oss-docs-footer-bar__container"><p>Copyright © 2013-2020 iFinex Inc. All rights reserved.</p></div></div></div><script type="text/javascript" src="js/vendor/zepto.min.js"></script><script type="text/javascript" src="js/vendor/lodash.min.js"></script><script type="text/javascript" src="js/vendor/debug.min.js"></script><script type="text/javascript" src="js/debug_init.js"></script></body></html>