<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width,initial-scale=1"><meta charset="utf-8"><link rel="stylesheet" type="text/css" href="css/normalize.css"><link rel="stylesheet" type="text/css" href="css/perfect-scrollbar.css"><link rel="stylesheet" type="text/css" href="css/highlightjs/night-owl.css"><link rel="stylesheet" type="text/css" href="index.css"><title>README | bitfinex-api-py</title></head><body><div id="bfx-oss-docs-side-bar"><div id="bfx-oss-docs-side-bar__header"><img src="img/bfx-logo-bg-white.png" alt="Bitfinex" height="63"></div><ul><li><a href="index.html"><p>Home</p></a></li><li><a href="page_md_render_test.html"><p>Markdown Render Test</p></a></li><li class="active"><a href="/page_libraries_bitfinex_api_py_README.html"><img src="svg/icons/python.svg"><p>bitfinex-api-py</p></a><ul><li class="active"><a href="page_libraries_bitfinex_api_py_README.html"><p>- README</p></a></li><li><a href="page_libraries_bitfinex_api_py_reference.html"><p>- reference</p></a></li><li><a href="page_libraries_bitfinex_api_py_regenerate_docs.html"><p>- regenerate_docs</p></a></li></ul></li><li><a href="/page_libraries_bitfinex_api_go_README.html"><img src="svg/icons/go.svg"><p>bitfinex-api-go</p></a></li><li><a href="/page_libraries_bfxfixgw_README.html"><img src="svg/icons/go.svg"><p>bfxfixgw</p></a></li><li><a href="/page_libraries_bitfinex_api_rb_README.html"><img src="svg/icons/ruby.svg"><p>bitfinex-api-rb</p></a></li><li><a href="/page_libraries_bitfinex_api_node_README.html"><img src="svg/icons/nodejs_small.svg"><p>bitfinex-api-node</p></a></li><li><a href="/page_libraries_bfx_api_mock_srv_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-mock-srv</p></a></li><li><a href="/page_libraries_bfx_api_node_core_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-core</p></a></li><li><a href="/page_libraries_bfx_api_node_models_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-models</p></a></li><li><a href="/page_libraries_bfx_api_node_plugin_example_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-example</p></a></li><li><a href="/page_libraries_bfx_api_node_plugin_managed_candles_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-managed-candles</p></a></li><li><a href="/page_libraries_bfx_api_node_plugin_managed_ob_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-managed-ob</p></a></li><li><a href="/page_libraries_bfx_api_node_plugin_ob_checksum_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-ob-checksum</p></a></li><li><a href="/page_libraries_bfx_api_node_plugin_seq_audit_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-seq-audit</p></a></li><li><a href="/page_libraries_bfx_api_node_plugin_wd_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-wd</p></a></li><li><a href="/page_libraries_bfx_api_node_rest_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-rest</p></a></li><li><a href="/page_libraries_bfx_api_node_util_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-util</p></a></li><li><a href="/page_libraries_bfx_api_node_ws1_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-api-node-ws1</p></a></li><li><a href="/page_libraries_bfx_hf_backtest_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-backtest</p></a></li><li><a href="/page_libraries_bfx_hf_chart_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-chart</p></a></li><li><a href="/page_libraries_bfx_hf_data_server_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-data-server</p></a></li><li><a href="/page_libraries_bfx_hf_ext_plugin_bitfinex_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-ext-plugin-bitfinex</p></a></li><li><a href="/page_libraries_bfx_hf_ext_plugin_dummy_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-ext-plugin-dummy</p></a></li><li><a href="/page_libraries_bfx_hf_indicators_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-indicators</p></a></li><li><a href="/page_libraries_bfx_hf_models_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-models</p></a></li><li><a href="/page_libraries_bfx_hf_models_adapter_lowdb_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-models-adapter-lowdb</p></a></li><li><a href="/page_libraries_bfx_hf_models_adapter_sql_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-models-adapter-sql</p></a></li><li><a href="/page_libraries_bfx_hf_models_adapter_template_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-models-adapter-template</p></a></li><li><a href="/page_libraries_bfx_hf_algo_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-algo</p></a></li><li><a href="/page_libraries_bfx_hf_server_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-server</p></a></li><li><a href="/page_libraries_bfx_hf_strategy_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-strategy</p></a></li><li><a href="/page_libraries_bfx_hf_strategy_exec_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-strategy-exec</p></a></li><li><a href="/page_libraries_bfx_hf_ui_config_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-ui-config</p></a></li><li><a href="/page_libraries_bfx_hf_util_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-hf-util</p></a></li><li><a href="/page_libraries_bfx_ws2_api_audit_README.html"><img src="svg/icons/nodejs_small.svg"><p>bfx-ws2-api-audit</p></a></li><li><a href="/page_libraries_cbq_js_README.html"><img src="svg/icons/nodejs_small.svg"><p>cbq-js</p></a></li><li><a href="/page_libraries_caron_README.html"><img src="svg/icons/nodejs_small.svg"><p>caron</p></a></li><li><a href="/page_libraries_eos_name_verify_README.html"><img src="svg/icons/nodejs_small.svg"><p>eos-name-verify</p></a></li><li><a href="/page_libraries_grenache_browser_http_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-browser-http</p></a></li><li><a href="/page_libraries_grenache_grape_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-grape</p></a></li><li><a href="/page_libraries_grenache_nodejs_base_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-nodejs-base</p></a></li><li><a href="/page_libraries_grenache_nodejs_http_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-nodejs-http</p></a></li><li><a href="/page_libraries_grenache_nodejs_link_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-nodejs-link</p></a></li><li><a href="/page_libraries_grenache_nodejs_utp_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-nodejs-utp</p></a></li><li><a href="/page_libraries_grenache_nodejs_ws_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-nodejs-ws</p></a></li><li><a href="/page_libraries_grenache_nodejs_ws_tls_README.html"><img src="svg/icons/nodejs_small.svg"><p>grenache-nodejs-ws-tls</p></a></li><li><a href="/page_libraries_lib_js_util_currencies_README.html"><img src="svg/icons/nodejs_small.svg"><p>lib-js-util-currencies</p></a></li><li><a href="/page_libraries_lib_js_util_math_README.html"><img src="svg/icons/nodejs_small.svg"><p>lib-js-util-math</p></a></li><li><a href="/page_libraries_lib_js_util_number_README.html"><img src="svg/icons/nodejs_small.svg"><p>lib-js-util-number</p></a></li><li><a href="/page_libraries_lib_js_util_symbol_README.html"><img src="svg/icons/nodejs_small.svg"><p>lib-js-util-symbol</p></a></li><li><a href="/page_libraries_smidgen_README.html"><img src="svg/icons/nodejs_small.svg"><p>smidgen</p></a></li><li><a href="/page_libraries_sunbeam_README.html"><img src="svg/icons/nodejs_small.svg"><p>sunbeam</p></a></li><li><a href="/page_libraries_wasteland_README.html"><img src="svg/icons/nodejs_small.svg"><p>wasteland</p></a></li></ul></div><div id="bfx-oss-docs-content"><div id="bfx-oss-docs-header-bar"><h2>README</h2><h2>bitfinex-api-py</h2></div><div id="bfx-oss-docs-content-wrapper" class="bfx-oss-docs-content-type-api-docs"><div class="bfx-oss-docs-md-content bfx-oss-docs-code-wrapper"><div id="bfx-oss-docs-api-docs-index"><div id="bfx-oss-docs-api-docs-index__inner"><nav class="bfx-oss-docs-md-toc"><ol><li><a href="#bitfinex-trading-library-for-python---bitcoin%2C-ethereum%2C-ripple-and-more">Bitfinex Trading Library for Python - Bitcoin, Ethereum, Ripple and more</a></li><li><a href="#features">Features</a><ol><li><a href="#installation">Installation</a></li><li><a href="#quickstart">Quickstart</a></li><li><a href="#docs">Docs</a></li><li><a href="#examples">Examples</a><ol><li><a href="#authenticate">Authenticate</a></li><li><a href="#subscribe-to-trades">Subscribe to trades</a></li><li><a href="#withdraw-from-wallet-via-rest">Withdraw from wallet via REST</a></li></ol></li><li><a href="#faq">FAQ</a><ol><li><a href="#is-there-any-rate-limiting%3F">Is there any rate limiting?</a></li><li><a href="#will-i-always-receive-an-on-packet%3F">Will I always receive an on packet?</a></li><li><a href="#my-websocket-won%E2%80%99t-connect!">My websocket won’t connect!</a></li><li><a href="#nonce-too-small">nonce too small</a></li><li><a href="#how-do-te-and-tu-messages-differ%3F">How do te and tu messages differ?</a></li><li><a href="#what-are-the-sequence-numbers-for%3F">What are the sequence numbers for?</a></li><li><a href="#what-is-the-difference-between-r*-and-p*-order-books%3F">What is the difference between R* and P* order books?</a></li></ol></li><li><a href="#contributing">Contributing</a><ol><li><a href="#publish-to-pypi">Publish to Pypi</a></li></ol></li></ol></li></ol></nav></div></div><h1 id="bitfinex-trading-library-for-python---bitcoin%2C-ethereum%2C-ripple-and-more"><a class="header-anchor" href="#bitfinex-trading-library-for-python---bitcoin%2C-ethereum%2C-ripple-and-more">§</a> Bitfinex Trading Library for Python - Bitcoin, Ethereum, Ripple and more</h1><p><img src="https://api.travis-ci.org/bitfinexcom/bitfinex-api-py.svg?branch=master" alt="https://api.travis-ci.org/bitfinexcom/bitfinex-api-py.svg?branch=master"></p><p>A Python reference implementation of the Bitfinex API for both REST and websocket interaction.</p><h1 id="features"><a class="header-anchor" href="#features">§</a> Features</h1><ul><li>Official implementation</li><li>Websocket V2 and Rest V2</li><li>Connection multiplexing</li><li>Order and wallet management</li><li>All market data feeds</li></ul><h2 id="installation"><a class="header-anchor" href="#installation">§</a> Installation</h2><p>Clone package into PYTHONPATH:</p><pre><code class="hljs language-sh">git <span class="hljs-built_in">clone</span> https://github.com/bitfinexcom/bitfinex-api-py.git
<span class="hljs-built_in">cd</span> bitfinex-api-py
</code></pre><p>Or via pip3:</p><pre><code class="hljs language-sh">pip3 install -r requirements.txt
python3 setup.py install
</code></pre><p>Run the trades/candles example:</p><pre><code class="hljs language-sh"><span class="hljs-built_in">cd</span> bfxapi/examples/ws
python3 subscribe_trades_candles.py
</code></pre><h2 id="quickstart"><a class="header-anchor" href="#quickstart">§</a> Quickstart</h2><pre><code class="hljs language-python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">from</span> bfxapi <span class="hljs-keyword">import</span> Client, Order

bfx = Client(
  API_KEY=<span class="hljs-string">'&lt;YOUR_API_KEY&gt;'</span>,
  API_SECRET=<span class="hljs-string">'&lt;YOUR_API_SECRET&gt;'</span>
)

<span class="hljs-meta">@bfx.ws.on('authenticated')</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">submit_order</span><span class="hljs-params">(auth_message)</span>:</span>
  <span class="hljs-keyword">await</span> bfx.ws.submit_order(<span class="hljs-string">'tBTCUSD'</span>, <span class="hljs-number">19000</span>, <span class="hljs-number">0.01</span>, Order.Type.EXCHANGE_MARKET)

bfx.ws.run()
</code></pre><h2 id="docs"><a class="header-anchor" href="#docs">§</a> Docs</h2><ul><li><b><a href="docs/rest_v2.md">V2 Rest</a></b> - Documentation</li><li><b><a href="docs/ws_v2.md">V2 Websocket</a></b> - Documentation</li></ul><h2 id="examples"><a class="header-anchor" href="#examples">§</a> Examples</h2><h4 id="authenticate"><a class="header-anchor" href="#authenticate">§</a> Authenticate</h4><pre><code class="hljs language-python">bfx = Client(
  API_KEY=<span class="hljs-string">'&lt;YOUR_API_KEY&gt;'</span>,
  API_SECRET=<span class="hljs-string">'&lt;YOUR_API_SECRET&gt;'</span>
)

<span class="hljs-meta">@bfx.ws.on('authenticated')</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">do_something</span><span class="hljs-params">()</span>:</span>
  <span class="hljs-keyword">print</span> (<span class="hljs-string">"Success!"</span>)

bfx.ws.run()
</code></pre><h4 id="subscribe-to-trades"><a class="header-anchor" href="#subscribe-to-trades">§</a> Subscribe to trades</h4><pre><code class="hljs language-python"><span class="hljs-keyword">from</span> bfxapi <span class="hljs-keyword">import</span> Client

bfx = Client(
  API_KEY=API_KEY,
  API_SECRET=API_SECRET
)

<span class="hljs-meta">@bfx.ws.on('new_trade')</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">log_trade</span><span class="hljs-params">(trade)</span>:</span>
  <span class="hljs-keyword">print</span> (<span class="hljs-string">"New trade: {}"</span>.format(trade))

<span class="hljs-meta">@bfx.ws.on('connected')</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">start</span><span class="hljs-params">()</span>:</span>
  bfx.ws.subscribe(<span class="hljs-string">'trades'</span>, <span class="hljs-string">'tBTCUSD'</span>)

bfx.ws.run()
</code></pre><h4 id="withdraw-from-wallet-via-rest"><a class="header-anchor" href="#withdraw-from-wallet-via-rest">§</a> Withdraw from wallet via REST</h4><pre><code class="hljs language-python">bfx = Client(
  API_KEY=API_KEY,
  API_SECRET=API_SECRET,
  logLevel=<span class="hljs-string">'DEBUG'</span>
)
response = <span class="hljs-keyword">await</span> bfx.rest.submit_wallet_withdraw(<span class="hljs-string">"exchange"</span>, <span class="hljs-string">"tetheruse"</span>, <span class="hljs-number">5</span>, <span class="hljs-string">"0xc5bbb852f82c24327693937d4012f496cff7eddf"</span>)
<span class="hljs-keyword">print</span> (<span class="hljs-string">"Address: "</span>, response.notify_info)
</code></pre><p>See the <b><a href="https://github.com/bitfinexcom/bitfinex-api-py/tree/master/examples">examples</a></b> directory for more, like:</p><ul><li><a href="https://github.com/bitfinexcom/bitfinex-api-py/blob/master/bfxapi/examples/ws/send_order.py">Creating/updating an order</a></li><li><a href="https://github.com/bitfinexcom/bitfinex-api-py/blob/master/bfxapi/examples/ws/resubscribe_orderbook.py">Subscribing to orderbook updates</a></li><li><a href="https://github.com/bitfinexcom/bitfinex-api-py/blob/master/bfxapi/examples/rest/transfer_wallet.py">Withdrawing crypto</a></li><li><a href="https://github.com/bitfinexcom/bitfinex-api-py/blob/master/bfxapi/examples/rest/create_funding.py">Submitting a funding offer</a> For more info on how to use this library please see the example scripts in the <code>bfxapi/examples</code> directory. Here you will find usage of all interface exposed functions for both the rest and websocket.</li></ul><p>Also please see <a href="https://medium.com/@Bitfinex/15f201ad20d4">this medium article</a> for a tutorial.</p><h2 id="faq"><a class="header-anchor" href="#faq">§</a> FAQ</h2><h3 id="is-there-any-rate-limiting%3F"><a class="header-anchor" href="#is-there-any-rate-limiting%3F">§</a> Is there any rate limiting?</h3><p>For a Websocket connection there is no limit to the number of requests sent down the connection (unlimited order operations) however an account can only create 15 new connections every 5 mins and each connection is only able to subscribe to 30 inbound data channels. Fortunately this library handles all of the load balancing/multiplexing for channels and will automatically create/destroy new connections when needed, however the user may still encounter the max connections rate limiting error.</p><p>For rest the base limit per-user is 1,000 orders per 5 minute interval, and is shared between all account API connections. It increases proportionally to your trade volume based on the following formula:</p><p>1000 + (TOTAL_PAIRS_PLATFORM * 60 * 5) / (250000000 / USER_VOL_LAST_30d)</p><p>Where TOTAL_PAIRS_PLATFORM is the number of pairs on the Bitfinex platform (currently ~101) and USER_VOL_LAST_30d is in USD.</p><h3 id="will-i-always-receive-an-on-packet%3F"><a class="header-anchor" href="#will-i-always-receive-an-on-packet%3F">§</a> Will I always receive an <code>on</code> packet?</h3><p>No; if your order fills immediately, the first packet referencing the order will be an <code>oc</code> signaling the order has closed. If the order fills partially immediately after creation, an <code>on</code> packet will arrive with a status of <code>PARTIALLY FILLED...</code></p><p>For example, if you submit a <code>LIMIT</code> buy for 0.2 BTC and it is added to the order book, an <code>on</code> packet will arrive via ws2. After a partial fill of 0.1 BTC, an <code>ou</code> packet will arrive, followed by a final <code>oc</code> after the remaining 0.1 BTC fills.</p><p>On the other hand, if the order fills immediately for 0.2 BTC, you will only receive an <code>oc</code> packet.</p><h3 id="my-websocket-won%E2%80%99t-connect!"><a class="header-anchor" href="#my-websocket-won%E2%80%99t-connect!">§</a> My websocket won’t connect!</h3><p>Did you call <code>client.Connect()</code>? :)</p><h3 id="nonce-too-small"><a class="header-anchor" href="#nonce-too-small">§</a> nonce too small</h3><p>I make multiple parallel request and I receive an error that the nonce is too small. What does it mean?</p><p>Nonces are used to guard against replay attacks. When multiple HTTP requests arrive at the API with the wrong nonce, e.g. because of an async timing issue, the API will reject the request.</p><p>If you need to go parallel, you have to use multiple API keys right now.</p><h3 id="how-do-te-and-tu-messages-differ%3F"><a class="header-anchor" href="#how-do-te-and-tu-messages-differ%3F">§</a> How do <code>te</code> and <code>tu</code> messages differ?</h3><p>A <code>te</code> packet is sent first to the client immediately after a trade has been matched &amp; executed, followed by a <code>tu</code> message once it has completed processing. During times of high load, the <code>tu</code> message may be noticably delayed, and as such only the <code>te</code> message should be used for a realtime feed.</p><h3 id="what-are-the-sequence-numbers-for%3F"><a class="header-anchor" href="#what-are-the-sequence-numbers-for%3F">§</a> What are the sequence numbers for?</h3><p>If you enable sequencing on v2 of the WS API, each incoming packet will have a public sequence number at the end, along with an auth sequence number in the case of channel <code>0</code> packets. The public seq numbers increment on each packet, and the auth seq numbers increment on each authenticated action (new orders, etc). These values allow you to verify that no packets have been missed/dropped, since they always increase monotonically.</p><h3 id="what-is-the-difference-between-r*-and-p*-order-books%3F"><a class="header-anchor" href="#what-is-the-difference-between-r*-and-p*-order-books%3F">§</a> What is the difference between R* and P* order books?</h3><p>Order books with precision <code>R0</code> are considered ‘raw’ and contain entries for each order submitted to the book, whereas <code>P*</code> books contain entries for each price level (which aggregate orders).</p><h2 id="contributing"><a class="header-anchor" href="#contributing">§</a> Contributing</h2><ol><li>Fork it ( <a href="https://github.com/%5Bmy-github-username%5D/bitfinex/fork">https://github.com/[my-github-username]/bitfinex/fork</a> )</li><li>Create your feature branch (<code>git checkout -b my-new-feature</code>)</li><li>Commit your changes (<code>git commit -am 'Add some feature'</code>)</li><li>Push to the branch (<code>git push origin my-new-feature</code>)</li><li>Create a new Pull Request</li></ol><h3 id="publish-to-pypi"><a class="header-anchor" href="#publish-to-pypi">§</a> Publish to Pypi</h3><pre><code class="hljs">python <span class="hljs-title">setup</span>.py sdist
twine upload <span class="hljs-built_in">dist</span><span class="hljs-comment">/*
</span></code></pre></div></div><!--
      <div id="bfx-oss-docs-footer-bar">
        <div id="bfx-oss-docs-footer-bar__container">
          <p>Copyright © 2013-2020 iFinex Inc. All rights reserved.</p>
        </div>
      </div>
      --></div><script type="text/javascript" src="js/vendor/debug.min.js"></script><script type="text/javascript" src="js/vendor/lodash.min.js"></script><script type="text/javascript" src="js/vendor/zepto.min.js"></script><script type="text/javascript" src="js/vendor/perfect-scrollbar.min.js"></script><script type="text/javascript" src="js/main.js"></script></body></html>